<!DOCTYPE html>
<html lang="en">
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-54137818-11"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-54137818-11', {'anonymize_ip': true});
</script>
    <meta charset="utf-8">
    <link href="https://fonts.googleapis.com/css?family=Oxygen+Mono|Roboto+Slab:500,700&display=swap" rel="stylesheet">
    <meta property="og:title" content="Migration guide, v1 to v2 - Javalin - A lightweight Java and Kotlin web framework. Create REST APIs in Java or Kotlin easily.">
    <meta property="og:site_name" content="Javalin">
    <meta property="og:url" content="https://javalin.io">
    <meta property="og:description" content="Javalin - A lightweight Java and Kotlin web framework. Create REST APIs in Java or Kotlin easily.">
    <meta property="og:image" content="https://javalin.io/img/javalin.png">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="google-site-verification" content="liMtSlffOZROWLqoiOZdSx-luH9_Siq5-Ot6xqHZwq8">
    <title>
        Migration guide, v1 to v2 - Javalin - A lightweight Java and Kotlin web framework
    </title>
    <meta name="description" content="Javalin - A lightweight Java and Kotlin web framework. Create REST APIs in Java or Kotlin easily.">
    <link rel="canonical" href="5//migration-guide-javalin-1-to-2">
    <link rel="shortcut icon" type="image/png" href="/img/favicon.png">
    <link rel="stylesheet" href="/css/main.css">
    <style>/* Styles that affect the length of the document */
p code,
li code {
    font-size: 90%;
    letter-spacing: -0.5px;
    border: 1px solid #ccd;
    background: #f5f5f7;
    padding: 1px 3px;
}

.multitab-code pre {
    margin-top: 0;
    border-radius: 0 0 5px 5px;
}

.multitab-code div[data-tab] {
    display: none;
}

:target {
    scroll-margin-top: 108px;
}

.anchorjs-link {
    transition: all .25s linear;
  }
  
*:hover > .anchorjs-link {
    margin-left: -1.125em !important;
 }</style>
</head>
<body>
    <a id="fork-me" href="https://github.com/javalin/javalin" target="_blank">
    <img style="position:fixed;top:0;right:0;border:0;z-index:99999" src="data:image/png;base64,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" alt="Fork me on GitHub">
</a>
    <header class="top-nav-header">
        <nav class="width-limit">
            <a id="logo" href="/" aria-label="Javalin">
                <img src="/img/logo.svg" alt="Javalin">
            </a>
            <ul>
                <li><a href="/documentation">Docs</a></li>
                <li><a href="/tutorials">Tutorials</a></li>
                <li><a href="/plugins">Plugins</a></li>
                <li><a href="/community">Community</a></li>
            </ul>
        </nav>
    </header>
    <main class="width-limit">
                <h1 class="no-margin-top">Javalin 1 to 2 migration guide</h1>

<h2 id="package-structure">Package structure</h2>
<p>Javalin 2 has some changes to the package structure:</p>

<ul>
  <li><code class="highlighter-rouge">io.javalin.embeddedserver.jetty.websocket</code> <code class="highlighter-rouge">-&gt;</code> <code class="highlighter-rouge">io.javalin.websocket</code></li>
  <li><code class="highlighter-rouge">io.javalin.embeddedserver.Location</code> <code class="highlighter-rouge">-&gt;</code> <code class="highlighter-rouge">io.javalin.staticfiles.Location</code></li>
  <li><code class="highlighter-rouge">io.javalin.translator.json.JavalinJsonPlugin</code> <code class="highlighter-rouge">-&gt;</code> <code class="highlighter-rouge">io.javalin.json.JavalinJson</code></li>
  <li><code class="highlighter-rouge">io.javalin.translator.json.JavalinJacksonPlugin</code> <code class="highlighter-rouge">-&gt;</code> <code class="highlighter-rouge">io.javalin.json.JavalinJackson</code></li>
  <li><code class="highlighter-rouge">io.javalin.translator.template.JavalinXyzPlugin</code> <code class="highlighter-rouge">-&gt;</code> <code class="highlighter-rouge">io.javalin.rendering.JavalinXyz</code></li>
  <li><code class="highlighter-rouge">io.javalin.security.Role.roles</code> <code class="highlighter-rouge">-&gt;</code> <code class="highlighter-rouge">io.javalin.security.SecurityUtil.roles</code></li>
  <li><code class="highlighter-rouge">io.javalin.ApiBuilder</code> <code class="highlighter-rouge">-&gt;</code> <code class="highlighter-rouge">io.javalin.apibuilder.ApiBuilder</code></li>
  <li><code class="highlighter-rouge">io.javalin.ApiBuilder.EndpointGrooup</code> <code class="highlighter-rouge">-&gt;</code> <code class="highlighter-rouge">io.javalin.apibuilder.EndpointGrooup</code></li>
</ul>

<h2 id="server-customizationdefaults">Server customization/defaults</h2>
<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">app</span><span class="o">.</span><span class="na">embeddedServer</span><span class="o">(</span><span class="k">new</span> <span class="n">EmbeddedJettyFactory</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="n">Server</span><span class="o">()))</span> <span class="c1">// v1</span>
<span class="n">app</span><span class="o">.</span><span class="na">server</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="k">new</span> <span class="n">Server</span><span class="o">())</span> <span class="c1">// v2</span>
</code></pre>
</div>
<ul>
  <li>The static method <code class="highlighter-rouge">Javalin.start(port)</code> has been removed. <code class="highlighter-rouge">Javalin.create().start(0);</code> is now required.</li>
  <li>Dynamic gzip is now enabled by default, turn it off with <code class="highlighter-rouge">disableDynamicGzip()</code></li>
  <li>Request-caching is now limited to 4kb by default</li>
  <li>Server now has a <code class="highlighter-rouge">LowResourceMonitor</code> attached by default</li>
  <li><code class="highlighter-rouge">defaultCharset()</code> method has been removed</li>
  <li>URLs are now case-insensitive by default, meaning Javalin will treat <code class="highlighter-rouge">/path</code> and <code class="highlighter-rouge">/Path</code> as the same URL.
This can be disabled with <code class="highlighter-rouge">app.enableCaseSensitiveUrls()</code>.</li>
</ul>

<h2 id="websockets">WebSockets</h2>
<p>It was possible to defined WebSockets using Jetty annotations in v1 of Javalin.
These Jetty WebSockets have limited functionality compared to the Javalin lambda WebSockets,
which is why they have been removed.</p>

<h2 id="accessmanager">AccessManager</h2>
<ul>
  <li>Use <code class="highlighter-rouge">Set</code> instead of <code class="highlighter-rouge">List</code></li>
  <li>The AccessManager now runs for every single request, but the default-implementation does nothing. This might break some implementations that relied on un-managed routes.</li>
</ul>

<h2 id="context">Context</h2>
<ul>
  <li>The <code class="highlighter-rouge">CookieBuilder</code> class has been removed, use <code class="highlighter-rouge">Cookie</code> directly.</li>
  <li><code class="highlighter-rouge">ctx.uri()</code> has been removed, it was a duplicate of <code class="highlighter-rouge">ctx.path()</code></li>
  <li>Things that used to return <code class="highlighter-rouge">Array&lt;T&gt;</code> now return <code class="highlighter-rouge">List&lt;T&gt;</code></li>
  <li>Things that used to return nullable collections now return empty collections instead</li>
  <li><code class="highlighter-rouge">ctx.param()</code> is now <code class="highlighter-rouge">ctx.pathParam()</code></li>
  <li><code class="highlighter-rouge">ctx.xyzOrDefault("key")</code> methods have been change into <code class="highlighter-rouge">ctx.xyz("key", "default")</code></li>
  <li><code class="highlighter-rouge">ctx.next()</code> has been removed</li>
  <li>Kotlin users can now do <code class="highlighter-rouge">ctx.body&lt;MyClass&gt;()</code> to deserialize json</li>
  <li><code class="highlighter-rouge">ctx.request()</code> is now <code class="highlighter-rouge">ctx.req</code></li>
  <li><code class="highlighter-rouge">ctx.response()</code> is now <code class="highlighter-rouge">ctx.res</code></li>
  <li>All <code class="highlighter-rouge">ctx.renderXyz</code> methods are now just <code class="highlighter-rouge">ctx.render()</code> (correct engine is chosen based on extension)</li>
  <li><code class="highlighter-rouge">ctx.charset(charset)</code> has been removed</li>
</ul>

<h2 id="events">Events</h2>
<ul>
  <li>Event handlers no longer take <code class="highlighter-rouge">Event</code> as an argument (they now take nothing)</li>
  <li><code class="highlighter-rouge">io.javalin.event.EventType</code> is now <code class="highlighter-rouge">io.javalin.JavalinEvent</code></li>
</ul>

<h2 id="misc">Misc</h2>
<ul>
  <li>Reverse routing has been removed (will come back, but better)</li>
  <li><code class="highlighter-rouge">HaltException</code> has been removed and replaced with <code class="highlighter-rouge">HttpResponseException</code>. Some common responses are included:
    <ul>
      <li>RedirectResponse</li>
      <li>BadRequestResponse</li>
      <li>UnauthorizedResponse</li>
      <li>ForbiddenResponse</li>
      <li>NotFoundResponse</li>
      <li>MethodNotAllowedResponse</li>
      <li>InternalServerErrorResponse</li>
      <li>ServiceUnavailableResponse</li>
    </ul>
  </li>
</ul>

        <script src="/js/anchor.min.js"></script>
        <script>
            anchors.options.placement = 'left';
            anchors.add();
        </script>

    </main>
    <footer>
        Javalin is a Java and Kotlin web framework, open sourced under the
        <a href="https://tldrlegal.com/license/apache-license-2.0-(apache-2.0)">Apache 2</a> license
        | <a href="/download">Download</a>
        | <a href="/about">About</a>
        | <a href="/news">News</a>
        | <a href="/about#contact">Contact</a>
        | <a href="/for-educators">For educators</a>
    </footer>
    <div id="star-begging">
    <style>
        #star-begging {
            transition: transform .25s;
            transform: scale(0);
            border-radius: 8px;
            position: fixed;
            bottom: 32px;
            right: 32px;
            padding: 20px 40px 16px 20px;
            background: #fff;
            box-shadow: 0 1px 20px rgba(0, 0, 0, 0.15);
            z-index: 9999998;
        }
        #star-begging.in {
            transform: scale(1);
        }
        #star-begging.out {
            transform: translateX(400px);
        }
        #star-begging p {
            font-size: 16px;
            margin: 0 0 15px;
        }
        #star-begging .close {
            position: absolute;
            right: 20px;
            top: 20px;
            height: 40px;
            width: 40px;
            line-height: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            font-family: arial, sans-serif;
            cursor: pointer;
            background: rgba(0, 0, 0, 0.05);
            border-radius: 5px;
        }
    </style>
    <p>
        Like Javalin?
        <br>Star us ðŸ˜Š
    </p>
    <span class="close">Ã—</span>
    <iframe id="starFrame" class="githubStar" title="github-stars"
            src="https://ghbtns.com/github-btn.html?user=javalin&amp;repo=javalin&amp;type=star&amp;count=true&size=large"
            frameborder="0" scrolling="0" width="150px" height="30px">
    </iframe>
    <script>
        if (localStorage.getItem("dismissed") !== "true" && document.getElementById("notification-banner") === null) {
            setTimeout(function () {
                document.querySelector("#star-begging").classList.add("in");
            }, 15000);
            document.querySelector("#star-begging .close").addEventListener("click", function () {
                document.querySelector("#star-begging").classList.add("out");
                localStorage.setItem("dismissed", "true");
            });
        }
    </script>
</div>

    <script src="/js/scripts.js"></script>
</body>
</html>
