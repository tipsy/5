<!DOCTYPE html>
<html lang="en">
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-54137818-11"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-54137818-11', {'anonymize_ip': true});
</script>
    <meta charset="utf-8">
    <link href="https://fonts.googleapis.com/css?family=Oxygen+Mono|Roboto+Slab:500,700&display=swap" rel="stylesheet">
    <meta property="og:title" content="Using Javalin with Kotlin to create a simple CRUD REST API - Javalin - A lightweight Java and Kotlin web framework. Create REST APIs in Java or Kotlin easily.">
    <meta property="og:site_name" content="Javalin">
    <meta property="og:url" content="https://javalin.io">
    <meta property="og:description" content="What You Will Learn">
    <meta property="og:image" content="https://javalin.io/img/javalin.png">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="google-site-verification" content="liMtSlffOZROWLqoiOZdSx-luH9_Siq5-Ot6xqHZwq8">
    <title>
        Using Javalin with Kotlin to create a simple CRUD REST API - Javalin - A lightweight Java and Kotlin web framework
    </title>
    <meta name="description" content="What You Will Learn">
    <link rel="canonical" href="https://zugazagoitia.github.io/tutorials/simple-kotlin-example">
    <link rel="shortcut icon" type="image/png" href="/img/favicon.png">
    <link rel="stylesheet" href="/css/main.css">
    <style>/* Styles that affect the length of the document */
p code,
li code {
    font-size: 90%;
    letter-spacing: -0.5px;
    border: 1px solid #ccd;
    background: #f5f5f7;
    padding: 1px 3px;
}

.multitab-code pre {
    margin-top: 0;
    border-radius: 0 0 5px 5px;
}

.multitab-code div[data-tab] {
    display: none;
}

:target {
    scroll-margin-top: 108px;
}

.anchorjs-link {
    transition: all .25s linear;
  }
  
*:hover > .anchorjs-link {
    margin-left: -1.125em !important;
 }</style>
</head>
<body>
    <a id="fork-me" href="https://github.com/javalin/javalin" target="_blank">
    <img style="position:fixed;top:0;right:0;border:0;z-index:99999" src="data:image/png;base64,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" alt="Fork me on GitHub">
</a>
    <header class="top-nav-header">
        <nav class="width-limit">
            <a id="logo" href="/" aria-label="Javalin">
                <img src="/img/logo.svg" alt="Javalin">
            </a>
            <ul>
                <li><a href="/documentation">Docs</a></li>
                <li><a href="/tutorials">Tutorials</a></li>
                <li><a href="/plugins">Plugins</a></li>
                <li><a href="/community">Community</a></li>
            </ul>
        </nav>
    </header>
    <main class="width-limit">
        <article class="tutorial" itemscope itemtype="http://schema.org/BlogPosting">
    <div class="tutorial-header">
        <h1 class="no-margin-top" itemprop="name headline">Using Javalin with Kotlin to create a simple CRUD REST API</h1>
        <p class="notification">
            <time datetime="2017-05-25T00:00:00+00:00" itemprop="datePublished">May 25, 2017</time>
             
                ‚Ä¢ Written by <span itemprop="author" itemscope itemtype="http://schema.org/Person"><span itemprop="name"><a href="https://www.linkedin.com/in/davidaase" target="_blank">David √Öse</a></span></span>
            
            <span id="timeToRead">Reading time: <b>0-0 min</b></span>
             
            <br>
            <em class="github-link">
                The source code for this tutorial can be found on 
                <a href="https://github.com/javalin/javalin-samples/tree/main/javalin5/javalin-kotlin-example" target="_blank">GitHub</a>.
                Please fork/clone and look while you read.
            </em>
            
        </p>
        
    </div>
    <div class="post-content" itemprop="articleBody">
        <h2 id="what-you-will-learn">What You Will Learn</h2>

<ul>
  <li>Setting up Kotlin with Maven</li>
  <li>Creating a Javalin/Kotlin CRUD REST API (no database)</li>
  <li>Some neat Kotlin features (from a Java developer‚Äôs perspective)</li>
</ul>

<p>The instructions for this tutorial will focus on IntelliJ IDEA,
as it‚Äôs made by JetBrains, the same people who make Kotlin.
We recommend downloading the free <a href="https://www.jetbrains.com/idea/download">community edition</a>
of IDEA while following this tutorial, but there is also Kotlin support in Eclipse.</p>

<h2 id="setting-up-kotlin-with-maven-in-intellij-idea">Setting up Kotlin with Maven (in IntelliJ IDEA)</h2>

<p>The good people over at <a href="https://www.jetbrains.com">JetBrains</a> have an up-to-date
<a href="https://maven.apache.org/guides/introduction/introduction-to-archetypes.html">archetype</a>
for Kotlin. To use it, do as follows:</p>

<ul>
  <li><code class="language-plaintext highlighter-rouge">File</code> <code class="language-plaintext highlighter-rouge">-&gt;</code> <code class="language-plaintext highlighter-rouge">New</code> <code class="language-plaintext highlighter-rouge">-&gt;</code> <code class="language-plaintext highlighter-rouge">Project</code></li>
  <li><code class="language-plaintext highlighter-rouge">Maven</code> <code class="language-plaintext highlighter-rouge">-&gt;</code> <code class="language-plaintext highlighter-rouge">Create from archetype</code> <code class="language-plaintext highlighter-rouge">-&gt;</code> <code class="language-plaintext highlighter-rouge">org.jetbrains.kotlin:kotlin-archetype-jvm</code> <code class="language-plaintext highlighter-rouge">-&gt;</code> <code class="language-plaintext highlighter-rouge">Next</code></li>
  <li>Follow the instructions and pick a project name</li>
  <li>Create <code class="language-plaintext highlighter-rouge">src/main/kotlin/app/Main.kt</code></li>
</ul>

<p>There is no <code class="language-plaintext highlighter-rouge">public static void main(String[] args)</code> in Kotlin,
instead you have a <code class="language-plaintext highlighter-rouge">fun main(args: Array&lt;String&gt;)</code>.</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">fun</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span> <span class="c1">// can omit args</span>
    <span class="nf">println</span><span class="p">(</span><span class="s">"Hello, world!"</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>

<div class="comment">
You'll have to point to the file (not class) containing this main function (not method)
from your pom.xml if you want to build a jar. Doing this is not necessary for this tutorial,
but the code on GitHub demonstrates how to do it for those interested.
</div>

<h2 id="using-javalin-with-kotlin">Using Javalin with Kotlin</h2>

<p>Add the dependency:</p>

<div class="multitab-code dependencies" data-tab="1">
<ul>
    <li data-tab="1">Maven</li>
    <li data-tab="2">Gradle</li>
    <li data-tab="3">SBT</li>
    <li data-tab="4">Grape</li>
    <li data-tab="5">Leiningen</li>
    <li data-tab="6">Buildr</li>
    <li data-tab="7">Ivy</li>
</ul>

<div data-tab="1">
    <pre><code class="language-markup">&lt;dependency&gt;
    &lt;groupId&gt;io.javalin&lt;/groupId&gt;
    &lt;artifactId&gt;javalin&lt;/artifactId&gt;
    &lt;version&gt;5.0.1&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>
    <p>Not familiar with Maven? Read our <a href="/tutorials/maven-setup">Maven tutorial</a>.</p>
  </div>

<div data-tab="2">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">implementation</span><span class="o">(</span><span class="s">"io.javalin:javalin:5.0.1"</span><span class="o">)</span>
</code></pre></div>    </div>
    <p>Not familiar with Gradle? Read our <a href="/tutorials/gradle-setup">Gradle tutorial</a>.</p>
  </div>

<div data-tab="3">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">libraryDependencies</span> <span class="o">+=</span> <span class="s">"io.javalin"</span> <span class="o">%</span> <span class="s">"javalin"</span> <span class="o">%</span> <span class="s">"5.0.1"</span>
</code></pre></div>    </div>
  </div>

<div data-tab="4">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Grab</span><span class="o">(</span><span class="n">group</span><span class="o">=</span><span class="err">'</span><span class="n">io</span><span class="o">.</span><span class="na">javalin</span><span class="err">'</span><span class="o">,</span> <span class="n">module</span><span class="o">=</span><span class="err">'</span><span class="n">javalin</span><span class="err">'</span><span class="o">,</span> <span class="n">version</span><span class="o">=</span><span class="err">'</span><span class="mf">5.0</span><span class="o">.</span><span class="mi">1</span><span class="err">'</span><span class="o">)</span>
</code></pre></div>    </div>
  </div>

<div data-tab="5">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">[</span><span class="n">io</span><span class="o">.</span><span class="na">javalin</span><span class="o">/</span><span class="n">javalin</span> <span class="s">"5.0.1"</span><span class="o">]</span>
</code></pre></div>    </div>
  </div>

<div data-tab="6">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="err">'</span><span class="n">io</span><span class="o">.</span><span class="na">javalin</span><span class="o">:</span><span class="nl">javalin:jar:</span><span class="mf">5.0</span><span class="o">.</span><span class="mi">1</span><span class="err">'</span>
</code></pre></div>    </div>
  </div>

<div data-tab="7">
    <pre><code class="language-markup">&lt;dependency org="io.javalin" name="javalin" rev="5.0.1" /&gt;
</code></pre>
  </div>
</div>

<div class="bundle-hint">
  <p>If you want Javalin with testing tools, Jackson and Logback,
you can use the artifact id <code class="language-plaintext highlighter-rouge">javalin-bundle</code> instead of <code class="language-plaintext highlighter-rouge">javalin</code>.</p>
</div>
<style>
.bundle-hint p {
    margin-top: 8px;
    font-size: 14px;
}
</style>

<p>And paste the ‚ÄúHello world‚Äù example:</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nn">io.javalin.Javalin</span>

<span class="k">fun</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">val</span> <span class="py">app</span> <span class="p">=</span> <span class="nc">Javalin</span><span class="p">.</span><span class="nf">create</span><span class="p">().</span><span class="nf">start</span><span class="p">(</span><span class="mi">7070</span><span class="p">)</span>
    <span class="n">app</span><span class="p">.</span><span class="k">get</span><span class="p">(</span><span class="s">"/"</span><span class="p">)</span> <span class="p">{</span> <span class="n">ctx</span> <span class="p">-&gt;</span> <span class="n">ctx</span><span class="p">.</span><span class="nf">result</span><span class="p">(</span><span class="s">"Hello World"</span><span class="p">)</span> <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>It looks pretty similar to Java8:
<br />
Java8: <code class="language-plaintext highlighter-rouge">get("/path", ctx -&gt; { ... });</code>
<br />
Kotlin: <code class="language-plaintext highlighter-rouge">get("/path") { ctx -&gt; ...}</code>.</p>

<p>The syntax <code class="language-plaintext highlighter-rouge">(){}</code> might look a little strange to Java programmers.
Kotlin supports <a href="https://kotlinlang.org/docs/reference/lambdas.html#closures">trailing closures</a>
and provides <a href="https://kotlinlang.org/docs/reference/grammar.html#semicolons">semicolon inference</a>.
Simplified, this means you don‚Äôt have to wrap closures in parentheses and end statements with semicolons.</p>

<h2 id="creating-a-javalinkotlin-crud-microservice">Creating a Javalin/Kotlin CRUD microservice</h2>

<h3 id="kotlin-data-classes">Kotlin data-classes</h3>

<p>Kotlin has a really neat feature called
<a href="https://kotlinlang.org/docs/reference/data-classes.html">Data classes</a>.
To create a data class you just have to write:</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">data class</span> <span class="nc">User</span><span class="p">(</span><span class="kd">val</span> <span class="py">name</span><span class="p">:</span> <span class="nc">String</span><span class="p">,</span> <span class="kd">val</span> <span class="py">email</span><span class="p">:</span> <span class="nc">String</span><span class="p">,</span> <span class="kd">val</span> <span class="py">id</span><span class="p">:</span> <span class="nc">Int</span><span class="p">)</span>
</code></pre></div></div>

<p>‚Ä¶ and you‚Äôre done! If you declare all parameters as <code class="language-plaintext highlighter-rouge">val</code> you get an immutable class similar to the
<a href="https://projectlombok.org/features/Value.html">Lombok @Value</a> annotation, only better.
Regardless of if you use <code class="language-plaintext highlighter-rouge">var</code> or <code class="language-plaintext highlighter-rouge">val</code> (or a mix) for your data class,
you get toString, hashCode/equals, copying and destructuring included:</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">val</span> <span class="py">alice</span> <span class="p">=</span> <span class="nc">User</span><span class="p">(</span><span class="n">name</span> <span class="p">=</span> <span class="s">"Alice"</span><span class="p">,</span> <span class="n">email</span> <span class="p">=</span> <span class="s">"alice@alice.kt"</span><span class="p">,</span> <span class="n">id</span> <span class="p">=</span> <span class="mi">0</span><span class="p">)</span>
<span class="kd">val</span> <span class="py">aliceNewEmail</span> <span class="p">=</span> <span class="n">alice</span><span class="p">.</span><span class="nf">copy</span><span class="p">(</span><span class="n">email</span> <span class="p">=</span> <span class="s">"alice@bob.kt"</span><span class="p">)</span> <span class="c1">// new object with only email changed</span>

<span class="kd">val</span> <span class="p">(</span><span class="py">name</span><span class="p">,</span> <span class="py">email</span><span class="p">)</span> <span class="p">=</span> <span class="n">aliceNewEmail</span> <span class="c1">// choose the fields you want</span>
<span class="nf">println</span><span class="p">(</span><span class="s">"$name's new email is $email"</span><span class="p">)</span> <span class="c1">// prints "Alice's new email is alice@bob.kt"</span>
</code></pre></div></div>

<h3 id="initializing-some-data">Initializing some data</h3>
<p>Let‚Äôs initialize our fake user-database with four users:</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">val</span> <span class="py">users</span> <span class="p">=</span> <span class="nf">mapOf</span><span class="p">(</span>
    <span class="mi">0</span> <span class="n">to</span> <span class="nc">User</span><span class="p">(</span><span class="n">name</span> <span class="p">=</span> <span class="s">"Alice"</span><span class="p">,</span> <span class="n">email</span> <span class="p">=</span> <span class="s">"alice@alice.kt"</span><span class="p">,</span> <span class="n">id</span> <span class="p">=</span> <span class="mi">0</span><span class="p">),</span>
    <span class="mi">1</span> <span class="n">to</span> <span class="nc">User</span><span class="p">(</span><span class="n">name</span> <span class="p">=</span> <span class="s">"Bob"</span><span class="p">,</span> <span class="n">email</span> <span class="p">=</span> <span class="s">"bob@bob.kt"</span><span class="p">,</span> <span class="n">id</span> <span class="p">=</span> <span class="mi">1</span><span class="p">),</span>
    <span class="mi">2</span> <span class="n">to</span> <span class="nc">User</span><span class="p">(</span><span class="n">name</span> <span class="p">=</span> <span class="s">"Carol"</span><span class="p">,</span> <span class="n">email</span> <span class="p">=</span> <span class="s">"carol@carol.kt"</span><span class="p">,</span> <span class="n">id</span> <span class="p">=</span> <span class="mi">2</span><span class="p">),</span>
    <span class="mi">3</span> <span class="n">to</span> <span class="nc">User</span><span class="p">(</span><span class="n">name</span> <span class="p">=</span> <span class="s">"Dave"</span><span class="p">,</span> <span class="n">email</span> <span class="p">=</span> <span class="s">"dave@dave.kt"</span><span class="p">,</span> <span class="n">id</span> <span class="p">=</span> <span class="mi">3</span><span class="p">)</span>
<span class="p">)</span>
</code></pre></div></div>

<p>Kotlin has type inference and named parameters (we could have written our arguments in any order).
It also has a nice standard library providing map-literal-like functions.</p>

<h3 id="creating-a-data-access-object">Creating a data access object</h3>
<p>We need to be able to read out data somehow, so let‚Äôs set up some
basic CRUD functionality, with one added function for finding user by email:</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nn">java.util.concurrent.atomic.AtomicInteger</span>

<span class="kd">class</span> <span class="nc">UserDao</span> <span class="p">{</span>

    <span class="c1">// "Initialize" with a few users</span>
    <span class="c1">// This demonstrates type inference, map-literals and named parameters</span>
    <span class="kd">val</span> <span class="py">users</span> <span class="p">=</span> <span class="nf">hashMapOf</span><span class="p">(</span>
            <span class="mi">0</span> <span class="n">to</span> <span class="nc">User</span><span class="p">(</span><span class="n">name</span> <span class="p">=</span> <span class="s">"Alice"</span><span class="p">,</span> <span class="n">email</span> <span class="p">=</span> <span class="s">"alice@alice.kt"</span><span class="p">,</span> <span class="n">id</span> <span class="p">=</span> <span class="mi">0</span><span class="p">),</span>
            <span class="mi">1</span> <span class="n">to</span> <span class="nc">User</span><span class="p">(</span><span class="n">name</span> <span class="p">=</span> <span class="s">"Bob"</span><span class="p">,</span> <span class="n">email</span> <span class="p">=</span> <span class="s">"bob@bob.kt"</span><span class="p">,</span> <span class="n">id</span> <span class="p">=</span> <span class="mi">1</span><span class="p">),</span>
            <span class="mi">2</span> <span class="n">to</span> <span class="nc">User</span><span class="p">(</span><span class="n">name</span> <span class="p">=</span> <span class="s">"Carol"</span><span class="p">,</span> <span class="n">email</span> <span class="p">=</span> <span class="s">"carol@carol.kt"</span><span class="p">,</span> <span class="n">id</span> <span class="p">=</span> <span class="mi">2</span><span class="p">),</span>
            <span class="mi">3</span> <span class="n">to</span> <span class="nc">User</span><span class="p">(</span><span class="n">name</span> <span class="p">=</span> <span class="s">"Dave"</span><span class="p">,</span> <span class="n">email</span> <span class="p">=</span> <span class="s">"dave@dave.kt"</span><span class="p">,</span> <span class="n">id</span> <span class="p">=</span> <span class="mi">3</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="kd">var</span> <span class="py">lastId</span><span class="p">:</span> <span class="nc">AtomicInteger</span> <span class="p">=</span> <span class="nc">AtomicInteger</span><span class="p">(</span><span class="n">users</span><span class="p">.</span><span class="n">size</span> <span class="p">-</span> <span class="mi">1</span><span class="p">)</span>

    <span class="k">fun</span> <span class="nf">save</span><span class="p">(</span><span class="n">name</span><span class="p">:</span> <span class="nc">String</span><span class="p">,</span> <span class="n">email</span><span class="p">:</span> <span class="nc">String</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">val</span> <span class="py">id</span> <span class="p">=</span> <span class="n">lastId</span><span class="p">.</span><span class="nf">incrementAndGet</span><span class="p">()</span>
        <span class="n">users</span><span class="p">[</span><span class="n">id</span><span class="p">]</span> <span class="p">=</span> <span class="nc">User</span><span class="p">(</span><span class="n">name</span> <span class="p">=</span> <span class="n">name</span><span class="p">,</span> <span class="n">email</span> <span class="p">=</span> <span class="n">email</span><span class="p">,</span> <span class="n">id</span> <span class="p">=</span> <span class="n">id</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="k">fun</span> <span class="nf">findById</span><span class="p">(</span><span class="n">id</span><span class="p">:</span> <span class="nc">Int</span><span class="p">):</span> <span class="nc">User</span><span class="p">?</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">users</span><span class="p">[</span><span class="n">id</span><span class="p">]</span>
    <span class="p">}</span>

    <span class="k">fun</span> <span class="nf">findByEmail</span><span class="p">(</span><span class="n">email</span><span class="p">:</span> <span class="nc">String</span><span class="p">):</span> <span class="nc">User</span><span class="p">?</span> <span class="p">{</span>
        <span class="k">return</span> <span class="n">users</span><span class="p">.</span><span class="n">values</span><span class="p">.</span><span class="nf">find</span> <span class="p">{</span> <span class="n">it</span><span class="p">.</span><span class="n">email</span> <span class="p">==</span> <span class="n">email</span> <span class="p">}</span> <span class="c1">// == is equivalent to java .equals() (referential equality is checked by ===)</span>
    <span class="p">}</span>

    <span class="k">fun</span> <span class="nf">update</span><span class="p">(</span><span class="n">id</span><span class="p">:</span> <span class="nc">Int</span><span class="p">,</span> <span class="n">user</span><span class="p">:</span> <span class="nc">User</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">users</span><span class="p">[</span><span class="n">id</span><span class="p">]</span> <span class="p">=</span> <span class="nc">User</span><span class="p">(</span><span class="n">name</span> <span class="p">=</span> <span class="n">user</span><span class="p">.</span><span class="n">name</span><span class="p">,</span> <span class="n">email</span> <span class="p">=</span> <span class="n">user</span><span class="p">.</span><span class="n">email</span><span class="p">,</span> <span class="n">id</span> <span class="p">=</span> <span class="n">id</span><span class="p">)</span>
    <span class="p">}</span>

    <span class="k">fun</span> <span class="nf">delete</span><span class="p">(</span><span class="n">id</span><span class="p">:</span> <span class="nc">Int</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">users</span><span class="p">.</span><span class="nf">remove</span><span class="p">(</span><span class="n">id</span><span class="p">)</span>
    <span class="p">}</span>

<span class="p">}</span>
</code></pre></div></div>

<p>The <code class="language-plaintext highlighter-rouge">findByEmail</code> function shows of some neat features. In addition to the
trailing closures that we saw earlier, Kotlin also has a very practical <code class="language-plaintext highlighter-rouge">find</code> function
and a special <code class="language-plaintext highlighter-rouge">it</code> keyword, which replaces <code class="language-plaintext highlighter-rouge">user -&gt; user</code> style declarations with just <code class="language-plaintext highlighter-rouge">it</code>
(<a href="https://kotlinlang.org/docs/reference/lambdas.html#it-implicit-name-of-a-single-parameter">docs</a>).
The function also demonstrates that <code class="language-plaintext highlighter-rouge">==</code> is the structural equality operator for Strings in Kotlin
(equivalent to <code class="language-plaintext highlighter-rouge">.equals()</code> in Java). If you want to check for referential equality in Kotlin you can use <code class="language-plaintext highlighter-rouge">===</code>.
Another thing worth noticing is that the find-functions return <code class="language-plaintext highlighter-rouge">User?</code>, which means the function will
return either a <code class="language-plaintext highlighter-rouge">User</code> or <code class="language-plaintext highlighter-rouge">null</code>. In Kotlin you have to specify the possibility of a null-return.</p>

<p><code class="language-plaintext highlighter-rouge">findByEmail()</code>, Kotlin vs Java:</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Kotlin</span>
<span class="k">fun</span> <span class="nf">findByEmail</span><span class="p">(</span><span class="n">email</span><span class="p">:</span> <span class="nc">String</span><span class="p">):</span> <span class="nc">User</span><span class="p">?</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">users</span><span class="p">.</span><span class="n">values</span><span class="p">.</span><span class="nf">find</span> <span class="p">{</span> <span class="n">it</span><span class="p">.</span><span class="n">email</span> <span class="p">==</span> <span class="n">email</span> <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// Java</span>
<span class="k">public</span> <span class="nc">User</span> <span class="nf">findByEmail</span><span class="p">(</span><span class="nc">String</span> <span class="n">email</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">return</span> <span class="n">users</span><span class="p">.</span><span class="nf">values</span><span class="p">().</span><span class="nf">stream</span><span class="p">()</span>
            <span class="p">.</span><span class="nf">filter</span><span class="p">(</span><span class="n">user</span> <span class="p">-&gt;</span> <span class="n">user</span><span class="p">.</span><span class="nf">getEmail</span><span class="p">().</span><span class="nf">equals</span><span class="p">(</span><span class="n">email</span><span class="p">))</span>
            <span class="p">.</span><span class="nf">findFirst</span><span class="p">()</span>
            <span class="p">.</span><span class="nf">orElse</span><span class="p">(</span><span class="k">null</span><span class="p">);</span>
<span class="p">}</span>
</code></pre></div></div>

<h3 id="creating-the-rest-api">Creating the REST API</h3>

<p>Kotlin and Javalin play very well together (in fact, Kotlin seems to play well with all Java dependencies).</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nn">app.user.User</span>
<span class="k">import</span> <span class="nn">app.user.UserDao</span>
<span class="k">import</span> <span class="nn">io.javalin.apibuilder.ApiBuilder.*</span>
<span class="k">import</span> <span class="nn">io.javalin.Javalin</span>
<span class="k">import</span> <span class="nn">io.javalin.http.HttpStatus</span>
<span class="k">import</span> <span class="nn">io.javalin.http.bodyAsClass</span>

<span class="k">fun</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>

    <span class="kd">val</span> <span class="py">userDao</span> <span class="p">=</span> <span class="nc">UserDao</span><span class="p">()</span>

    <span class="kd">val</span> <span class="py">app</span> <span class="p">=</span> <span class="nc">Javalin</span><span class="p">.</span><span class="nf">create</span><span class="p">().</span><span class="nf">apply</span> <span class="p">{</span>
        <span class="nf">exception</span><span class="p">(</span><span class="nc">Exception</span><span class="o">::</span><span class="k">class</span><span class="p">.</span><span class="n">java</span><span class="p">)</span> <span class="p">{</span> <span class="n">e</span><span class="p">,</span> <span class="n">ctx</span> <span class="p">-&gt;</span> <span class="n">e</span><span class="p">.</span><span class="nf">printStackTrace</span><span class="p">()</span> <span class="p">}</span>
        <span class="nf">error</span><span class="p">(</span><span class="nc">HttpStatus</span><span class="p">.</span><span class="nc">NOT_FOUND</span><span class="p">)</span> <span class="p">{</span> <span class="n">ctx</span> <span class="p">-&gt;</span> <span class="n">ctx</span><span class="p">.</span><span class="nf">json</span><span class="p">(</span><span class="s">"not found"</span><span class="p">)</span> <span class="p">}</span>
    <span class="p">}.</span><span class="nf">start</span><span class="p">(</span><span class="mi">7070</span><span class="p">)</span>

    <span class="n">app</span><span class="p">.</span><span class="nf">routes</span> <span class="p">{</span>

        <span class="c1">// this redirect shouldn't be here, but readers have complained about the 404 for the root path</span>
        <span class="k">get</span><span class="p">(</span><span class="s">"/"</span><span class="p">)</span> <span class="p">{</span> <span class="n">it</span><span class="p">.</span><span class="nf">redirect</span><span class="p">(</span><span class="s">"/users"</span><span class="p">)</span> <span class="p">}</span>

        <span class="k">get</span><span class="p">(</span><span class="s">"/users"</span><span class="p">)</span> <span class="p">{</span> <span class="n">ctx</span> <span class="p">-&gt;</span>
            <span class="n">ctx</span><span class="p">.</span><span class="nf">json</span><span class="p">(</span><span class="n">userDao</span><span class="p">.</span><span class="n">users</span><span class="p">)</span>
        <span class="p">}</span>

        <span class="k">get</span><span class="p">(</span><span class="s">"/users/{user-id}"</span><span class="p">)</span> <span class="p">{</span> <span class="n">ctx</span> <span class="p">-&gt;</span>
            <span class="n">ctx</span><span class="p">.</span><span class="nf">json</span><span class="p">(</span><span class="n">userDao</span><span class="p">.</span><span class="nf">findById</span><span class="p">(</span><span class="n">ctx</span><span class="p">.</span><span class="nf">pathParam</span><span class="p">(</span><span class="s">"user-id"</span><span class="p">).</span><span class="nf">toInt</span><span class="p">())</span><span class="o">!!</span><span class="p">)</span>
        <span class="p">}</span>

        <span class="k">get</span><span class="p">(</span><span class="s">"/users/email/{email}"</span><span class="p">)</span> <span class="p">{</span> <span class="n">ctx</span> <span class="p">-&gt;</span>
            <span class="n">ctx</span><span class="p">.</span><span class="nf">json</span><span class="p">(</span><span class="n">userDao</span><span class="p">.</span><span class="nf">findByEmail</span><span class="p">(</span><span class="n">ctx</span><span class="p">.</span><span class="nf">pathParam</span><span class="p">(</span><span class="s">"email"</span><span class="p">))</span><span class="o">!!</span><span class="p">)</span>
        <span class="p">}</span>

        <span class="nf">post</span><span class="p">(</span><span class="s">"/users"</span><span class="p">)</span> <span class="p">{</span> <span class="n">ctx</span> <span class="p">-&gt;</span>
            <span class="kd">val</span> <span class="py">user</span> <span class="p">=</span> <span class="n">ctx</span><span class="p">.</span><span class="n">bodyAsClass</span><span class="p">&lt;</span><span class="nc">User</span><span class="p">&gt;()</span>
            <span class="n">userDao</span><span class="p">.</span><span class="nf">save</span><span class="p">(</span><span class="n">name</span> <span class="p">=</span> <span class="n">user</span><span class="p">.</span><span class="n">name</span><span class="p">,</span> <span class="n">email</span> <span class="p">=</span> <span class="n">user</span><span class="p">.</span><span class="n">email</span><span class="p">)</span>
            <span class="n">ctx</span><span class="p">.</span><span class="nf">status</span><span class="p">(</span><span class="mi">201</span><span class="p">)</span>
        <span class="p">}</span>

        <span class="nf">patch</span><span class="p">(</span><span class="s">"/users/{user-id}"</span><span class="p">)</span> <span class="p">{</span> <span class="n">ctx</span> <span class="p">-&gt;</span>
            <span class="kd">val</span> <span class="py">user</span> <span class="p">=</span> <span class="n">ctx</span><span class="p">.</span><span class="n">bodyAsClass</span><span class="p">&lt;</span><span class="nc">User</span><span class="p">&gt;()</span>
            <span class="n">userDao</span><span class="p">.</span><span class="nf">update</span><span class="p">(</span>
                    <span class="n">id</span> <span class="p">=</span> <span class="n">ctx</span><span class="p">.</span><span class="nf">pathParam</span><span class="p">(</span><span class="s">"user-id"</span><span class="p">).</span><span class="nf">toInt</span><span class="p">(),</span>
                    <span class="n">user</span> <span class="p">=</span> <span class="n">user</span>
            <span class="p">)</span>
            <span class="n">ctx</span><span class="p">.</span><span class="nf">status</span><span class="p">(</span><span class="mi">204</span><span class="p">)</span>
        <span class="p">}</span>

        <span class="nf">delete</span><span class="p">(</span><span class="s">"/users/{user-id}"</span><span class="p">)</span> <span class="p">{</span> <span class="n">ctx</span> <span class="p">-&gt;</span>
            <span class="n">userDao</span><span class="p">.</span><span class="nf">delete</span><span class="p">(</span><span class="n">ctx</span><span class="p">.</span><span class="nf">pathParam</span><span class="p">(</span><span class="s">"user-id"</span><span class="p">).</span><span class="nf">toInt</span><span class="p">())</span>
            <span class="n">ctx</span><span class="p">.</span><span class="nf">status</span><span class="p">(</span><span class="mi">204</span><span class="p">)</span>
        <span class="p">}</span>

    <span class="p">}</span>

<span class="p">}</span>
</code></pre></div></div>

<h2 id="conclusion">Conclusion</h2>
<p>I had only worked with Kotlin for a few hours before writing this tutorial,
but I‚Äôm already a very big fan of the language. Everything just seems to make sense, and the interoperability with Java is great.
IntelliJ will also automatically convert Java code into Kotlin if you paste it into your project.
Please clone the repo and give it a try!</p>

    </div>
    <h3>Thanks for reading</h3>
    If you find any errors, please <a href="https://github.com/javalin/javalin.github.io/blob/master/_posts/tutorials/2017-05-25-javalin-kotlin-example.md">edit this page on GitHub</a>.
    <br>
    
        The full source code for this tutorial can also be found on <a href="https://github.com/javalin/javalin-samples/tree/main/javalin5/javalin-kotlin-example">GitHub</a>.
    
</article>
<style>
    .social {
        margin: 30px 0;
        display: flex;
    }
    .social-btn {
        text-align: center;
        min-width: 240px;
        padding: 10px 16px 8px;
        font-size: 14px;
        font-family: 'Roboto Slab', sans-serif;
        font-weight: 600;
        color: #fff;
        background: #000;
        border-radius: 50px;
        box-shadow: 2px 2px red, -2px -2px cyan;
    }
    .social-btn + .social-btn {
        margin-left: 24px;
    }
    .social-btn:hover {
        background: #008ab4;
    }
    .social-btn img {
        width: 24px;
        display: inline;
        vertical-align: middle;
        margin-right: 12px;
    }
    @media (max-width: 480px) {
        .social {
            justify-content: space-between;
        }
        .social-btn {
            min-width: 0;
            width: calc(50% - 12px);
            text-align: left;
            display: flex;
            align-items: center;
        }
        .social-btn + .social-btn {
            margin-left: 0;
        }
    }
</style>
<div class="social">
    <a class="social-btn" href="https://twitter.com/intent/tweet?text=Using Javalin with Kotlin to create a simple CRUD REST API&url=https://zugazagoitia.github.io/tutorials/simple-kotlin-example&via=javalin_io&related=javalin_io"
       rel="nofollow"
       title="Share on Twitter">
        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAAM1BMVEUAAAD///////////////////////////////////////////////////////////////+3leKCAAAAEHRSTlMA8BDQwKCAMOBwYECwUCCQ27fl2AAAAW1JREFUWMPtltuOwyAMRLG5QxL8/1+7G6lKFApMaJ5W2/NIPCPAnlL15R+xRSM7ZPMnci5yYvxrNRt3VMRtpPdBLqR9MWkhPkpI80BPUpFy2dfiUbKK9B02kjbmrCkycNAdfeCqpuOQOnrye2teRS9LrxqEjn4tQSS/io7Fxg1Kn/MWjxX7dgw30NvGNkO9CQP1O8v7oGEDq07i9Uu+YxAvs1J91GmDBtdQLVKjYz6/YINNWujiVgsMet3CqAr7yICKn3XQF4N9gizJDAsIDMSBLkIyyDzkmjqmWb0GoYUUBVKLWFUF6yk9gccDYtU7bKabWBNv9yKoDunmTcSW2Im+uwNi1cBP5+DjUSAGrzgiVcLZSBmlHjnQBv7L4AOMYEdwiAGcFgK/A5BN9/WsMCs90nsjT/SrGd0fI3UJIIIdovtlAUnWftA5KwiKakg2Y7ljfPn9tzWkUw5GsHV059UEOVpDR2wXl1l9+RP8AHA4c7ljId3mAAAAAElFTkSuQmCC">Share on Twitter
    </a>
    <a class="social-btn" href="https://facebook.com/sharer.php?u=https://zugazagoitia.github.io/tutorials/simple-kotlin-example"
       rel="nofollow"
       title="Share on Facebook">
        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABABAMAAABYR2ztAAAAMFBMVEUAAAD///////////////////////////////////////////////////////////87TQQwAAAAD3RSTlMAwIDwEEDgMKBgINBwUJA4su2wAAAAy0lEQVRIx2MYJICr+T9WkOQAVTD/Pw5gDpHn/I8TXAAriMetwAqsQB63gh9gBf/xgAFT8E0QCPJxK/ixACTqj1PB5wCwKD9OBbsY8Cv4XEBAwU8GAgoECCmYABTB5QuEUI2S0n4cCn6DRBzxhORHkMh5Qgr0h7eCjw6I/BiPTcEnBgRgxKbgK5ICPkIKmGij4C+yIwn5gg2bgm9ICuIHa2SNKqCZgs9gBf2YClBTkDNuBSlgBeyYCtDKzGJcCtKhyY+lH7sCIweGwQEAY2jNUu1+zZgAAAAASUVORK5CYII=">Share on Facebook
    </a>
</div>


    </main>
    <footer>
        Javalin is a Java and Kotlin web framework, open sourced under the
        <a href="https://tldrlegal.com/license/apache-license-2.0-(apache-2.0)">Apache 2</a> license
        | <a href="/download">Download</a>
        | <a href="/about">About</a>
        | <a href="/news">News</a>
        | <a href="/about#contact">Contact</a>
        | <a href="/for-educators">For educators</a>
    </footer>
    <div id="star-begging">
    <style>
        #star-begging {
            transition: transform .25s;
            transform: scale(0);
            border-radius: 8px;
            position: fixed;
            bottom: 32px;
            right: 32px;
            padding: 20px 40px 16px 20px;
            background: #fff;
            box-shadow: 0 1px 20px rgba(0, 0, 0, 0.15);
            z-index: 9999998;
        }
        #star-begging.in {
            transform: scale(1);
        }
        #star-begging.out {
            transform: translateX(400px);
        }
        #star-begging p {
            font-size: 16px;
            margin: 0 0 15px;
        }
        #star-begging .close {
            position: absolute;
            right: 20px;
            top: 20px;
            height: 40px;
            width: 40px;
            line-height: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            font-family: arial, sans-serif;
            cursor: pointer;
            background: rgba(0, 0, 0, 0.05);
            border-radius: 5px;
        }
    </style>
    <p>
        Like Javalin?
        <br>Star us üòä
    </p>
    <span class="close">√ó</span>
    <iframe id="starFrame" class="githubStar" title="github-stars"
            src="https://ghbtns.com/github-btn.html?user=javalin&amp;repo=javalin&amp;type=star&amp;count=true&size=large"
            frameborder="0" scrolling="0" width="150px" height="30px">
    </iframe>
    <script>
        if (localStorage.getItem("dismissed") !== "true" && document.getElementById("notification-banner") === null) {
            setTimeout(function () {
                document.querySelector("#star-begging").classList.add("in");
            }, 15000);
            document.querySelector("#star-begging .close").addEventListener("click", function () {
                document.querySelector("#star-begging").classList.add("out");
                localStorage.setItem("dismissed", "true");
            });
        }
    </script>
</div>

    <script src="/js/scripts.js"></script>
</body>
</html>
