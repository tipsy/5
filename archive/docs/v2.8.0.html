<!DOCTYPE html>
<html lang="en">
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-54137818-11"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-54137818-11', {'anonymize_ip': true});
</script>
    <meta charset="utf-8">
    <link href="https://fonts.googleapis.com/css?family=Oxygen+Mono|Roboto+Slab:500,700&display=swap" rel="stylesheet">
    <meta property="og:title" content="Archive - v2 documentation - Javalin - A lightweight Java and Kotlin web framework. Create REST APIs in Java or Kotlin easily.">
    <meta property="og:site_name" content="Javalin">
    <meta property="og:url" content="https://javalin.io">
    <meta property="og:description" content="Javalin - A lightweight Java and Kotlin web framework. Create REST APIs in Java or Kotlin easily.">
    <meta property="og:image" content="https://javalin.io/img/javalin.png">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="google-site-verification" content="liMtSlffOZROWLqoiOZdSx-luH9_Siq5-Ot6xqHZwq8">
    <title>
        Archive - v2 documentation - Javalin - A lightweight Java and Kotlin web framework
    </title>
    <meta name="description" content="Javalin - A lightweight Java and Kotlin web framework. Create REST APIs in Java or Kotlin easily.">
    <link rel="canonical" href="https://zugazagoitia.github.io/archive/docs/v2.8.0.html">
    <link rel="shortcut icon" type="image/png" href="/img/favicon.png">
    <link rel="stylesheet" href="/css/main.css">
    <style>/* Styles that affect the length of the document */
p code,
li code {
    font-size: 90%;
    letter-spacing: -0.5px;
    border: 1px solid #ccd;
    background: #f5f5f7;
    padding: 1px 3px;
}

.multitab-code pre {
    margin-top: 0;
    border-radius: 0 0 5px 5px;
}

.multitab-code div[data-tab] {
    display: none;
}

:target {
    scroll-margin-top: 108px;
}

.anchorjs-link {
    transition: all .25s linear;
  }
  
*:hover > .anchorjs-link {
    margin-left: -1.125em !important;
 }</style>
</head>
<body>
    <a id="fork-me" href="https://github.com/javalin/javalin" target="_blank">
    <img style="position:fixed;top:0;right:0;border:0;z-index:99999" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAJUAAACVCAMAAABmfEh9AAAAllBMVEUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAPEhwAAAAFBgkAAAARFR8fIiwRFB4YHCUQEx0RFB4SFiERFB8QEx3s7e4eIStPUlpKTFUvMjwOEhs8P0hfYmlXWmE5PUUZHSfd3uAnKjTAwcRnanB2eH5CRU6TlZqxs7bP0NKFh4yUlpqipKiUlpujpKiipKdzB4/DAAAAFXRSTlMAAwgBDREiKBYbL5wdQBjb3ZzclY3cWcIvAAAGZ0lEQVR42u2c3W7bMAyF02bL2q5bu7WLqDhW7Si24p902/u/3EglljxXQX1jixclsIv0QvhAHvAQZLJFF8vl1dX19afn/Ub9ej+2L5ufd6v725vPn66vr66ulsvFBOGoPj/LLJHvY8kkf/j2ZTUtlqe6ed6+JCOytX/ZPCLW/aRYnur2aZeo3QisjXogrO+TYjmq1ROqZgQWlvpxaiyisljf71dP+yQfJflk8mwtfbK+/NhnmxGSx1L/nBhraZP1ySbr7sc2O4xrEIMiTpqsu6+7zWGU5PNpi0hUfaxRkl9jqR9nxZLjJJ8d5s3W/mWU5Dfq56xY4z1x3iJuxnrinFg/xnrizJLfJZeLuMboJK9mbxDyIpPjkpvD48ySz4NQLpwnzopFY2CYqfzti7ibXfLZIQQlSoBjT1sRJL8bUgmCaiyWHwOjemKXqVIWYDwWljqmJ56h6jSVfyR+YOGJlCpbvipNhXBUbgycVfKqR3UuX0JUGNE8kcZA2VEphMLyZdIYabGieeJX74mYKyNEmiYaQCuLFdMTcy8sIUSuwWT6lYpI4SUfwRM9Vk1lbLQYYO3m90TVyxa1hgqqVEmHFdkTCaLRWQVa5rrAdMla+WzNPwYeXLaUBihyVBfUUhaAVh1zDNx1yZJllpLk20IWzqjjeaJXfK5J8ghVuQYRzxNdtpoOKt0674kjeVqNdFjqBAUatLJUMT3x0GtbCFXAqymVK2GkMZA80WH9gaqFLbVSGwxWI1ZbRhSFEAGsaKsRy7GFVlgsZT8yWI1YqkKtiUrpo+sPzhPjrEYsFv4jKGiMw/JjYCxPpCCotoDSYnFYjVgqRV3eQNNhRfdEwtoSVK51A+2wiBsVbww0BAWZBC08VuTVCAkroXQl8DdFLD6eaMCmK9+bTLzxxIdonqgIqixpGJTRPdGNgYIknwG0GZT4kcW5gLBQ8g0UugRzVhaLMVCIFF5lAXq7tsHhXGCxdCNlUboJItYYSEXMlOvxJTRK9AabqOeCg+ywslbYSExyIovuiQRxnpuPAICDDY/VSId1hCKrQHVtnsVqZJ1AIdMSTJqc2zyL1YiBhBr9voLOfTisRkqoMg2mAizksEHk8TwRxU5QhdGwdZKPey6wA7PZViQurOW6i/irESEMQckGc+UjqidaAtEiVAGtEJ7KST6KJ67dDuLYdfrWyp7BamTdnqFkDRj2vMJgNbI2lDFKmW6zGtqe5OOcC7z7EFSxRbhae6r1PoviiV71BhpJh6iyPCk++oXMUmm0HwyB8bvlcC74dXJqZLLZSkD/3yDirUYkNGmaN3maJsJkwmJFXo2c+kPdApi0hDaV557K4FyATFAilM6roupafTRPlJ3eZXGCMgAVZuuo4nnifuM9UQmCkgWQY1fQSPpjrNWIz5Y6QVVlhVBaifieaLFKldZ01SeoPBVSRfXEXYclEqgt1On0oxHrwmrEUU05BjptQZNQprStZf/uIwee6F6bYwwsa0nly7UmKHHxWyOeap4x0ICmFg9WWvSX4DcpHdWUReydC2StTpe7WuZdkw+sRgYPTrcacZonKF2i2nOkCntij2omTxQERWovpNsmvfl1weC56TzR33wwS9S5ZFoqGrjK3hioHk5Yg9em9ESnLZUa6lwlNFIc7br5/3PB7c3gsUk90WurAWnNOq3cDrzvibfDxyYdAx1WDcZ0UKStwbngPvDcHOeCGk5QUGSOynviKvDaHGOgqBHKb2wGP6i5Cz43xwldpd3GJnAuWIRj+hO6MABJKvu58p4YemtiT/RYr0b3Tyte8oGX5pK8qAGg9WL3sV1cjum/NVKabjk5iMvPTbwa6e//IlBdWo14qAhU75wLkCkC1bs/qIlFFfZEBlSBMZADVcgTGVCFJM+A6o3kk5wDVWg1woAq4IkcqEKeyIAq4Ik7BlSBMZADVWgMZEAV8EQOVCFPZEAV8EQOVAFP5EAV8kQGVIHVCAeqt5LfSAZUAU/kQBX6JiUDqtBqhAFVwBM5UIU8kQHVW8krDlShcwEDqoAncqAaYqEncqAaYpEnMqD6D2v15QnHQA5Ufaz71eqJxsAFg/BY35HriXbIHMJhEdftM+6QWUSHRVw3+L+VLXhEh4VcGM8LJnHGQjCKBZcgLOKysWATiEXBjAqxiMvGglEsMfhRWS4bC3bBk+ojPuIjPiIc/wAQkAE6ZqHsywAAAABJRU5ErkJggg==" alt="Fork me on GitHub">
</a>
    <header class="top-nav-header">
        <nav class="width-limit">
            <a id="logo" href="/" aria-label="Javalin">
                <img src="/img/logo.svg" alt="Javalin">
            </a>
            <ul>
                <li><a href="/documentation">Docs</a></li>
                <li><a href="/tutorials">Tutorials</a></li>
                <li><a href="/plugins">Plugins</a></li>
                <li><a href="/community">Community</a></li>
            </ul>
        </nav>
    </header>
    <main class="width-limit has-right-menu">
                <script>
    const notificationId = "javalin-5-released";
    const hasBeenDismissed = localStorage.getItem(notificationId + "-dismissed") === "true";
    const pageLoadCount = parseInt(localStorage.getItem(notificationId + "-count") || 0);
    localStorage.setItem(notificationId + "-count", (pageLoadCount + 1).toString());
    if (!hasBeenDismissed && pageLoadCount >= 0) {
        document.write(`
            <div id="notification-banner">
                <h1>Javalin 5 is out!</h1>
                Javalin 5 stable is finally here!
                Read more in the <a href="/news/javalin-5.0.0-stable.html">release post</a>.
            </div>
        `);
        if (pageLoadCount >= 0) {
            document.querySelector("#notification-banner").insertAdjacentHTML("beforeend", `<span class="close">×</span>`);
            document.querySelector("#notification-banner .close").addEventListener("click", () => {
                document.querySelector("#notification-banner").style.display = "none";
                localStorage.setItem(notificationId + "-dismissed", "true");
            });
        }
    }
</script>

<style>
    #notification-banner {
        line-height: 1.5;
        position: fixed;
        bottom: 32px;
        right: 32px;
        width: 360px;
        z-index: 9999999;
        background: linear-gradient(20deg, #29292d 30%, #008cbb);
        color: white;
        box-shadow: 0 10px 20px rgba(0, 0, 0, 0.25);
        font-size: 16px;
        border-radius: 8px;
        padding: 24px;
    }

    #notification-banner h1 {
        line-height: 1;
        margin: 0 0 20px 0;
        font-family: 'Encode Sans', sans-serif;
        font-weight: 400;
        font-size: 22px;
        text-decoration: underline;
    }

    #notification-banner a {
        font-weight: 700;
        border: 1px solid white;
        padding: 1px 3px;
        background: white;
        color: #333;
        border-radius: 3px;
        margin: 0 2px;
    }

    #notification-banner .close {
        position: absolute;
        right: 14px;
        top: 14px;
        height: 40px;
        width: 40px;
        line-height: 1;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 28px;
        font-family: arial, sans-serif;
        cursor: pointer;
        background: rgba(0, 0, 0, 0.15);
        border-radius: 5px;
    }

    @media (max-width: 480px) {
        #notification-banner {
            border-radius: 0;
            width: 100%;
            right: 0;
            bottom: 0;
            font-size: 14px;
        }
    }
</style>

<div id="spy-nav" class="right-menu">
  <ul>
    <li><a href="#handlers">Handlers</a>
      <ul>
        <li><a href="#before-handlers">Before</a></li>
        <li><a href="#endpoint-handlers">Endpoint</a></li>
        <li><a href="#after-handlers">After</a></li>
      </ul>
    </li>
    <li><a href="#handler-groups">Handler groups</a></li>
    <li><a href="#context">Context (ctx)</a>
      <ul>
        <li><a href="#cookie-store">Cookie Store</a></li>
        <li><a href="#context-extensions">Extensions</a></li>
      </ul>
    </li>
    <li><a href="#validation">Validation</a></li>
    <li><a href="#access-manager">Access manager</a></li>
    <li><a href="#default-responses">Default responses</a></li>
    <li><a href="#exception-mapping">Exception Mapping</a></li>
    <li><a href="#error-mapping">Error Mapping</a></li>
    <li><a href="#websockets">WebSockets</a></li>
    <li><a href="#server-sent-events">Server-sent Events</a></li>
    <li><a href="#lifecycle-events">Lifecycle events</a></li>
    <li><a href="#server-setup">Server setup</a>
      <ul>
        <li><a href="#starting-and-stopping">Start/stop</a></li>
        <li><a href="#configuration">Configuration</a></li>
        <li><a href="#custom-server">Custom server</a></li>
        <li><a href="#sslhttp2">SSL/HTTP2</a></li>
        <li><a href="#static-files">Static Files</a></li>
      </ul>
    </li>
    <li><a href="#faq">FAQ</a></li>
  </ul>
</div>

<h1 class="no-margin-top">Documentation - Javalin 2.X</h1>

<p>This page contains documentation for an older version of Javalin.
Go to <a href="/documentation">javalin.io/documentation</a> to view documentation for the newest version.</p>

<h2 id="handlers">Handlers</h2>
<p>Javalin has three main handler types: before-handlers, endpoint-handlers, and after-handlers.
(There are also exception-handlers and error-handlers, but we’ll get to them later).
The before-, endpoint- and after-handlers require three parts:</p>

<ul>
  <li>A verb, ex: <code class="language-plaintext highlighter-rouge">before</code>, <code class="language-plaintext highlighter-rouge">get</code>, <code class="language-plaintext highlighter-rouge">post</code>, <code class="language-plaintext highlighter-rouge">put</code>, <code class="language-plaintext highlighter-rouge">delete</code>, <code class="language-plaintext highlighter-rouge">after</code></li>
  <li>A path, ex: <code class="language-plaintext highlighter-rouge">/</code>, <code class="language-plaintext highlighter-rouge">/hello-world</code></li>
  <li>A handler implementation <code class="language-plaintext highlighter-rouge">ctx -&gt; { ... }</code></li>
</ul>

<p>The <code class="language-plaintext highlighter-rouge">Handler</code> interface has a void return type. You use <code class="language-plaintext highlighter-rouge">ctx.result()</code> to set the response which will be returned to the user.</p>

<h3 id="before-handlers">Before handlers</h3>
<p>Before-handlers are matched before every request (including static files, if you enable those).</p>
<div class="comment">You might know before-handlers as filters, interceptors, or middleware from other libraries.</div>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="o">.</span><span class="na">before</span><span class="o">(</span><span class="s">"/some-path/*"</span><span class="o">,</span> <span class="n">ctx</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="c1">// runs before all request to /some-path/*</span>
<span class="o">});</span>
<span class="n">app</span><span class="o">.</span><span class="na">before</span><span class="o">(</span><span class="n">ctx</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="c1">// calls before("/*", handler)</span>
<span class="o">});</span>
</code></pre></div>    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="p">.</span><span class="nf">before</span><span class="p">(</span><span class="s">"/some-path/*"</span><span class="p">)</span> <span class="p">{</span> <span class="n">ctx</span> <span class="p">-&gt;</span>
    <span class="c1">// runs before all request to /some-path/*</span>
<span class="p">}</span>
<span class="n">app</span><span class="p">.</span><span class="nf">before</span> <span class="p">{</span> <span class="n">ctx</span> <span class="p">-&gt;</span>
    <span class="c1">// calls before("/*", handler)</span>
<span class="p">}</span>
</code></pre></div>    </div>
  </div>
</div>

<h3 id="endpoint-handlers">Endpoint handlers</h3>
<p>Endpoint-handlers are matched in the order they are defined.</p>
<div class="comment">You might know endpoint-handlers as routes or middleware from other libraries.</div>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"/"</span><span class="o">,</span> <span class="n">ctx</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="c1">// some code</span>
    <span class="n">ctx</span><span class="o">.</span><span class="na">json</span><span class="o">(</span><span class="n">object</span><span class="o">);</span>
<span class="o">});</span>

<span class="n">app</span><span class="o">.</span><span class="na">post</span><span class="o">(</span><span class="s">"/"</span><span class="o">,</span> <span class="n">ctx</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="c1">// some code</span>
    <span class="n">ctx</span><span class="o">.</span><span class="na">status</span><span class="o">(</span><span class="mi">201</span><span class="o">);</span>
<span class="o">});</span>
</code></pre></div>    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="p">.</span><span class="k">get</span><span class="p">(</span><span class="s">"/"</span><span class="p">)</span> <span class="p">{</span> <span class="n">ctx</span> <span class="p">-&gt;</span>
    <span class="c1">// some code</span>
    <span class="n">ctx</span><span class="p">.</span><span class="nf">json</span><span class="p">(</span><span class="k">object</span><span class="p">)</span>
<span class="p">}</span>

<span class="n">app</span><span class="p">.</span><span class="nf">post</span><span class="p">(</span><span class="s">"/"</span><span class="p">)</span> <span class="p">{</span> <span class="n">ctx</span> <span class="p">-&gt;</span>
    <span class="c1">// some code</span>
    <span class="n">ctx</span><span class="p">.</span><span class="nf">status</span><span class="p">(</span><span class="mi">201</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>    </div>
  </div>
</div>

<p>Handler paths can include path-parameters. These are available via <code class="language-plaintext highlighter-rouge">Context.pathParam()</code></p>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"/hello/:name"</span><span class="o">,</span> <span class="n">ctx</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="n">ctx</span><span class="o">.</span><span class="na">result</span><span class="o">(</span><span class="s">"Hello: "</span> <span class="o">+</span> <span class="n">ctx</span><span class="o">.</span><span class="na">pathParam</span><span class="o">(</span><span class="s">"name"</span><span class="o">));</span>
<span class="o">});</span>
</code></pre></div>    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="p">.</span><span class="k">get</span><span class="p">(</span><span class="s">"/hello/:name"</span><span class="p">)</span> <span class="p">{</span> <span class="n">ctx</span> <span class="p">-&gt;</span>
    <span class="n">ctx</span><span class="p">.</span><span class="nf">result</span><span class="p">(</span><span class="s">"Hello: "</span> <span class="p">+</span> <span class="n">ctx</span><span class="p">.</span><span class="nf">pathParam</span><span class="p">(</span><span class="s">"name"</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></div>    </div>
  </div>
</div>

<p>Handler-paths can also include wildcard parameters (splats). These are available via <code class="language-plaintext highlighter-rouge">Context.splat()</code></p>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"/hello/*/and/*"</span><span class="o">,</span> <span class="n">ctx</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="n">ctx</span><span class="o">.</span><span class="na">result</span><span class="o">(</span><span class="s">"Hello: "</span> <span class="o">+</span> <span class="n">ctx</span><span class="o">.</span><span class="na">splat</span><span class="o">(</span><span class="mi">0</span><span class="o">)</span> <span class="o">+</span> <span class="s">" and "</span> <span class="o">+</span> <span class="n">ctx</span><span class="o">.</span><span class="na">splat</span><span class="o">(</span><span class="mi">1</span><span class="o">));</span>
<span class="o">});</span>
</code></pre></div>    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="p">.</span><span class="k">get</span><span class="p">(</span><span class="s">"/hello/*/and/*"</span><span class="p">)</span> <span class="p">{</span> <span class="n">ctx</span> <span class="p">-&gt;</span>
    <span class="n">ctx</span><span class="p">.</span><span class="nf">result</span><span class="p">(</span><span class="s">"Hello: "</span> <span class="p">+</span> <span class="n">ctx</span><span class="p">.</span><span class="nf">splat</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="p">+</span> <span class="s">" and "</span> <span class="p">+</span> <span class="n">ctx</span><span class="p">.</span><span class="nf">splat</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>
<span class="p">}</span>
</code></pre></div>    </div>
  </div>
</div>

<h3 id="after-handlers">After handlers</h3>
<p>After-handlers run after every request (even if an exception occurred)</p>
<div class="comment">You might know after-handlers as filters, interceptors, or middleware from other libraries.</div>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="o">.</span><span class="na">after</span><span class="o">(</span><span class="s">"/some-path/*"</span><span class="o">,</span> <span class="n">ctx</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="c1">// runs after all request to /some-path/*</span>
<span class="o">});</span>

<span class="n">app</span><span class="o">.</span><span class="na">after</span><span class="o">(</span><span class="n">ctx</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="c1">// run after every request</span>
<span class="o">});</span>
</code></pre></div>    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="p">.</span><span class="nf">after</span><span class="p">(</span><span class="s">"/some-path/*"</span><span class="p">)</span> <span class="p">{</span> <span class="n">ctx</span> <span class="p">-&gt;</span>
    <span class="c1">// runs after all request to /some-path/*</span>
<span class="p">}</span>

<span class="n">app</span><span class="p">.</span><span class="nf">after</span> <span class="p">{</span> <span class="n">ctx</span> <span class="p">-&gt;</span>
    <span class="c1">// run after every request</span>
<span class="p">}</span>
</code></pre></div>    </div>
  </div>
</div>

<h2 id="handler-groups">Handler groups</h2>
<p>You can group your endpoints by using the <code class="language-plaintext highlighter-rouge">routes()</code> and <code class="language-plaintext highlighter-rouge">path()</code> methods. <code class="language-plaintext highlighter-rouge">routes()</code> creates
a temporary static instance of Javalin so you can skip the <code class="language-plaintext highlighter-rouge">app.</code> prefix before your handlers.</p>

<p>You can import all the HTTP methods with <code class="language-plaintext highlighter-rouge">import static io.javalin.apibuilder.ApiBuilder.*</code>.</p>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="o">.</span><span class="na">routes</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="n">path</span><span class="o">(</span><span class="s">"users"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{</span>
        <span class="n">get</span><span class="o">(</span><span class="nl">UserController:</span><span class="o">:</span><span class="n">getAllUsers</span><span class="o">);</span>
        <span class="n">post</span><span class="o">(</span><span class="nl">UserController:</span><span class="o">:</span><span class="n">createUser</span><span class="o">);</span>
        <span class="n">path</span><span class="o">(</span><span class="s">":id"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{</span>
            <span class="n">get</span><span class="o">(</span><span class="nl">UserController:</span><span class="o">:</span><span class="n">getUser</span><span class="o">);</span>
            <span class="n">patch</span><span class="o">(</span><span class="nl">UserController:</span><span class="o">:</span><span class="n">updateUser</span><span class="o">);</span>
            <span class="n">delete</span><span class="o">(</span><span class="nl">UserController:</span><span class="o">:</span><span class="n">deleteUser</span><span class="o">);</span>
        <span class="o">});</span>
    <span class="o">});</span>
<span class="o">});</span>
</code></pre></div>    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="p">.</span><span class="nf">routes</span> <span class="p">{</span>
    <span class="nf">path</span><span class="p">(</span><span class="s">"users"</span><span class="p">)</span> <span class="p">{</span>
        <span class="k">get</span><span class="p">(</span><span class="n">userController</span><span class="o">::</span><span class="n">getAllUsers</span><span class="p">);</span>
        <span class="nf">post</span><span class="p">(</span><span class="n">userController</span><span class="o">::</span><span class="n">createUser</span><span class="p">);</span>
        <span class="nf">path</span><span class="p">(</span><span class="s">":id"</span><span class="p">)</span> <span class="p">{</span>
            <span class="k">get</span><span class="p">(</span><span class="n">userController</span><span class="o">::</span><span class="n">getUser</span><span class="p">);</span>
            <span class="nf">patch</span><span class="p">(</span><span class="n">userController</span><span class="o">::</span><span class="n">updateUser</span><span class="p">);</span>
            <span class="nf">delete</span><span class="p">(</span><span class="n">userController</span><span class="o">::</span><span class="n">deleteUser</span><span class="p">);</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>    </div>
  </div>
</div>

<p>Note that <code class="language-plaintext highlighter-rouge">path()</code> prefixes your paths with <code class="language-plaintext highlighter-rouge">/</code> (if you don’t add it yourself).<br />
This means that <code class="language-plaintext highlighter-rouge">path("api", ...)</code> and <code class="language-plaintext highlighter-rouge">path("/api", ...)</code> are equivalent.</p>

<h3 id="crudhandler">CrudHandler</h3>
<p>The <code class="language-plaintext highlighter-rouge">CrudHandler</code> is an interface that can be used within a <code class="language-plaintext highlighter-rouge">routes()</code> call:</p>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="o">.</span><span class="na">routes</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="n">crud</span><span class="o">(</span><span class="s">"users/:user-id"</span><span class="o">,</span> <span class="k">new</span> <span class="nc">UserController</span><span class="o">());</span>
<span class="o">});</span>
</code></pre></div>    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="p">.</span><span class="nf">routes</span> <span class="p">{</span>
    <span class="nf">crud</span><span class="p">(</span><span class="s">"users/:user-id"</span><span class="p">,</span> <span class="nc">UserController</span><span class="p">())</span>
<span class="p">}</span>
</code></pre></div>    </div>
  </div>
</div>

<p>It implements the five most common crud operations:</p>
<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">interface</span> <span class="nc">CrudHandler</span> <span class="p">{</span>
    <span class="nf">getAll</span><span class="p">(</span><span class="n">ctx</span><span class="p">)</span>
    <span class="nf">getOne</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">resourceId</span><span class="p">)</span>
    <span class="nf">create</span><span class="p">(</span><span class="n">ctx</span><span class="p">)</span>
    <span class="nf">update</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">resourceId</span><span class="p">)</span>
    <span class="nf">delete</span><span class="p">(</span><span class="n">ctx</span><span class="p">,</span> <span class="n">resourceId</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>

<h2 id="context">Context</h2>
<p>The <code class="language-plaintext highlighter-rouge">Context</code> object provides you with everything you need to handle a http-request.
It contains the underlying servlet-request and servlet-response, and a bunch of getters
and setters. The getters operate mostly on the request-object, while the setters operate exclusively on
the response object.</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ctx</span><span class="o">.</span><span class="na">appAttribute</span><span class="o">(</span><span class="kd">class</span><span class="err">)</span>             <span class="err">//</span> <span class="nc">retrieve</span> <span class="n">an</span> <span class="n">attribute</span> <span class="n">from</span> <span class="n">the</span> <span class="n">app</span> <span class="n">serving</span> <span class="n">the</span> <span class="n">request</span> <span class="o">-</span> <span class="n">since</span> <span class="mf">2.3</span><span class="o">.</span><span class="mi">0</span>

<span class="c1">// request methods:</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">req</span><span class="o">;</span>                            <span class="c1">// get underlying HttpServletRequest</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">anyFormParamNull</span><span class="o">(</span><span class="s">"k1"</span><span class="o">,</span> <span class="s">"k2"</span><span class="o">);</span>   <span class="c1">// returns true if any form-param is null</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">anyQueryParamNull</span><span class="o">(</span><span class="s">"k1"</span><span class="o">,</span> <span class="s">"k2"</span><span class="o">);</span>  <span class="c1">// returns true if any query-param is null</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">body</span><span class="o">();</span>                         <span class="c1">// get the request body as string</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">bodyAsBytes</span><span class="o">();</span>                  <span class="c1">// get the request body as byte-array</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">bodyAsClass</span><span class="o">(</span><span class="n">clazz</span><span class="o">);</span>             <span class="c1">// convert json body to object (java/kotlin)</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">body</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;();</span>                      <span class="c1">// convert json body to object (kotlin)</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">formParam</span><span class="o">(</span><span class="s">"key"</span><span class="o">);</span>               <span class="c1">// get form param</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">formParams</span><span class="o">(</span><span class="s">"key"</span><span class="o">);</span>              <span class="c1">// get form param with multiple values</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">formParamMap</span><span class="o">();</span>                 <span class="c1">// get all form param key/values as map</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">pathParam</span><span class="o">(</span><span class="s">"key"</span><span class="o">);</span>               <span class="c1">// get a path-parameter, ex "/:id" -&gt; param("id")</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">pathParamMap</span><span class="o">();</span>                 <span class="c1">// get all param key/values as map</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">splat</span><span class="o">(</span><span class="mi">0</span><span class="o">);</span>                       <span class="c1">// get splat by nr, ex "/*" -&gt; splat(0)</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">splats</span><span class="o">();</span>                       <span class="c1">// get array of splat-values</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">attribute</span><span class="o">(</span><span class="s">"key"</span><span class="o">,</span> <span class="s">"value"</span><span class="o">);</span>      <span class="c1">// set a request attribute</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">attribute</span><span class="o">(</span><span class="s">"key"</span><span class="o">);</span>               <span class="c1">// get a request attribute</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">attributeMap</span><span class="o">();</span>                 <span class="c1">// get all attribute key/values as map</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">basicAuthCredentials</span><span class="o">()</span>          <span class="c1">// get username and password used for basic-auth</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">contentLength</span><span class="o">();</span>                <span class="c1">// get request content length</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">contentType</span><span class="o">();</span>                  <span class="c1">// get request content type</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">cookie</span><span class="o">(</span><span class="s">"key"</span><span class="o">);</span>                  <span class="c1">// get cookie by name</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">cookieMap</span><span class="o">();</span>                    <span class="c1">// get all cookie key/values as map</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">endpointHandlerPath</span><span class="o">();</span>          <span class="c1">// get path of the endpoint handler that matched the request - since 2.4.0</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">header</span><span class="o">(</span><span class="s">"key"</span><span class="o">);</span>                  <span class="c1">// get a header</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">headerMap</span><span class="o">();</span>                    <span class="c1">// get all header key/values as map</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">host</span><span class="o">();</span>                         <span class="c1">// get request host</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">ip</span><span class="o">();</span>                           <span class="c1">// get request up</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">isMultipart</span><span class="o">();</span>                  <span class="c1">// check if request is multipart</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">mapFormParams</span><span class="o">(</span><span class="s">"k1"</span><span class="o">,</span> <span class="s">"k2"</span><span class="o">);</span>      <span class="c1">// map form params to their values, returns null if any form param is missing</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">mapQueryParams</span><span class="o">(</span><span class="s">"k1"</span><span class="o">,</span> <span class="s">"k2"</span><span class="o">);</span>     <span class="c1">// map query params to their values, returns null if any query param is missing</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">matchedPath</span><span class="o">();</span>                  <span class="c1">// get matched path, ex "/path/:param"</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">path</span><span class="o">();</span>                         <span class="c1">// get request path</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">port</span><span class="o">();</span>                         <span class="c1">// get request port</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">protocol</span><span class="o">();</span>                     <span class="c1">// get request protocol</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">queryParam</span><span class="o">(</span><span class="s">"key"</span><span class="o">);</span>              <span class="c1">// get query param</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">queryParams</span><span class="o">(</span><span class="s">"key"</span><span class="o">);</span>             <span class="c1">// get query param with multiple values</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">queryParamMap</span><span class="o">();</span>                <span class="c1">// get all query param key/values as map</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">queryString</span><span class="o">();</span>                  <span class="c1">// get request query string</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">method</span><span class="o">();</span>                       <span class="c1">// get request method</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">scheme</span><span class="o">();</span>                       <span class="c1">// get request scheme</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">sessionAttribute</span><span class="o">(</span><span class="s">"foo"</span><span class="o">,</span> <span class="s">"bar"</span><span class="o">);</span> <span class="c1">// set session-attribute "foo" to "bar"</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">sessionAttribute</span><span class="o">(</span><span class="s">"foo"</span><span class="o">);</span>        <span class="c1">// get session-attribute "foo"</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">sessionAttributeMap</span><span class="o">();</span>          <span class="c1">// get all session attributes as map</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">uploadedFile</span><span class="o">(</span><span class="s">"key"</span><span class="o">);</span>            <span class="c1">// get file from multipart form</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">uploadedFiles</span><span class="o">(</span><span class="s">"key"</span><span class="o">);</span>           <span class="c1">// get files from multipart form</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">url</span><span class="o">();</span>                          <span class="c1">// get request url</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">userAgent</span><span class="o">();</span>                    <span class="c1">// get request user agent</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">validatedFormParam</span><span class="o">()</span>            <span class="c1">// create a Validator for the form param - since 2.2.0</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">validatedPathParam</span><span class="o">()</span>            <span class="c1">// create a Validator for the path param - since 2.2.0</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">validatedQueryParam</span><span class="o">()</span>           <span class="c1">// create a Validator for the query param  -since 2.2.0</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">validatedBodyAsClass</span><span class="o">()</span>          <span class="c1">// create a Validator for the body (java) - since 2.2.0</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">validatedBody</span><span class="o">&lt;</span><span class="no">T</span><span class="o">&gt;</span>                <span class="c1">// create a Validator for the body (kotlin) - since 2.2.0</span>

<span class="c1">// response methods:</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">res</span><span class="o">;</span>                            <span class="c1">// get underlying HttpServletResponse</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">result</span><span class="o">(</span><span class="s">"result"</span><span class="o">);</span>               <span class="c1">// set result (string)</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">result</span><span class="o">(</span><span class="n">inputStream</span><span class="o">);</span>            <span class="c1">// set result (stream)</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">result</span><span class="o">(</span><span class="n">future</span><span class="o">);</span>                 <span class="c1">// set result (future)</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">resultString</span><span class="o">();</span>                 <span class="c1">// get response result (string)</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">resultStream</span><span class="o">();</span>                 <span class="c1">// get response result (stream)</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">resultFuture</span><span class="o">();</span>                 <span class="c1">// get response result (future)</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">header</span><span class="o">(</span><span class="s">"key"</span><span class="o">,</span> <span class="s">"value"</span><span class="o">);</span>         <span class="c1">// set response header</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">html</span><span class="o">(</span><span class="s">"body html"</span><span class="o">);</span>              <span class="c1">// set result and html content type</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">json</span><span class="o">(</span><span class="n">object</span><span class="o">);</span>                   <span class="c1">// serialize object and set as result</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">json</span><span class="o">(</span><span class="n">future</span><span class="o">);</span>                   <span class="c1">// serialize object when future resolves - since 2.2.0</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">redirect</span><span class="o">(</span><span class="s">"/location"</span><span class="o">);</span>          <span class="c1">// redirect to location</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">redirect</span><span class="o">(</span><span class="s">"/location"</span><span class="o">,</span> <span class="mi">302</span><span class="o">);</span>     <span class="c1">// redirect to location with code</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">status</span><span class="o">();</span>                       <span class="c1">// get response status</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">status</span><span class="o">(</span><span class="mi">404</span><span class="o">);</span>                    <span class="c1">// set response status</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">cookie</span><span class="o">(</span><span class="s">"key"</span><span class="o">,</span> <span class="s">"value"</span><span class="o">);</span>         <span class="c1">// set cookie with key and value</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">cookie</span><span class="o">(</span><span class="s">"key"</span><span class="o">,</span> <span class="s">"value"</span><span class="o">,</span> <span class="mi">0</span><span class="o">);</span>      <span class="c1">// set cookie with key, value, and maxage</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">cookie</span><span class="o">(</span><span class="n">cookie</span><span class="o">);</span>                 <span class="c1">// set cookie using a Cookie object</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">removeCookie</span><span class="o">(</span><span class="s">"key"</span><span class="o">);</span>            <span class="c1">// remove cookie by key</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">removeCookie</span><span class="o">(</span><span class="s">"key"</span><span class="o">,</span> <span class="s">"/path"</span><span class="o">);</span>   <span class="c1">// remove cookie by key and path</span>
</code></pre></div></div>

<h3 id="cookie-store">Cookie Store</h3>

<p>The <code class="language-plaintext highlighter-rouge">ctx.cookieStore()</code> functions provide a convenient way for sharing information between handlers, request, or even servers:</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ctx</span><span class="o">.</span><span class="na">cookieStore</span><span class="o">(</span><span class="n">key</span><span class="o">,</span> <span class="n">value</span><span class="o">);</span> <span class="c1">// store any type of value</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">cookieStore</span><span class="o">(</span><span class="n">key</span><span class="o">);</span> <span class="c1">// read any type of value</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">clearCookieStore</span><span class="o">();</span> <span class="c1">// clear the cookie-store</span>
</code></pre></div></div>
<p>The cookieStore works like this:</p>
<ol>
  <li>The first handler that matches the incoming request will populate the cookie-store-map with the data currently stored in the cookie (if any).</li>
  <li>This map can now be used as a state between handlers on the same request-cycle, pretty much in the same way as <code class="language-plaintext highlighter-rouge">ctx.attribute()</code></li>
  <li>At the end of the request-cycle, the cookie-store-map is serialized, base64-encoded and written to the response as a cookie.
This allows you to share the map between requests and servers (in case you are running multiple servers behind a load-balancer)</li>
</ol>

<h3 id="example">Example:</h3>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">serverOneApp</span><span class="o">.</span><span class="na">post</span><span class="o">(</span><span class="s">"/cookie-storer"</span><span class="o">)</span> <span class="o">{</span> <span class="n">ctx</span> <span class="o">-&gt;</span>
    <span class="n">ctx</span><span class="o">.</span><span class="na">cookieStore</span><span class="o">(</span><span class="s">"string"</span><span class="o">,</span> <span class="s">"Hello world!"</span><span class="o">);</span>
    <span class="n">ctx</span><span class="o">.</span><span class="na">cookieStore</span><span class="o">(</span><span class="s">"i"</span><span class="o">,</span> <span class="mi">42</span><span class="o">);</span>
    <span class="n">ctx</span><span class="o">.</span><span class="na">cookieStore</span><span class="o">(</span><span class="s">"list"</span><span class="o">,</span> <span class="nc">Arrays</span><span class="o">.</span><span class="na">asList</span><span class="o">(</span><span class="s">"One"</span><span class="o">,</span> <span class="s">"Two"</span><span class="o">,</span> <span class="s">"Three"</span><span class="o">));</span>
<span class="o">}</span>
<span class="n">serverTwoApp</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"/cookie-reader"</span><span class="o">)</span> <span class="o">{</span> <span class="n">ctx</span> <span class="o">-&gt;</span> <span class="c1">// runs on a different server than serverOneApp</span>
    <span class="nc">String</span> <span class="n">string</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="na">cookieStore</span><span class="o">(</span><span class="s">"string"</span><span class="o">)</span>
    <span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="na">cookieStore</span><span class="o">(</span><span class="s">"i"</span><span class="o">)</span>
    <span class="nc">List</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">list</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="na">cookieStore</span><span class="o">(</span><span class="s">"list"</span><span class="o">)</span>
<span class="o">}</span>
</code></pre></div>    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">serverOneApp</span><span class="p">.</span><span class="nf">post</span><span class="p">(</span><span class="s">"/cookie-storer"</span><span class="p">)</span> <span class="p">{</span> <span class="n">ctx</span> <span class="p">-&gt;</span>
    <span class="n">ctx</span><span class="p">.</span><span class="nf">cookieStore</span><span class="p">(</span><span class="s">"string"</span><span class="p">,</span> <span class="s">"Hello world!"</span><span class="p">)</span>
    <span class="n">ctx</span><span class="p">.</span><span class="nf">cookieStore</span><span class="p">(</span><span class="s">"i"</span><span class="p">,</span> <span class="mi">42</span><span class="p">)</span>
    <span class="n">ctx</span><span class="p">.</span><span class="nf">cookieStore</span><span class="p">(</span><span class="s">"list"</span><span class="p">,</span> <span class="nf">listOf</span><span class="p">(</span><span class="s">"One"</span><span class="p">,</span> <span class="s">"Two"</span><span class="p">,</span> <span class="s">"Three"</span><span class="p">))</span>
<span class="p">}</span>
<span class="n">serverTwoApp</span><span class="p">.</span><span class="k">get</span><span class="p">(</span><span class="s">"/cookie-reader"</span><span class="p">)</span> <span class="p">{</span> <span class="n">ctx</span> <span class="p">-&gt;</span> <span class="c1">// runs on a different server than serverOneApp</span>
    <span class="kd">val</span> <span class="py">string</span> <span class="p">=</span> <span class="n">ctx</span><span class="p">.</span><span class="n">cookieStore</span><span class="p">&lt;</span><span class="nc">String</span><span class="p">&gt;(</span><span class="s">"string"</span><span class="p">)</span>
    <span class="kd">val</span> <span class="py">i</span> <span class="p">=</span> <span class="n">ctx</span><span class="p">.</span><span class="n">cookieStore</span><span class="p">&lt;</span><span class="nc">Int</span><span class="p">&gt;(</span><span class="s">"i"</span><span class="p">)</span>
    <span class="kd">val</span> <span class="py">list</span> <span class="p">=</span> <span class="n">ctx</span><span class="p">.</span><span class="n">cookieStore</span><span class="p">&lt;</span><span class="nc">List</span><span class="p">&lt;</span><span class="nc">String</span><span class="p">&gt;&gt;(</span><span class="s">"list"</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>    </div>
  </div>
</div>

<p>Since the client stores the cookie, the <code class="language-plaintext highlighter-rouge">get</code> request to <code class="language-plaintext highlighter-rouge">serverTwoApp</code>
will be able to retrieve the information that was passed in the <code class="language-plaintext highlighter-rouge">post</code> to <code class="language-plaintext highlighter-rouge">serverOneApp</code>.</p>

<p>Please note that cookies have a max-size of 4kb.</p>

<h3 id="context-extensions">Context extensions</h3>
<p>Context extensions give Java developers a way of extending the <code class="language-plaintext highlighter-rouge">Context</code> object.</p>

<p>One of the most popular features of Kotlin is <a href="https://kotlinlang.org/docs/reference/extensions.html">extension functions</a>.
When working with an object you don’t own in Java, you often end up making <code class="language-plaintext highlighter-rouge">MyUtil.action(object, ...)</code>.
If you, for example, want to serialize an object and set it as the result on the <code class="language-plaintext highlighter-rouge">Context</code>, you might do:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"/"</span><span class="o">,</span> <span class="n">ctx</span> <span class="o">-&gt;</span> <span class="nc">MyMapperUtil</span><span class="o">.</span><span class="na">serialize</span><span class="o">(</span><span class="n">ctx</span><span class="o">,</span> <span class="n">myMapper</span><span class="o">,</span> <span class="n">myObject</span><span class="o">));</span> <span class="c1">// three args, what happens where?</span>
</code></pre></div></div>

<p>With context extensions you can add custom extensions on the context:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"/"</span><span class="o">,</span> <span class="n">ctx</span> <span class="o">-&gt;</span> <span class="n">ctx</span><span class="o">.</span><span class="na">use</span><span class="o">(</span><span class="nc">MyMapper</span><span class="o">.</span><span class="na">class</span><span class="o">).</span><span class="na">serialize</span><span class="o">(</span><span class="n">object</span><span class="o">));</span> <span class="c1">// use MyMapper to serialize object</span>
</code></pre></div></div>

<p>Context extensions have to be added before you can use them, this would typically be done in the first <code class="language-plaintext highlighter-rouge">before</code> filter of your app:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="o">.</span><span class="na">before</span><span class="o">(</span><span class="n">ctx</span> <span class="o">-&gt;</span> <span class="n">ctx</span><span class="o">.</span><span class="na">register</span><span class="o">(</span><span class="nc">MyMapper</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="k">new</span> <span class="nc">MyMapper</span><span class="o">(</span><span class="n">ctx</span><span class="o">,</span> <span class="n">otherDependency</span><span class="o">));</span>
</code></pre></div></div>

<h2 id="validation">Validation</h2>
<p>You can access Javalin’s <code class="language-plaintext highlighter-rouge">Validator</code> class through the parameter and body methods, or by
calling <code class="language-plaintext highlighter-rouge">JavalinValidation.validate()</code>. There are two validators, <code class="language-plaintext highlighter-rouge">Validator</code> and <code class="language-plaintext highlighter-rouge">TypedValidator&lt;T&gt;</code>.</p>

<p>The API is fairly small:</p>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// methods available on Validator:</span>
<span class="n">notNullOrEmpty</span><span class="o">();</span> <span class="c1">// check that value is not null of empty (all validators do this by default, but can be called for readability)</span>
<span class="n">matches</span><span class="o">(</span><span class="s">"regex"</span><span class="o">);</span> <span class="c1">// check that value matches regex</span>
<span class="n">asBoolean</span><span class="o">();</span> <span class="c1">// validate and return TypedValidator&lt;Boolean&gt;</span>
<span class="n">asDouble</span><span class="o">();</span> <span class="c1">// validate and return TypedValidator&lt;Double&gt;</span>
<span class="n">asFloat</span><span class="o">();</span> <span class="c1">// validate and return TypedValidator&lt;Float&gt;</span>
<span class="n">asInt</span><span class="o">();</span> <span class="c1">// validate and return TypedValidator&lt;Integer&gt;</span>
<span class="n">asLong</span><span class="o">();</span> <span class="c1">// validate and return TypedValidator&lt;Long&gt;</span>
<span class="n">asClass</span><span class="o">(</span><span class="nc">MyClass</span><span class="o">.</span><span class="na">class</span><span class="o">);</span> <span class="c1">// validate and return TypedValidator&lt;MyClass&gt;</span>

<span class="c1">// methods available on both Validator and TypedValidator&lt;T&gt;:</span>
<span class="n">check</span><span class="o">(</span><span class="n">v</span> <span class="o">-&gt;</span> <span class="o">...);</span> <span class="c1">// check value against supplied lambda</span>
<span class="n">getOrThrow</span><span class="o">();</span> <span class="c1">// validate and get value</span>
</code></pre></div>    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// only available on Validator:</span>
<span class="nf">notNullOrEmpty</span><span class="p">()</span> <span class="c1">// check that value is not null of empty (all validators do this by default, but can be called for readability)</span>
<span class="nf">matches</span><span class="p">(</span><span class="s">"regex"</span><span class="p">)</span> <span class="c1">// check that value matches regex</span>
<span class="nf">asBoolean</span><span class="p">()</span> <span class="c1">// validate and return TypedValidator&lt;Boolean&gt;</span>
<span class="nf">asDouble</span><span class="p">()</span> <span class="c1">// validate and return TypedValidator&lt;Double&gt;</span>
<span class="nf">asFloat</span><span class="p">()</span> <span class="c1">// validate and return TypedValidator&lt;Float&gt;</span>
<span class="nf">asInt</span><span class="p">()</span> <span class="c1">// validate and return TypedValidator&lt;Int&gt;</span>
<span class="nf">asLong</span><span class="p">()</span> <span class="c1">// validate and return TypedValidator&lt;Long&gt;</span>
<span class="n">asClass</span><span class="p">&lt;</span><span class="nc">MyClass</span><span class="p">&gt;()</span> <span class="c1">// validate and return TypedValidator&lt;MyClass&gt;</span>

<span class="c1">// available on both Validator and TypedValidator&lt;T&gt;:</span>
<span class="nf">check</span><span class="p">({</span> <span class="o">..</span><span class="p">.</span> <span class="p">})</span> <span class="c1">// check value against supplied lambda</span>
<span class="nf">getOrThrow</span><span class="p">()</span> <span class="c1">// validate and get value</span>
</code></pre></div>    </div>
  </div>
</div>

<h3 id="custom-converters">Custom converters</h3>
<p>If you need to convert non-included class, you have to register a custom converter:</p>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">JavalinValidation</span><span class="o">.</span><span class="na">register</span><span class="o">(</span><span class="nc">Instant</span><span class="o">.</span><span class="na">java</span><span class="o">,</span> <span class="n">v</span> <span class="o">-&gt;</span> <span class="nc">Instant</span><span class="o">.</span><span class="na">ofEpochMilli</span><span class="o">(</span><span class="n">v</span><span class="o">.</span><span class="na">toLong</span><span class="o">());</span>
</code></pre></div>    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">JavalinValidation</span><span class="p">.</span><span class="nf">register</span><span class="p">(</span><span class="nc">Instant</span><span class="o">::</span><span class="k">class</span><span class="p">.</span><span class="n">java</span><span class="p">)</span> <span class="p">{</span> <span class="nc">Instant</span><span class="p">.</span><span class="nf">ofEpochMilli</span><span class="p">(</span><span class="n">it</span><span class="p">.</span><span class="nf">toLong</span><span class="p">())</span> <span class="p">}</span>
</code></pre></div>    </div>
  </div>
</div>

<h3 id="validation-examples">Validation examples</h3>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// validate two dependent query parameters:</span>
<span class="nc">Instant</span> <span class="n">fromDate</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="na">queryParam</span><span class="o">(</span><span class="s">"from"</span><span class="o">,</span> <span class="nc">Instant</span><span class="o">.</span><span class="na">class</span><span class="o">).</span><span class="na">get</span><span class="o">();</span>
<span class="nc">Instant</span> <span class="n">toDate</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="na">queryParam</span><span class="o">(</span><span class="s">"to"</span><span class="o">,</span> <span class="nc">Instant</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
        <span class="o">.</span><span class="na">check</span><span class="o">(</span><span class="n">it</span> <span class="o">-&gt;</span> <span class="n">it</span><span class="o">.</span><span class="na">isAfter</span><span class="o">(</span><span class="n">fromDate</span><span class="o">),</span> <span class="s">"'to' has to be after 'from'"</span><span class="o">)</span>
        <span class="o">.</span><span class="na">get</span><span class="o">();</span>

<span class="c1">// validate a json body:</span>
<span class="nc">MyObject</span> <span class="n">myObject</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="na">bodyValidator</span><span class="o">(</span><span class="nc">MyObject</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
        <span class="o">.</span><span class="na">check</span><span class="o">(</span><span class="n">obj</span> <span class="o">-&gt;</span> <span class="n">obj</span><span class="o">.</span><span class="na">myObjectProperty</span> <span class="o">==</span> <span class="n">someValue</span><span class="o">)</span>
        <span class="o">.</span><span class="na">getOrThrow</span><span class="o">();</span>
</code></pre></div>    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// validate two dependent query parameters:</span>
<span class="kd">val</span> <span class="py">fromDate</span> <span class="p">=</span> <span class="n">ctx</span><span class="p">.</span><span class="n">queryParam</span><span class="p">&lt;</span><span class="nc">Instant</span><span class="p">&gt;(</span><span class="s">"from"</span><span class="p">).</span><span class="k">get</span><span class="p">()</span>
<span class="kd">val</span> <span class="py">toDate</span> <span class="p">=</span> <span class="n">ctx</span><span class="p">.</span><span class="n">queryParam</span><span class="p">&lt;</span><span class="nc">Instant</span><span class="p">&gt;(</span><span class="s">"to"</span><span class="p">)</span>
        <span class="p">.</span><span class="nf">check</span><span class="p">({</span> <span class="n">it</span><span class="p">.</span><span class="nf">isAfter</span><span class="p">(</span><span class="n">fromDate</span><span class="p">)</span> <span class="p">},</span> <span class="s">"'to' has to be after 'from'"</span><span class="p">)</span>
        <span class="p">.</span><span class="k">get</span><span class="p">()</span>

<span class="c1">// validate a json body:</span>
<span class="kd">val</span> <span class="py">myObject</span> <span class="p">=</span> <span class="n">ctx</span><span class="p">.</span><span class="n">bodyValidator</span><span class="p">&lt;</span><span class="nc">MyObject</span><span class="p">&gt;()</span>
        <span class="p">.</span><span class="nf">check</span><span class="p">({</span> <span class="n">it</span><span class="p">.</span><span class="n">myObjectProperty</span> <span class="p">==</span> <span class="n">someValue</span> <span class="p">})</span>
        <span class="p">.</span><span class="k">get</span><span class="p">()</span>
</code></pre></div>    </div>
  </div>
</div>

<p>If any of the validators find errors, a <code class="language-plaintext highlighter-rouge">BadRequestResponse</code> is thrown:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="s">"Query parameter 'from' with value 'TEST' is not a valid Instant"</span>
<span class="s">"Query parameter 'to' with value '1262347000000' invalid - 'to' has to be after 'from'"</span>
<span class="s">"Request body as MyObject invalid - Check failed"</span> <span class="c1">// can set custom error message in check()</span>
</code></pre></div></div>

<h2 id="access-manager">Access manager</h2>
<p>Javalin has a functional interface <code class="language-plaintext highlighter-rouge">AccessManager</code>, which let’s you
set per-endpoint authentication and/or authorization. It’s common to use before-handlers for this,
but per-endpoint security handlers give you much more explicit and readable code. You can implement your
access-manager however you want. Here is an example implementation:</p>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Set the access-manager that Javalin should use</span>
<span class="n">app</span><span class="o">.</span><span class="na">accessManager</span><span class="o">((</span><span class="n">handler</span><span class="o">,</span> <span class="n">ctx</span><span class="o">,</span> <span class="n">permittedRoles</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="nc">MyRole</span> <span class="n">userRole</span> <span class="o">=</span> <span class="n">getUserRole</span><span class="o">(</span><span class="n">ctx</span><span class="o">);</span>
    <span class="k">if</span> <span class="o">(</span><span class="n">permittedRoles</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="n">userRole</span><span class="o">))</span> <span class="o">{</span>
        <span class="n">handler</span><span class="o">.</span><span class="na">handle</span><span class="o">(</span><span class="n">ctx</span><span class="o">);</span>
    <span class="o">}</span> <span class="k">else</span> <span class="o">{</span>
        <span class="n">ctx</span><span class="o">.</span><span class="na">status</span><span class="o">(</span><span class="mi">401</span><span class="o">).</span><span class="na">result</span><span class="o">(</span><span class="s">"Unauthorized"</span><span class="o">);</span>
    <span class="o">}</span>
<span class="o">});</span>

<span class="nc">Role</span> <span class="nf">getUserRole</span><span class="o">(</span><span class="nc">Context</span> <span class="n">ctx</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// determine user role based on request</span>
    <span class="c1">// typically done by inspecting headers</span>
<span class="o">}</span>

<span class="kd">enum</span> <span class="nc">MyRole</span> <span class="kd">implements</span> <span class="nc">Role</span> <span class="o">{</span>
    <span class="no">ANYONE</span><span class="o">,</span> <span class="no">ROLE_ONE</span><span class="o">,</span> <span class="no">ROLE_TWO</span><span class="o">,</span> <span class="no">ROLE_THREE</span><span class="o">;</span>
<span class="o">}</span>

<span class="n">app</span><span class="o">.</span><span class="na">routes</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="n">get</span><span class="o">(</span><span class="s">"/un-secured"</span><span class="o">,</span>   <span class="n">ctx</span> <span class="o">-&gt;</span> <span class="n">ctx</span><span class="o">.</span><span class="na">result</span><span class="o">(</span><span class="s">"Hello"</span><span class="o">),</span>   <span class="n">roles</span><span class="o">(</span><span class="no">ANYONE</span><span class="o">));</span>
    <span class="n">get</span><span class="o">(</span><span class="s">"/secured"</span><span class="o">,</span>      <span class="n">ctx</span> <span class="o">-&gt;</span> <span class="n">ctx</span><span class="o">.</span><span class="na">result</span><span class="o">(</span><span class="s">"Hello"</span><span class="o">),</span>   <span class="n">roles</span><span class="o">(</span><span class="no">ROLE_ONE</span><span class="o">));</span>
<span class="o">});</span>
</code></pre></div>    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Set the access-manager that Javalin should use</span>
<span class="n">app</span><span class="p">.</span><span class="nf">accessManager</span> <span class="p">{</span> <span class="n">handler</span><span class="p">,</span> <span class="n">ctx</span><span class="p">,</span> <span class="n">permittedRoles</span> <span class="p">-&gt;</span>
    <span class="kd">val</span> <span class="py">userRole</span> <span class="p">=</span> <span class="nf">getUserRole</span><span class="p">(</span><span class="n">ctx</span><span class="p">)</span> <span class="c1">// determine user role based on request</span>
    <span class="k">if</span> <span class="p">(</span><span class="n">permittedRoles</span><span class="p">.</span><span class="nf">contains</span><span class="p">(</span><span class="n">userRole</span><span class="p">))</span> <span class="p">{</span>
        <span class="n">handler</span><span class="p">.</span><span class="nf">handle</span><span class="p">(</span><span class="n">ctx</span><span class="p">)</span>
    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
        <span class="n">ctx</span><span class="p">.</span><span class="nf">status</span><span class="p">(</span><span class="mi">401</span><span class="p">).</span><span class="nf">result</span><span class="p">(</span><span class="s">"Unauthorized"</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>

<span class="k">fun</span> <span class="nf">getUserRole</span><span class="p">(</span><span class="n">ctx</span><span class="p">:</span> <span class="nc">Context</span><span class="p">)</span> <span class="p">:</span> <span class="nc">Role</span> <span class="p">{</span>
    <span class="c1">// determine user role based on request</span>
    <span class="c1">// typically done by inspecting headers</span>
<span class="p">}</span>

<span class="k">internal</span> <span class="k">enum</span> <span class="kd">class</span> <span class="nc">MyRole</span> <span class="p">:</span> <span class="nc">Role</span> <span class="p">{</span>
    <span class="nc">ANYONE</span><span class="p">,</span> <span class="nc">ROLE_ONE</span><span class="p">,</span> <span class="nc">ROLE_TWO</span><span class="p">,</span> <span class="nc">ROLE_THREE</span>
<span class="p">}</span>

<span class="n">app</span><span class="p">.</span><span class="nf">routes</span> <span class="p">{</span>
    <span class="k">get</span><span class="p">(</span><span class="s">"/un-secured"</span><span class="p">,</span>   <span class="p">{</span> <span class="n">ctx</span> <span class="p">-&gt;</span> <span class="n">ctx</span><span class="p">.</span><span class="nf">result</span><span class="p">(</span><span class="s">"Hello"</span><span class="p">)},</span>   <span class="nf">roles</span><span class="p">(</span><span class="nc">MyRole</span><span class="p">.</span><span class="nc">ANYONE</span><span class="p">));</span>
    <span class="k">get</span><span class="p">(</span><span class="s">"/secured"</span><span class="p">,</span>      <span class="p">{</span> <span class="n">ctx</span> <span class="p">-&gt;</span> <span class="n">ctx</span><span class="p">.</span><span class="nf">result</span><span class="p">(</span><span class="s">"Hello"</span><span class="p">)},</span>   <span class="nf">roles</span><span class="p">(</span><span class="nc">MyRole</span><span class="p">.</span><span class="nc">ROLE_ONE</span><span class="p">));</span>
<span class="p">}</span>
</code></pre></div>    </div>
  </div>
</div>

<h2 id="default-responses">Default responses</h2>

<p>Javalin comes with a built in class called <code class="language-plaintext highlighter-rouge">HttpResponseException</code>, which can be used for default responses.<br />
If the client accepts JSON, a JSON object is returned. Otherwise a plain text response is returned.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="o">.</span><span class="na">post</span><span class="o">(</span><span class="s">"/"</span><span class="o">)</span> <span class="o">{</span> <span class="k">throw</span> <span class="nc">ForbiddenResponse</span><span class="o">(</span><span class="s">"Off limits!"</span><span class="o">)</span> <span class="o">}</span>
</code></pre></div></div>
<p>If client accepts JSON:</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">{</span>
    <span class="s">"title"</span><span class="o">:</span> <span class="s">"Off limits!"</span><span class="o">,</span>
    <span class="s">"status"</span><span class="o">:</span> <span class="mi">403</span><span class="o">,</span>
    <span class="s">"type"</span><span class="o">:</span> <span class="s">"https://javalin.io/documentation#forbiddenresponse"</span><span class="o">,</span>
    <span class="s">"details"</span><span class="o">:</span> <span class="o">[]</span>
<span class="o">}</span>
</code></pre></div></div>
<p>Otherwise:</p>
<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Forbidden
</code></pre></div></div>

<p>You can include a <code class="language-plaintext highlighter-rouge">Map&lt;String, String&gt;</code> of details if you wish.</p>

<h3 id="redirectresponse">RedirectResponse</h3>
<p>Returns a <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/302">302 Found</a> response with the default title <code class="language-plaintext highlighter-rouge">Redirected</code>.</p>

<h3 id="badrequestresponse">BadRequestResponse</h3>
<p>Returns a <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/400">400 Bad Request</a> response with the default title <code class="language-plaintext highlighter-rouge">Bad request</code>.</p>

<h3 id="unauthorizedresponse">UnauthorizedResponse</h3>
<p>Returns a <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/401">401 Unauthorized</a> response with the default title <code class="language-plaintext highlighter-rouge">Unauthorized</code>.</p>

<h3 id="forbiddenresponse">ForbiddenResponse</h3>
<p>Returns a <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/403">403 Forbidden</a> response with the default title <code class="language-plaintext highlighter-rouge">Forbidden</code>.</p>

<h3 id="notfoundresponse">NotFoundResponse</h3>
<p>Returns a <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/404">404 Not Found</a> response with the default title <code class="language-plaintext highlighter-rouge">Not found</code>.</p>

<h3 id="methodnotallowedresponse">MethodNotAllowedResponse</h3>
<p>Returns a <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/405">405 Method Not Allowed</a> response with the default title <code class="language-plaintext highlighter-rouge">Method not allowed</code>.</p>

<h3 id="conflictresponse">ConflictResponse</h3>
<p>Returns a <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/409">409 Conflict</a> response with the default title <code class="language-plaintext highlighter-rouge">Conflict</code>.</p>

<h3 id="goneresponse">GoneResponse</h3>
<p>Returns a <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/410">410 Gone</a> response with the default title <code class="language-plaintext highlighter-rouge">Gone</code>.</p>

<h3 id="internalservererrorresponse">InternalServerErrorResponse</h3>
<p>Returns a <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/500">500 Internal Server Error</a> response with the default title <code class="language-plaintext highlighter-rouge">Internal server error</code>.</p>

<h3 id="badgatewayresponse">BadGatewayResponse</h3>
<p>Returns a <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/502">502 Bad Gateway</a> response with the default title <code class="language-plaintext highlighter-rouge">Bad gateway</code>.</p>

<h3 id="serviceunavailableresponse">ServiceUnavailableResponse</h3>
<p>Returns a <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/503">503 Service Unavailable</a> response with the default title <code class="language-plaintext highlighter-rouge">Service unavailable</code>.</p>

<h3 id="gatewaytimeoutresponse">GatewayTimeoutResponse</h3>
<p>Returns a <a href="https://developer.mozilla.org/en-US/docs/Web/HTTP/Status/504">504 Gateway Timeout</a> response with the default title <code class="language-plaintext highlighter-rouge">Gateway timeout</code>.</p>

<h2 id="exception-mapping">Exception Mapping</h2>
<p>All handlers (before, endpoint, after) can throw <code class="language-plaintext highlighter-rouge">Exception</code>
(and any subclass of <code class="language-plaintext highlighter-rouge">Exception</code>)
The <code class="language-plaintext highlighter-rouge">app.exception()</code> method gives you a way of handling these exceptions:</p>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="o">.</span><span class="na">exception</span><span class="o">(</span><span class="nc">NullPointerException</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="o">(</span><span class="n">e</span><span class="o">,</span> <span class="n">ctx</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="c1">// handle nullpointers here</span>
<span class="o">});</span>

<span class="n">app</span><span class="o">.</span><span class="na">exception</span><span class="o">(</span><span class="nc">Exception</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="o">(</span><span class="n">e</span><span class="o">,</span> <span class="n">ctx</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="c1">// handle general exceptions here</span>
    <span class="c1">// will not trigger if more specific exception-mapper found</span>
<span class="o">});</span>
</code></pre></div>    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="p">.</span><span class="nf">exception</span><span class="p">(</span><span class="nc">NullPointerException</span><span class="o">::</span><span class="k">class</span><span class="p">.</span><span class="n">java</span><span class="p">)</span> <span class="p">{</span> <span class="n">e</span><span class="p">,</span> <span class="n">ctx</span> <span class="p">-&gt;</span>
    <span class="c1">// handle nullpointers here</span>
<span class="p">}</span>

<span class="n">app</span><span class="p">.</span><span class="nf">exception</span><span class="p">(</span><span class="nc">Exception</span><span class="o">::</span><span class="k">class</span><span class="p">.</span><span class="n">java</span><span class="p">)</span> <span class="p">{</span> <span class="n">e</span><span class="p">,</span> <span class="n">ctx</span> <span class="p">-&gt;</span>
    <span class="c1">// handle general exceptions here</span>
    <span class="c1">// will not trigger if more specific exception-mapper found</span>
<span class="p">}</span>
</code></pre></div>    </div>
  </div>
</div>

<h2 id="error-mapping">Error Mapping</h2>
<p>Error mapping is similar to exception mapping, but it operates on HTTP status codes instead of Exceptions:</p>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="o">.</span><span class="na">error</span><span class="o">(</span><span class="mi">404</span><span class="o">,</span> <span class="n">ctx</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="n">ctx</span><span class="o">.</span><span class="na">result</span><span class="o">(</span><span class="s">"Generic 404 message"</span><span class="o">)</span>
<span class="o">});</span>
</code></pre></div>    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="p">.</span><span class="nf">error</span><span class="p">(</span><span class="mi">404</span><span class="p">)</span> <span class="p">{</span> <span class="n">ctx</span> <span class="p">-&gt;</span>
    <span class="n">ctx</span><span class="p">.</span><span class="nf">result</span><span class="p">(</span><span class="s">"Generic 404 message"</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>    </div>
  </div>
</div>

<p>It can make sense to use them together:</p>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="o">.</span><span class="na">exception</span><span class="o">(</span><span class="nc">FileNotFoundException</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="o">(</span><span class="n">e</span><span class="o">,</span> <span class="n">ctx</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="n">ctx</span><span class="o">.</span><span class="na">status</span><span class="o">(</span><span class="mi">404</span><span class="o">);</span>
<span class="o">}).</span><span class="na">error</span><span class="o">(</span><span class="mi">404</span><span class="o">,</span> <span class="n">ctx</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="n">ctx</span><span class="o">.</span><span class="na">result</span><span class="o">(</span><span class="s">"Generic 404 message"</span><span class="o">)</span>
<span class="o">});</span>
</code></pre></div>    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="p">.</span><span class="nf">exception</span><span class="p">(</span><span class="nc">FileNotFoundException</span><span class="o">::</span><span class="k">class</span><span class="p">.</span><span class="n">java</span><span class="p">)</span> <span class="p">{</span> <span class="n">e</span><span class="p">,</span> <span class="n">ctx</span> <span class="p">-&gt;</span>
    <span class="n">ctx</span><span class="p">.</span><span class="nf">status</span><span class="p">(</span><span class="mi">404</span><span class="p">)</span>
<span class="p">}.</span><span class="nf">error</span><span class="p">(</span><span class="mi">404</span><span class="p">)</span> <span class="p">{</span> <span class="n">ctx</span> <span class="p">-&gt;</span>
    <span class="n">ctx</span><span class="p">.</span><span class="nf">result</span><span class="p">(</span><span class="s">"Generic 404 message"</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div>    </div>
  </div>
</div>

<h2 id="websockets">WebSockets</h2>

<p>Javalin has a very intuitive way of handling WebSockets, similar to most node frameworks:</p>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="o">.</span><span class="na">ws</span><span class="o">(</span><span class="s">"/websocket/:path"</span><span class="o">,</span> <span class="n">ws</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="n">ws</span><span class="o">.</span><span class="na">onConnect</span><span class="o">(</span><span class="n">session</span> <span class="o">-&gt;</span> <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Connected"</span><span class="o">));</span>
    <span class="n">ws</span><span class="o">.</span><span class="na">onMessage</span><span class="o">((</span><span class="n">session</span><span class="o">,</span> <span class="n">message</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Received: "</span> <span class="o">+</span> <span class="n">message</span><span class="o">);</span>
        <span class="n">session</span><span class="o">.</span><span class="na">getRemote</span><span class="o">().</span><span class="na">sendString</span><span class="o">(</span><span class="s">"Echo: "</span> <span class="o">+</span> <span class="n">message</span><span class="o">);</span>
    <span class="o">});</span>
    <span class="n">ws</span><span class="o">.</span><span class="na">onClose</span><span class="o">((</span><span class="n">session</span><span class="o">,</span> <span class="n">statusCode</span><span class="o">,</span> <span class="n">reason</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Closed"</span><span class="o">));</span>
    <span class="n">ws</span><span class="o">.</span><span class="na">onError</span><span class="o">((</span><span class="n">session</span><span class="o">,</span> <span class="n">throwable</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Errored"</span><span class="o">));</span>
<span class="o">});</span>
</code></pre></div>    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="p">.</span><span class="nf">ws</span><span class="p">(</span><span class="s">"/websocket/:path"</span><span class="p">)</span> <span class="p">{</span> <span class="n">ws</span> <span class="p">-&gt;</span>
    <span class="n">ws</span><span class="p">.</span><span class="nf">onConnect</span> <span class="p">{</span> <span class="n">session</span> <span class="p">-&gt;</span> <span class="nf">println</span><span class="p">(</span><span class="s">"Connected"</span><span class="p">)</span> <span class="p">}</span>
    <span class="n">ws</span><span class="p">.</span><span class="nf">onMessage</span> <span class="p">{</span> <span class="n">session</span><span class="p">,</span> <span class="n">message</span> <span class="p">-&gt;</span>
        <span class="nf">println</span><span class="p">(</span><span class="s">"Received: "</span> <span class="p">+</span> <span class="n">message</span><span class="p">)</span>
        <span class="n">session</span><span class="p">.</span><span class="n">remote</span><span class="p">.</span><span class="nf">sendString</span><span class="p">(</span><span class="s">"Echo: "</span> <span class="p">+</span> <span class="n">message</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="n">ws</span><span class="p">.</span><span class="nf">onClose</span> <span class="p">{</span> <span class="n">session</span><span class="p">,</span> <span class="n">statusCode</span><span class="p">,</span> <span class="n">reason</span> <span class="p">-&gt;</span> <span class="nf">println</span><span class="p">(</span><span class="s">"Closed"</span><span class="p">)</span> <span class="p">}</span>
    <span class="n">ws</span><span class="p">.</span><span class="nf">onError</span> <span class="p">{</span> <span class="n">session</span><span class="p">,</span> <span class="n">throwable</span> <span class="p">-&gt;</span> <span class="nf">println</span><span class="p">(</span><span class="s">"Errored"</span><span class="p">)</span> <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>    </div>
  </div>
</div>

<h3 id="wssession">WsSession</h3>
<p>The <code class="language-plaintext highlighter-rouge">WsSession</code> object wraps Jetty’s <code class="language-plaintext highlighter-rouge">Session</code> and adds the following methods:</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">session</span><span class="o">.</span><span class="na">send</span><span class="o">(</span><span class="s">"message"</span><span class="o">)</span>               <span class="c1">// send a string message to session remote (the ws client)</span>
<span class="n">session</span><span class="o">.</span><span class="na">send</span><span class="o">(</span><span class="n">bytes</span><span class="o">)</span>                   <span class="c1">// send a binary message to session remote (the ws client)</span>
<span class="n">session</span><span class="o">.</span><span class="na">queryString</span><span class="o">()</span>                 <span class="c1">// get query-string from upgrade-request</span>
<span class="n">session</span><span class="o">.</span><span class="na">queryParam</span><span class="o">(</span><span class="s">"key"</span><span class="o">)</span>             <span class="c1">// get query-param from upgrade-request</span>
<span class="n">session</span><span class="o">.</span><span class="na">queryParams</span><span class="o">(</span><span class="s">"key"</span><span class="o">)</span>            <span class="c1">// get query-params from upgrade-request</span>
<span class="n">session</span><span class="o">.</span><span class="na">queryParamMap</span><span class="o">()</span>               <span class="c1">// get query-param-map from upgrade-request</span>
<span class="n">session</span><span class="o">.</span><span class="na">mapQueryParams</span><span class="o">(</span><span class="s">"k1"</span><span class="o">,</span> <span class="s">"k2"</span><span class="o">)</span>    <span class="c1">// map query-params to values (only useful in kotlin)</span>
<span class="n">session</span><span class="o">.</span><span class="na">anyQueryParamNull</span><span class="o">(</span><span class="s">"k1"</span><span class="o">,</span> <span class="s">"k2"</span><span class="o">)</span> <span class="c1">// check if any query-param from upgrade-request is null</span>
<span class="n">session</span><span class="o">.</span><span class="na">pathParam</span><span class="o">(</span><span class="s">"key"</span><span class="o">)</span>              <span class="c1">// get a path-parameter, ex "/:id" -&gt; param("id")</span>
<span class="n">session</span><span class="o">.</span><span class="na">pathParamMap</span><span class="o">()</span>                <span class="c1">// get all param key/values as map</span>
<span class="n">session</span><span class="o">.</span><span class="na">header</span><span class="o">(</span><span class="s">"key"</span><span class="o">)</span>                 <span class="c1">// get a header</span>
<span class="n">session</span><span class="o">.</span><span class="na">headerMap</span><span class="o">()</span>                   <span class="c1">// get all header key/values as map</span>
<span class="n">session</span><span class="o">.</span><span class="na">host</span><span class="o">()</span>                        <span class="c1">// get request host</span>
</code></pre></div></div>

<h3 id="websocket-logging">WebSocket logging</h3>
<p>You can add a WebSocket logger by calling <code class="language-plaintext highlighter-rouge">app.wsLogger()</code>. The method takes a <code class="language-plaintext highlighter-rouge">WsHandler</code>,
(the same interface as a normal <code class="language-plaintext highlighter-rouge">app.ws()</code> call), and can be used to log events of all types.
The following example just shows <code class="language-plaintext highlighter-rouge">onMessage</code>, but <code class="language-plaintext highlighter-rouge">onConnect</code>, <code class="language-plaintext highlighter-rouge">onError</code> and <code class="language-plaintext highlighter-rouge">onClose</code> are all available:</p>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="o">.</span><span class="na">wsLogger</span><span class="o">(</span> <span class="n">ws</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="n">ws</span><span class="o">.</span><span class="na">onMessage</span><span class="o">((</span><span class="n">session</span><span class="o">,</span> <span class="n">message</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
        <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Received: "</span> <span class="o">+</span> <span class="n">message</span><span class="o">);</span>
    <span class="o">});</span>
<span class="o">});</span>
</code></pre></div>    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="p">.</span><span class="nf">wsLogger</span> <span class="p">{</span> <span class="n">ws</span> <span class="p">-&gt;</span>
    <span class="n">ws</span><span class="p">.</span><span class="nf">onMessage</span> <span class="p">{</span> <span class="n">session</span><span class="p">,</span> <span class="n">message</span> <span class="p">-&gt;</span>
        <span class="nf">println</span><span class="p">(</span><span class="s">"Received: "</span> <span class="p">+</span> <span class="n">message</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>    </div>
  </div>
</div>

<p>The logger runs after the WebSocket handler for the endpoint</p>

<h3 id="configuring-websockets">Configuring WebSockets</h3>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="o">.</span><span class="na">wsFactoryConfig</span><span class="o">(</span><span class="n">wsFactory</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="n">wsFactory</span><span class="o">.</span><span class="na">policy</span><span class="o">.</span><span class="na">maxTextMessageSize</span> <span class="o">=</span> <span class="mi">1234</span><span class="o">;</span>
<span class="o">});</span>
</code></pre></div>    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="p">.</span><span class="nf">wsFactoryConfig</span> <span class="p">{</span> <span class="n">wsFactory</span> <span class="p">-&gt;</span>
    <span class="n">wsFactory</span><span class="p">.</span><span class="n">policy</span><span class="p">.</span><span class="n">maxTextMessageSize</span> <span class="p">=</span> <span class="mi">1234</span>
<span class="p">}</span>
</code></pre></div>    </div>
  </div>
</div>

<h2 id="server-sent-events">Server-sent Events</h2>
<p>Server-sent events (often also called event source) are very simple in Javalin.
You call <code class="language-plaintext highlighter-rouge">app.sse()</code>, which gives you access to the connected <code class="language-plaintext highlighter-rouge">SseClient</code>:</p>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="o">.</span><span class="na">sse</span><span class="o">(</span><span class="s">"/sse"</span><span class="o">,</span> <span class="n">client</span> <span class="o">-&gt;</span>
    <span class="n">client</span><span class="o">.</span><span class="na">sendEvent</span><span class="o">(</span><span class="s">"connected"</span><span class="o">,</span> <span class="s">"Hello, SSE"</span><span class="o">);</span>
    <span class="n">client</span><span class="o">.</span><span class="na">onClose</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Client disconnected"</span><span class="o">));</span>
<span class="o">});</span>
</code></pre></div>    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="p">.</span><span class="nf">sse</span><span class="p">(</span><span class="s">"/sse"</span><span class="p">)</span> <span class="p">{</span> <span class="n">client</span> <span class="p">-&gt;</span>
    <span class="n">client</span><span class="p">.</span><span class="nf">sendEvent</span><span class="p">(</span><span class="s">"connected"</span><span class="p">,</span> <span class="s">"Hello, SSE"</span><span class="p">)</span>
    <span class="n">client</span><span class="p">.</span><span class="nf">onClose</span> <span class="p">{</span> <span class="nf">println</span><span class="p">(</span><span class="s">"Client disconnected"</span><span class="p">)</span> <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>    </div>
  </div>
</div>

<p>The <code class="language-plaintext highlighter-rouge">SseClient</code> has access to three things:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">client</span><span class="o">.</span><span class="na">sendEvent</span><span class="o">()</span> <span class="c1">// method(s) for sending events to client</span>
<span class="n">client</span><span class="o">.</span><span class="na">onClose</span><span class="o">(</span><span class="n">runnable</span><span class="o">)</span> <span class="c1">// callback which runs when a client closes its connection</span>
<span class="n">client</span><span class="o">.</span><span class="na">ctx</span> <span class="c1">// the Context for when the client connected (to fetch query-params, etc)</span>
</code></pre></div></div>

<h2 id="lifecycle-events">Lifecycle events</h2>
<p>Javalin has five lifecycle events: <code class="language-plaintext highlighter-rouge">SERVER_STARTING</code>, <code class="language-plaintext highlighter-rouge">SERVER_STARTED</code>, <code class="language-plaintext highlighter-rouge">SERVER_START_FAILED</code>, <code class="language-plaintext highlighter-rouge">SERVER_STOPPING</code> and <code class="language-plaintext highlighter-rouge">SERVER_STOPPED</code>.
The snippet below shows all of them in action:</p>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Javalin</span> <span class="n">app</span> <span class="o">=</span> <span class="nc">Javalin</span><span class="o">.</span><span class="na">create</span><span class="o">()</span>
    <span class="o">.</span><span class="na">event</span><span class="o">(</span><span class="nc">JavalinEvent</span><span class="o">.</span><span class="na">SERVER_STARTING</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{</span> <span class="o">...</span> <span class="o">})</span>
    <span class="o">.</span><span class="na">event</span><span class="o">(</span><span class="nc">JavalinEvent</span><span class="o">.</span><span class="na">SERVER_STARTED</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{</span> <span class="o">...</span> <span class="o">})</span>
    <span class="o">.</span><span class="na">event</span><span class="o">(</span><span class="nc">JavalinEvent</span><span class="o">.</span><span class="na">SERVER_START_FAILED</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{</span> <span class="o">...</span> <span class="o">})</span>
    <span class="o">.</span><span class="na">event</span><span class="o">(</span><span class="nc">JavalinEvent</span><span class="o">.</span><span class="na">SERVER_STOPPING</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{</span> <span class="o">...</span> <span class="o">})</span>
    <span class="o">.</span><span class="na">event</span><span class="o">(</span><span class="nc">JavalinEvent</span><span class="o">.</span><span class="na">SERVER_STOPPED</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{</span> <span class="o">...</span> <span class="o">});</span>

<span class="n">app</span><span class="o">.</span><span class="na">start</span><span class="o">();</span> <span class="c1">// SERVER_STARTING -&gt; (SERVER_STARTED || SERVER_START_FAILED)</span>
<span class="n">app</span><span class="o">.</span><span class="na">stop</span><span class="o">();</span> <span class="c1">// SERVER_STOPPING -&gt; SERVER_STOPPED</span>
</code></pre></div>    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">val</span> <span class="py">app</span> <span class="p">=</span> <span class="nc">Javalin</span><span class="p">.</span><span class="nf">create</span><span class="p">()</span>
    <span class="p">.</span><span class="nf">event</span><span class="p">(</span><span class="nc">JavalinEvent</span><span class="p">.</span><span class="nc">SERVER_STARTING</span><span class="p">)</span> <span class="p">{</span> <span class="o">..</span><span class="p">.</span> <span class="p">})</span>
    <span class="p">.</span><span class="nf">event</span><span class="p">(</span><span class="nc">JavalinEvent</span><span class="p">.</span><span class="nc">SERVER_STARTED</span><span class="p">)</span> <span class="p">{</span> <span class="o">..</span><span class="p">.</span> <span class="p">})</span>
    <span class="p">.</span><span class="nf">event</span><span class="p">(</span><span class="nc">JavalinEvent</span><span class="p">.</span><span class="nc">SERVER_START_FAILED</span><span class="p">)</span> <span class="p">{</span> <span class="o">..</span><span class="p">.</span> <span class="p">})</span>
    <span class="p">.</span><span class="nf">event</span><span class="p">(</span><span class="nc">JavalinEvent</span><span class="p">.</span><span class="nc">SERVER_STOPPING</span><span class="p">)</span> <span class="p">{</span> <span class="o">..</span><span class="p">.</span> <span class="p">})</span>
    <span class="p">.</span><span class="nf">event</span><span class="p">(</span><span class="nc">JavalinEvent</span><span class="p">.</span><span class="nc">SERVER_STOPPED</span><span class="p">)</span> <span class="p">{</span> <span class="o">..</span><span class="p">.</span> <span class="p">});</span>

<span class="n">app</span><span class="p">.</span><span class="nf">start</span><span class="p">()</span> <span class="c1">// SERVER_STARTING -&gt; (SERVER_STARTED || SERVER_START_FAILED)</span>
<span class="n">app</span><span class="p">.</span><span class="nf">stop</span><span class="p">()</span> <span class="c1">// SERVER_STOPPING -&gt; SERVER_STOPPED</span>
</code></pre></div>    </div>
  </div>
</div>

<h2 id="server-setup">Server setup</h2>

<p>Javalin runs on an embedded <a href="http://eclipse.org/jetty/">Jetty</a>.</p>

<h3 id="starting-and-stopping">Starting and stopping</h3>
<p>To start and stop the server, use the aptly named <code class="language-plaintext highlighter-rouge">start()</code> and <code class="language-plaintext highlighter-rouge">stop</code> methods.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Javalin</span> <span class="n">app</span> <span class="o">=</span> <span class="nc">Javalin</span><span class="o">.</span><span class="na">create</span><span class="o">()</span>
    <span class="o">.</span><span class="na">start</span><span class="o">()</span> <span class="c1">// start server (sync/blocking)</span>
    <span class="o">.</span><span class="na">stop</span><span class="o">()</span> <span class="c1">// stop server (sync/blocking)</span>
</code></pre></div></div>

<p>If you want to do a clean shutdown when the program is exiting, you could use:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Runtime</span><span class="o">.</span><span class="na">getRuntime</span><span class="o">().</span><span class="na">addShutdownHook</span><span class="o">(</span><span class="k">new</span> <span class="nc">Thread</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
	<span class="n">app</span><span class="o">.</span><span class="na">stop</span><span class="o">();</span>
<span class="o">}));</span>

<span class="n">app</span><span class="o">.</span><span class="na">event</span><span class="o">(</span><span class="nc">JavalinEvent</span><span class="o">.</span><span class="na">SERVER_STOPPING</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// Your code here</span>
<span class="o">}</span>

<span class="n">app</span><span class="o">.</span><span class="na">event</span><span class="o">(</span><span class="nc">JavalinEvent</span><span class="o">.</span><span class="na">SERVER_STOPPED</span><span class="o">)</span> <span class="o">{</span>
    <span class="c1">// Your code here</span>
<span class="o">}</span>
</code></pre></div></div>

<h3 id="configuration">Configuration</h3>
<p>The following snippet shows all the configuration currently available in Javalin:</p>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Javalin</span><span class="o">.</span><span class="na">create</span><span class="o">()</span> <span class="c1">// create has to be called first</span>
    <span class="o">.</span><span class="na">attribute</span><span class="o">(</span><span class="kd">class</span><span class="err">,</span> <span class="nc">object</span><span class="o">)</span> <span class="c1">// register an app attribute - since 2.3.0</span>
    <span class="o">.</span><span class="na">attribute</span><span class="o">(</span><span class="kd">class</span><span class="err">)</span> <span class="err">//</span> <span class="nc">retrieve</span> <span class="n">an</span> <span class="n">app</span> <span class="n">attribute</span> <span class="o">-</span> <span class="n">since</span> <span class="mf">2.3</span><span class="o">.</span><span class="mi">0</span>
    <span class="o">.</span><span class="na">contextPath</span><span class="o">(</span><span class="s">"/context-path"</span><span class="o">)</span> <span class="c1">// set a context path (default is "/")</span>
    <span class="o">.</span><span class="na">dontIgnoreTrailingSlashes</span><span class="o">()</span> <span class="c1">// treat '/test' and '/test/' as different URLs</span>
    <span class="o">.</span><span class="na">defaultContentType</span><span class="o">(</span><span class="n">string</span><span class="o">)</span> <span class="c1">// set a default content-type for responses</span>
    <span class="o">.</span><span class="na">disableStartupBanner</span><span class="o">()</span> <span class="c1">// remove the javalin startup banner from logs</span>
    <span class="o">.</span><span class="na">enableCaseSensitiveUrls</span><span class="o">()</span> <span class="c1">// allow urls like '/camelCasedUrl' and match on case</span>
    <span class="o">.</span><span class="na">enableCorsForOrigin</span><span class="o">(</span><span class="s">"origin"</span><span class="o">)</span> <span class="c1">// enables cors for the specified origin(s)</span>
    <span class="o">.</span><span class="na">enableAutogeneratedEtags</span><span class="o">()</span> <span class="c1">// auto-generates etags for get-requests</span>
    <span class="o">.</span><span class="na">enableDebugLogging</span><span class="o">()</span> <span class="c1">// enable extensive debug logging</span>
    <span class="o">.</span><span class="na">enableMicrometer</span><span class="o">()</span> <span class="c1">// enable micrometer support - since 2.8.0</span>
    <span class="o">.</span><span class="na">enableRouteOverview</span><span class="o">(</span><span class="s">"/path"</span><span class="o">)</span> <span class="c1">// render a HTML page showing all mapped routes</span>
    <span class="o">.</span><span class="na">enableSinglePageMode</span><span class="o">(</span><span class="s">"path"</span><span class="o">,</span> <span class="s">"filePath"</span><span class="o">)</span> <span class="c1">// catch 404s and return file-content as response body</span>
    <span class="o">.</span><span class="na">enableStaticFiles</span><span class="o">(</span><span class="s">"/public"</span><span class="o">)</span> <span class="c1">// enable static files (opt. second param Location.CLASSPATH/Location.EXTERNAL)</span>
    <span class="o">.</span><span class="na">enableWebJars</span><span class="o">()</span> <span class="c1">// enables webjars at /webjars/name/version/file.ext</span>
    <span class="o">.</span><span class="na">disableDynamicGzip</span><span class="o">()</span> <span class="c1">// don't gzip any dynamic responses (static files are still gzipped)</span>
    <span class="o">.</span><span class="na">maxBodySizeForRequestCache</span><span class="o">(</span><span class="kt">long</span><span class="o">)</span> <span class="c1">// set max body size for request cache</span>
    <span class="o">.</span><span class="na">port</span><span class="o">(</span><span class="n">port</span><span class="o">)</span> <span class="c1">// set the port</span>
    <span class="o">.</span><span class="na">register</span><span class="o">(</span><span class="n">extension</span><span class="o">)</span> <span class="c1">// register extension - since 2.5.0</span>
    <span class="o">.</span><span class="na">requestLogger</span><span class="o">(</span> <span class="o">...</span> <span class="o">)</span> <span class="c1">// see section below</span>
    <span class="o">.</span><span class="na">server</span><span class="o">(</span> <span class="o">...</span> <span class="o">)</span> <span class="c1">// see section below</span>
    <span class="o">.</span><span class="na">sessionHandler</span><span class="o">(</span> <span class="o">...</span> <span class="o">)</span> <span class="c1">// see section below</span>
    <span class="o">.</span><span class="na">start</span><span class="o">();</span> <span class="c1">// start the server (has to be called last)</span>
</code></pre></div>    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Javalin</span><span class="p">.</span><span class="nf">create</span><span class="p">().</span><span class="nf">apply</span> <span class="p">{</span> <span class="c1">// create has to be called first</span>
    <span class="nf">attribute</span><span class="p">(</span><span class="k">class</span><span class="p">,</span> <span class="k">object</span><span class="p">)</span> <span class="c1">// register an app attribute - since 2.3.0</span>
    <span class="nf">attribute</span><span class="p">(</span><span class="k">class</span><span class="p">)</span> <span class="c1">// retrieve an app attribute - since 2.3.0</span>
    <span class="nf">contextPath</span><span class="p">(</span><span class="s">"/context-path"</span><span class="p">)</span> <span class="c1">// set a context path (default is "/")</span>
    <span class="nf">dontIgnoreTrailingSlashes</span><span class="p">()</span> <span class="c1">// treat '/test' and '/test/' as different URLs</span>
    <span class="nf">defaultContentType</span><span class="p">(</span><span class="n">string</span><span class="p">)</span> <span class="c1">// set a default content-type for responses</span>
    <span class="nf">disableStartupBanner</span><span class="p">()</span> <span class="c1">// remove the javalin startup banner from logs</span>
    <span class="nf">enableAutogeneratedEtags</span><span class="p">()</span> <span class="c1">// auto-generates etags for get-requests</span>
    <span class="nf">enableCaseSensitiveUrls</span><span class="p">()</span> <span class="c1">// allow urls like '/camelCasedUrl' and match on case</span>
    <span class="nf">enableCorsForOrigin</span><span class="p">(</span><span class="s">"origin"</span><span class="p">)</span> <span class="c1">// enables cors for the specified origin(s)</span>
    <span class="nf">enableDebugLogging</span><span class="p">()</span> <span class="c1">// enable extensive debug logging</span>
    <span class="nf">enableMicrometer</span><span class="p">()</span> <span class="c1">// enable micrometer support - since 2.8.0</span>
    <span class="nf">enableRouteOverview</span><span class="p">(</span><span class="s">"/path"</span><span class="p">)</span> <span class="c1">// render a HTML page showing all mapped routes</span>
    <span class="nf">enableSinglePageMode</span><span class="p">(</span><span class="s">"path"</span><span class="p">,</span> <span class="s">"filePath"</span><span class="p">)</span> <span class="c1">// catch 404s and return file-content as response body</span>
    <span class="nf">enableStaticFiles</span><span class="p">(</span><span class="s">"/public"</span><span class="p">)</span> <span class="c1">// enable static files (opt. second param Location.CLASSPATH/Location.EXTERNAL)</span>
    <span class="nf">enableWebJars</span><span class="p">()</span> <span class="c1">// enables webjars at /webjars/name/version/file.ext</span>
    <span class="nf">disableDynamicGzip</span><span class="p">()</span> <span class="c1">// don't gzip any dynamic responses (static files are still gzipped)</span>
    <span class="nf">maxBodySizeForRequestCache</span><span class="p">(</span><span class="n">long</span><span class="p">)</span> <span class="c1">// set max body size for request cache</span>
    <span class="nf">port</span><span class="p">(</span><span class="n">port</span><span class="p">)</span> <span class="c1">// set the port</span>
    <span class="nf">register</span><span class="p">(</span><span class="n">extension</span><span class="p">)</span> <span class="c1">// register extension - since 2.5.0</span>
    <span class="nf">requestLogger</span><span class="p">(</span> <span class="o">..</span><span class="p">.</span> <span class="p">)</span> <span class="c1">// see section below</span>
    <span class="nf">server</span><span class="p">(</span> <span class="o">..</span><span class="p">.</span> <span class="p">)</span> <span class="c1">// see section below</span>
    <span class="nf">sessionHandler</span><span class="p">(</span> <span class="o">..</span><span class="p">.</span> <span class="p">)</span> <span class="c1">// see section below</span>
<span class="p">}.</span><span class="nf">start</span><span class="p">()</span> <span class="c1">// start the server (has to be called last)</span>
</code></pre></div>    </div>
  </div>
</div>

<p>Any argument to <code class="language-plaintext highlighter-rouge">contextPath()</code> will be normalized to the form <code class="language-plaintext highlighter-rouge">/path</code> (slash, path, no-slash)</p>

<h3 id="requestlogger">RequestLogger</h3>
<p>You can add a custom RequestLogger by calling <code class="language-plaintext highlighter-rouge">app.requestLogger()</code>:</p>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="o">.</span><span class="na">requestLogger</span><span class="o">((</span><span class="n">ctx</span><span class="o">,</span> <span class="n">timeMs</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="nc">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="n">ctx</span><span class="o">.</span><span class="na">method</span><span class="o">()</span> <span class="o">+</span> <span class="s">" "</span>  <span class="o">+</span> <span class="n">ctx</span><span class="o">.</span><span class="na">path</span><span class="o">()</span> <span class="o">+</span> <span class="s">" took "</span> <span class="o">+</span> <span class="n">timeMs</span> <span class="o">+</span> <span class="s">" ms"</span><span class="o">);</span>
    <span class="c1">// prints "GET /hello took 4.5 ms"</span>
<span class="o">})</span>
</code></pre></div>    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="p">.</span><span class="nf">requestLogger</span> <span class="p">{</span> <span class="n">ctx</span><span class="p">,</span> <span class="n">timeMs</span> <span class="p">-&gt;</span>
    <span class="nf">println</span><span class="p">(</span><span class="s">"${ctx.method()} ${ctx.path()} took $timeMs ms"</span><span class="p">)</span>
    <span class="c1">// prints "GET /hello took 4.5 ms"</span>
<span class="p">}</span>
</code></pre></div>    </div>
  </div>
</div>

<h3 id="custom-server">Custom server</h3>
<p>If you need to customize the embedded server, you can call the <code class="language-plaintext highlighter-rouge">app.server()</code> method:</p>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="o">.</span><span class="na">server</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="nc">Server</span> <span class="n">server</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Server</span><span class="o">();</span>
    <span class="c1">// do whatever you want here</span>
    <span class="k">return</span> <span class="n">server</span><span class="o">;</span>
<span class="o">});</span>
</code></pre></div>    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="p">.</span><span class="nf">server</span> <span class="p">{</span>
    <span class="kd">val</span> <span class="py">server</span> <span class="p">=</span> <span class="nc">Server</span><span class="p">()</span>
    <span class="c1">// do whatever you want here</span>
    <span class="n">server</span>
<span class="p">}</span>
</code></pre></div>    </div>
  </div>
</div>

<h4 id="custom-sessionhandler">Custom SessionHandler</h4>

<p>You can configure the <code class="language-plaintext highlighter-rouge">SessionHandler</code> by calling <code class="language-plaintext highlighter-rouge">app.sessionHandler(...)</code>.</p>

<p>If you want to persist sessions to the file system, you can use a <code class="language-plaintext highlighter-rouge">FileSessionDataStore</code>:</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">private</span> <span class="k">fun</span> <span class="nf">fileSessionHandler</span><span class="p">()</span> <span class="p">=</span> <span class="nc">SessionHandler</span><span class="p">().</span><span class="nf">apply</span> <span class="p">{</span>
    <span class="n">httpOnly</span> <span class="p">=</span> <span class="k">true</span>
    <span class="n">sessionCache</span> <span class="p">=</span> <span class="nc">DefaultSessionCache</span><span class="p">(</span><span class="k">this</span><span class="p">).</span><span class="nf">apply</span> <span class="p">{</span>
        <span class="n">sessionDataStore</span> <span class="p">=</span> <span class="nc">FileSessionDataStore</span><span class="p">().</span><span class="nf">apply</span> <span class="p">{</span>
            <span class="kd">val</span> <span class="py">baseDir</span> <span class="p">=</span> <span class="nc">File</span><span class="p">(</span><span class="nc">System</span><span class="p">.</span><span class="nf">getProperty</span><span class="p">(</span><span class="s">"java.io.tmpdir"</span><span class="p">))</span>
            <span class="n">storeDir</span> <span class="p">=</span> <span class="nc">File</span><span class="p">(</span><span class="n">baseDir</span><span class="p">,</span> <span class="s">"javalin-session-store"</span><span class="p">).</span><span class="nf">apply</span> <span class="p">{</span> <span class="nf">mkdir</span><span class="p">()</span> <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div></div>

<p>Read more about how to configure sessions in
<a href="https://www.eclipse.org/jetty/documentation/9.4.x/session-management.html">Jetty’s documentation</a>.</p>

<h4 id="custom-jetty-handlers">Custom jetty handlers</h4>
<p>You can configure your embedded jetty-server with a handler-chain
(<a href="https://github.com/javalin/javalin/blob/master/src/test/java/io/javalin/TestCustomJetty.kt#L46-L64">example</a>),
and Javalin will attach it’s own handlers to the end of this chain.</p>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">StatisticsHandler</span> <span class="n">statisticsHandler</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">StatisticsHandler</span><span class="o">();</span>

<span class="nc">Javalin</span><span class="o">.</span><span class="na">create</span><span class="o">()</span>
    <span class="o">.</span><span class="na">server</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
        <span class="nc">Server</span> <span class="n">server</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Server</span><span class="o">();</span>
        <span class="n">server</span><span class="o">.</span><span class="na">setHandler</span><span class="o">(</span><span class="n">statisticsHandler</span><span class="o">);</span>
        <span class="k">return</span> <span class="n">server</span><span class="o">;</span>
    <span class="o">})</span>
    <span class="o">.</span><span class="na">start</span><span class="o">();</span>
</code></pre></div>    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="kd">val</span> <span class="py">statisticsHandler</span> <span class="p">=</span> <span class="nc">StatisticsHandler</span><span class="p">()</span>

<span class="nc">Javalin</span><span class="p">.</span><span class="nf">create</span><span class="p">().</span><span class="nf">apply</span> <span class="p">{</span>
    <span class="nf">server</span> <span class="p">{</span>
        <span class="nc">Server</span><span class="p">(</span><span class="n">queuedThreadPool</span><span class="p">).</span><span class="nf">apply</span> <span class="p">{</span>
            <span class="n">handler</span> <span class="p">=</span> <span class="n">statisticsHandler</span>
        <span class="p">}</span>
    <span class="p">}</span>
<span class="p">}.</span><span class="nf">start</span><span class="p">();</span>
</code></pre></div>    </div>
  </div>
</div>

<h3 id="sslhttp2">SSL/HTTP2</h3>

<p>To configure SSL or HTTP2 you need to use a custom server (see previous section).<br />
An example of a custom server with SSL can be found in the examples,
<a href="https://github.com/javalin/javalin/blob/master/src/test/java/io/javalin/examples/HelloWorldSecure.java#L24-L32">HelloWorldSecure</a>.</p>

<p>A custom HTTP2 server is a bit more work to set up, but we have a repo with a
fully functioning example server in both Kotlin and Java: <a href="https://github.com/tipsy/javalin-http2-example">javalin-http2-example</a></p>

<h3 id="static-files">Static Files</h3>
<p>You can enabled static file serving by doing <code class="language-plaintext highlighter-rouge">app.enableStaticFiles("/classpath-folder")</code>, and/or
<code class="language-plaintext highlighter-rouge">app.enableStaticFiles("/folder", Location.EXTERNAL)</code>.
Static resource handling is done <strong>after</strong> endpoint matching,
meaning your self-defined endpoints have higher priority. The process looks like this:</p>
<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>before-handlers
endpoint-handlers
<span class="k">if </span>no-endpoint-handler-found
    static-file-handler
    <span class="k">if </span>static-file-found
        static-file-handler send response
    <span class="k">else
        </span>response is 404
after-handlers
</code></pre></div></div>
<p>If you do <code class="language-plaintext highlighter-rouge">app.enableStaticFiles("/classpath-folder")</code>.
Your <code class="language-plaintext highlighter-rouge">index.html</code> file at <code class="language-plaintext highlighter-rouge">/classpath-folder/index.html</code> will be available
at <code class="language-plaintext highlighter-rouge">http://{host}:{port}/index.html</code> and <code class="language-plaintext highlighter-rouge">http://{host}:{port}/</code>.</p>

<p>You can call <code class="language-plaintext highlighter-rouge">enableStaticFiles</code> multiple times to set up multiple handlers.</p>

<p>WebJars can be enabled by calling <code class="language-plaintext highlighter-rouge">enableWebJars()</code>, they will be available at <code class="language-plaintext highlighter-rouge">/webjars/name/version/file.ext</code>.</p>

<h4 id="caching">Caching</h4>
<p>Javalin serves static files with the <code class="language-plaintext highlighter-rouge">Cache-Control</code> header set to <code class="language-plaintext highlighter-rouge">max-age=0</code>. This means
that browsers will always ask if the file is still valid. If the version the browser has in cache
is the same as the version on the server, Javalin will respond with a <code class="language-plaintext highlighter-rouge">304 Not modified</code> status,
and no response body. This tells the browser that it’s okay to keep using the cached version.
If you want to skip this check, you can put files in a dir called <code class="language-plaintext highlighter-rouge">immutable</code>,
and Javalin will set <code class="language-plaintext highlighter-rouge">max-age=31622400</code>, which means that the browser will wait
one year before checking if the file is still valid.
This should only be used for versioned library files, like <code class="language-plaintext highlighter-rouge">vue-2.4.2.min.js</code>, to avoid
the browser ending up with an outdated version if you change the file content.
WebJars also use <code class="language-plaintext highlighter-rouge">max-age=31622400</code>, as the version number is always part of the path.</p>

<h2 id="faq">FAQ</h2>
<p>Frequently asked questions</p>

<h3 id="javadoc">Javadoc</h3>
<p>There is a Javadoc available at <a href="http://javadoc.io/doc/io.javalin/javalin">javadoc.io</a>.
Please contribute to the Javadoc if you can.</p>

<h3 id="deploying">Deploying</h3>
<p>To deploy Javalin, simply create a <a href="https://maven.apache.org/plugins/maven-assembly-plugin/usage.html">jar with dependencies</a>,
then launch the jar with <code class="language-plaintext highlighter-rouge">java -jar filename.jar</code>. That’s it.
Javalin has an embedded server, so you don’t need an application server.
There is also a tutorial on <a href="/tutorials/heroku">deploying Javalin to Heroku</a>.</p>

<h3 id="uploads">Uploads</h3>
<p>Uploaded files are easily accessible via <code class="language-plaintext highlighter-rouge">ctx.uploadedFiles()</code>:</p>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="o">.</span><span class="na">post</span><span class="o">(</span><span class="s">"/upload"</span><span class="o">,</span> <span class="n">ctx</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="n">ctx</span><span class="o">.</span><span class="na">uploadedFiles</span><span class="o">(</span><span class="s">"files"</span><span class="o">).</span><span class="na">forEach</span><span class="o">(</span><span class="n">file</span> <span class="o">-&gt;</span> <span class="o">{</span>
        <span class="nc">FileUtil</span><span class="o">.</span><span class="na">streamToFile</span><span class="o">(</span><span class="n">file</span><span class="o">.</span><span class="na">getContent</span><span class="o">(),</span> <span class="s">"upload/"</span> <span class="o">+</span> <span class="n">file</span><span class="o">.</span><span class="na">getName</span><span class="o">())</span>
    <span class="o">});</span>
<span class="o">});</span>
</code></pre></div>    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">app</span><span class="p">.</span><span class="nf">post</span><span class="p">(</span><span class="s">"/upload"</span><span class="p">)</span> <span class="p">{</span> <span class="n">ctx</span> <span class="p">-&gt;</span>
    <span class="n">ctx</span><span class="p">.</span><span class="nf">uploadedFiles</span><span class="p">(</span><span class="s">"files"</span><span class="p">).</span><span class="nf">forEach</span> <span class="p">{</span> <span class="p">(</span><span class="n">contentType</span><span class="p">,</span> <span class="n">content</span><span class="p">,</span> <span class="n">name</span><span class="p">,</span> <span class="n">extension</span><span class="p">)</span> <span class="p">-&gt;</span>
        <span class="nc">FileUtil</span><span class="p">.</span><span class="nf">streamToFile</span><span class="p">(</span><span class="n">content</span><span class="p">,</span> <span class="s">"upload/$name"</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>    </div>
  </div>
</div>

<p>The corresponding HTML might look something like this:</p>
<pre><code class="language-markup">&lt;form method="post" action="/upload" enctype="multipart/form-data"&gt;
    &lt;input type="file" name="files" multiple&gt;
    &lt;button&gt;Submit&lt;/button&gt;
&lt;/form&gt;
</code></pre>

<h3 id="using-javalin-without-jetty">Using Javalin without Jetty</h3>
<p>If you want to use Javalin with an application server or a servlet container, such as Tomcat, WebLocic, etc,
you can use <code class="language-plaintext highlighter-rouge">EmbeddedJavalin.createServlet()</code>:</p>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@WebServlet</span><span class="o">(</span><span class="n">urlPatterns</span> <span class="o">=</span> <span class="o">[</span><span class="s">"/rest/*"</span><span class="o">],</span> <span class="n">name</span> <span class="o">=</span> <span class="s">"MyServlet"</span><span class="o">)</span>
<span class="kd">class</span> <span class="nc">MyServlet</span> <span class="kd">extends</span> <span class="nf">HttpServlet</span><span class="o">()</span> <span class="o">{</span>
    <span class="nc">JavalinServlet</span> <span class="n">javalin</span> <span class="o">=</span> <span class="nc">EmbeddedJavalin</span><span class="o">()</span>
        <span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"/rest"</span><span class="o">)</span> <span class="o">{</span> <span class="n">ctx</span> <span class="o">-&gt;</span> <span class="n">ctx</span><span class="o">.</span><span class="na">result</span><span class="o">(</span><span class="s">"Hello!"</span><span class="o">)</span> <span class="o">}</span>
        <span class="o">.</span><span class="na">createServlet</span><span class="o">()</span>
    <span class="nd">@Override</span>
    <span class="kt">void</span> <span class="nf">service</span><span class="o">(</span><span class="nc">HttpServletRequest</span> <span class="n">req</span><span class="o">,</span> <span class="nc">HttpServletResponse</span> <span class="n">resp</span><span class="o">)</span> <span class="o">{</span>
        <span class="n">javalin</span><span class="o">.</span><span class="na">service</span><span class="o">(</span><span class="n">req</span><span class="o">,</span> <span class="n">resp</span><span class="o">)</span>
    <span class="o">}</span>
<span class="o">}</span>
</code></pre></div>    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@WebServlet</span><span class="p">(</span><span class="n">urlPatterns</span> <span class="p">=</span> <span class="p">[</span><span class="s">"/rest/*"</span><span class="p">],</span> <span class="n">name</span> <span class="p">=</span> <span class="s">"MyServlet"</span><span class="p">)</span>
<span class="kd">class</span> <span class="nc">MyServlet</span> <span class="p">:</span> <span class="nc">HttpServlet</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">val</span> <span class="py">javalin</span> <span class="p">=</span> <span class="nc">EmbeddedJavalin</span><span class="p">()</span>
        <span class="p">.</span><span class="k">get</span><span class="p">(</span><span class="s">"/rest"</span><span class="p">)</span> <span class="p">{</span> <span class="n">ctx</span> <span class="p">-&gt;</span> <span class="n">ctx</span><span class="p">.</span><span class="nf">result</span><span class="p">(</span><span class="s">"Hello!"</span><span class="p">)</span> <span class="p">}</span>
        <span class="p">.</span><span class="nf">createServlet</span><span class="p">()</span>

    <span class="k">override</span> <span class="k">fun</span> <span class="nf">service</span><span class="p">(</span><span class="n">req</span><span class="p">:</span> <span class="nc">HttpServletRequest</span><span class="p">,</span> <span class="n">resp</span><span class="p">:</span> <span class="nc">HttpServletResponse</span><span class="p">)</span> <span class="p">{</span>
        <span class="n">javalin</span><span class="p">.</span><span class="nf">service</span><span class="p">(</span><span class="n">req</span><span class="p">,</span> <span class="n">resp</span><span class="p">)</span>
    <span class="p">}</span>
<span class="p">}</span>
</code></pre></div>    </div>
  </div>
</div>

<p>The <code class="language-plaintext highlighter-rouge">createServlet()</code> method is the same method that Javalin uses internally when attaching itself to Jetty.
Jetty server methods like <code class="language-plaintext highlighter-rouge">app.contextPath()</code>, <code class="language-plaintext highlighter-rouge">app.start()</code>, etc, will throw exceptions if called on <code class="language-plaintext highlighter-rouge">EmbeddedJavalin</code>.
You have to manually exclude Jetty from your build files if you want to use this approach.</p>

<h3 id="logging">Adding a logger</h3>

<p>If you’re reading this, you’ve probably seen the following message while running Javalin:</p>

<div class="language-text highlighter-rouge"><div class="highlight"><pre class="highlight"><code>SLF4J: Failed to load class "org.slf4j.impl.StaticLoggerBinder".
SLF4J: Defaulting to no-operation (NOP) logger implementation
SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.
</code></pre></div></div>

<p>This is nothing to worry about.</p>

<p>Like a lot of other Java projects, Javalin does not have a logger included,
which means that you have to add your own logger. If you don’t know/care
a lot about Java loggers, the easiest way to fix this is to add the following
dependency to your project:</p>

<pre><code class="language-markup">&lt;dependency&gt;
    &lt;groupId&gt;org.slf4j&lt;/groupId&gt;
    &lt;artifactId&gt;slf4j-simple&lt;/artifactId&gt;
    &lt;version&gt;1.7.36&lt;/version&gt;
&lt;/dependency&gt;
</code></pre>

<p>This will remove the warning from SLF4J, and enable
helpful debug messages while running Javalin.</p>

<h3 id="asynchronous-requests">Asynchronous requests</h3>
<p>While the default threadpool (200 threads) is enough for most use cases,
sometimes slow operations should be run asynchronously. Luckily it’s very easy in Javalin, just
pass a <code class="language-plaintext highlighter-rouge">CompletableFuture</code> to <code class="language-plaintext highlighter-rouge">ctx.result()</code>:</p>

<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">import</span> <span class="nn">io.javalin.Javalin</span>

<span class="k">fun</span> <span class="nf">main</span><span class="p">(</span><span class="n">args</span><span class="p">:</span> <span class="nc">Array</span><span class="p">&lt;</span><span class="nc">String</span><span class="p">&gt;)</span> <span class="p">{</span>
    <span class="kd">val</span> <span class="py">app</span> <span class="p">=</span> <span class="nc">Javalin</span><span class="p">.</span><span class="nf">create</span><span class="p">().</span><span class="nf">start</span><span class="p">(</span><span class="mi">7000</span><span class="p">)</span>
    <span class="n">app</span><span class="p">.</span><span class="k">get</span><span class="p">(</span><span class="s">"/"</span><span class="p">)</span> <span class="p">{</span> <span class="n">ctx</span> <span class="p">-&gt;</span> <span class="n">ctx</span><span class="p">.</span><span class="nf">result</span><span class="p">(</span><span class="nf">getFuture</span><span class="p">())</span> <span class="p">}</span>
<span class="p">}</span>

<span class="c1">// hopefully your future is less pointless than this:</span>
<span class="k">private</span> <span class="k">fun</span> <span class="nf">getFuture</span><span class="p">()</span> <span class="p">=</span> <span class="nc">CompletableFuture</span><span class="p">&lt;</span><span class="nc">String</span><span class="p">&gt;().</span><span class="nf">apply</span> <span class="p">{</span>
    <span class="nc">Executors</span><span class="p">.</span><span class="nf">newSingleThreadScheduledExecutor</span><span class="p">().</span><span class="nf">schedule</span><span class="p">({</span> <span class="k">this</span><span class="p">.</span><span class="nf">complete</span><span class="p">(</span><span class="s">"Hello World!"</span><span class="p">)</span> <span class="p">},</span> <span class="mi">1</span><span class="p">,</span> <span class="nc">TimeUnit</span><span class="p">.</span><span class="nc">SECONDS</span><span class="p">)</span>
<span class="p">}</span>
</code></pre></div></div>
<div class="comment">Synonyms for ctrl+f: Async, CompletableFuture, Future, Concurrent, Concurrency</div>

<p>You can only set future results in endpoint handlers (get/post/put/etc).<br />
After-handlers, exception-handlers and error-handlers run like you’d expect them to after
the future has been resolved or rejected.</p>

<h4 id="async-timeout-settings">Async timeout settings</h4>
<p>Jetty has a default timeout of 30 seconds for async requests (this is not related to the <code class="language-plaintext highlighter-rouge">idleTimeout</code> of a connector).
If you wait for processes that run for longer than this, you can configure the async request manually by calling <code class="language-plaintext highlighter-rouge">ctx.req.startAsync()</code>.
For more information, see <a href="https://github.com/javalin/javalin/issues/448">issue 448</a>.</p>

<h3 id="configuring-the-json-mapper">Configuring the JSON mapper</h3>

<p>The JSON mapper can be configured like this:</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Gson</span> <span class="n">gson</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">GsonBuilder</span><span class="o">().</span><span class="na">create</span><span class="o">();</span>
<span class="nc">JavalinJson</span><span class="o">.</span><span class="na">setFromJsonMapper</span><span class="o">(</span><span class="nl">gson:</span><span class="o">:</span><span class="n">fromJson</span><span class="o">);</span>
<span class="nc">JavalinJson</span><span class="o">.</span><span class="na">setToJsonMapper</span><span class="o">(</span><span class="nl">gson:</span><span class="o">:</span><span class="n">toJson</span><span class="o">);</span>
</code></pre></div></div>

<h4 id="configuring-jackson">Configuring Jackson</h4>

<p>The JSON mapper uses Jackson by default, which can be configured by calling:</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">JavalinJackson</span><span class="o">.</span><span class="na">configure</span><span class="o">(</span><span class="n">objectMapper</span><span class="o">)</span>
</code></pre></div></div>

<p>Note that these are global settings, and can’t be configured per instance of Javalin.</p>

<h3 id="adding-other-servlets-and-filters-to-javalin">Adding other Servlets and Filters to Javalin</h3>
<p>Javalin is designed to work with other <code class="language-plaintext highlighter-rouge">Servlet</code> and <code class="language-plaintext highlighter-rouge">Filter</code> instances running on the Jetty Server.
Filters are pretty straighforward to add, since they don’t finish the request. If you need to add a serlvet
there’s an example in the repo:
<a href="https://github.com/javalin/javalin/blob/master/src/test/java/io/javalin/examples/HelloWorldServlet.java#L19-L27">/src/test/java/io/javalin/examples/HelloWorldServlet.java#L19-L27</a></p>

<h3 id="views-and-templates">Views and Templates</h3>
<p>Javalin looks for templates/markdown files in <code class="language-plaintext highlighter-rouge">src/resources</code>,
and uses the correct rendering engine based on the extension of your template.
Javalin currently supports six template engines (see below), as well as markdown.
You can also register your own rendering engine.</p>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ctx</span><span class="o">.</span><span class="na">render</span><span class="o">(</span><span class="s">"/templateFile.ext"</span><span class="o">,</span> <span class="n">model</span><span class="o">(</span><span class="s">"firstName"</span><span class="o">,</span> <span class="s">"John"</span><span class="o">,</span> <span class="s">"lastName"</span><span class="o">,</span> <span class="s">"Doe"</span><span class="o">))</span>
</code></pre></div>    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">ctx</span><span class="p">.</span><span class="nf">render</span><span class="p">(</span><span class="s">"/templateFile.ext"</span><span class="p">,</span> <span class="nf">mapOf</span><span class="p">(</span><span class="s">"firstName"</span> <span class="n">to</span> <span class="s">"John"</span><span class="p">,</span> <span class="s">"lastName"</span> <span class="n">to</span> <span class="s">"Doe"</span><span class="p">))</span>
</code></pre></div>    </div>
  </div>
</div>

<p>Register:</p>
<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">JavalinRenderer</span><span class="o">.</span><span class="na">register</span><span class="o">(</span><span class="nc">JavalinPebble</span><span class="o">.</span><span class="na">INSTANCE</span><span class="o">,</span> <span class="s">".peb"</span><span class="o">,</span> <span class="s">".pebble"</span><span class="o">);</span>

<span class="nc">JavalinRenderer</span><span class="o">.</span><span class="na">register</span><span class="o">((</span><span class="n">filePath</span><span class="o">,</span> <span class="n">model</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="k">return</span> <span class="nc">MyRenderer</span><span class="o">.</span><span class="na">render</span><span class="o">(</span><span class="n">filePath</span><span class="o">,</span> <span class="n">model</span><span class="o">);</span>
<span class="o">},</span> <span class="s">".ext"</span><span class="o">);</span>
</code></pre></div></div>

<p>Configure:</p>
<div class="language-kotlin highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">JavalinThymeleaf</span><span class="p">.</span><span class="nf">configure</span><span class="p">(</span><span class="n">templateEngine</span><span class="p">)</span>
<span class="nc">JavalinVelocity</span><span class="p">.</span><span class="nf">configure</span><span class="p">(</span><span class="n">velocityEngine</span><span class="p">)</span>
<span class="nc">JavalinFreemarker</span><span class="p">.</span><span class="nf">configure</span><span class="p">(</span><span class="n">configuration</span><span class="p">)</span>
<span class="nc">JavalinMustache</span><span class="p">.</span><span class="nf">configure</span><span class="p">(</span><span class="n">mustacheFactory</span><span class="p">)</span>
<span class="nc">JavalinJtwig</span><span class="p">.</span><span class="nf">configure</span><span class="p">(</span><span class="n">configuration</span><span class="p">)</span>
<span class="nc">JavalinPebble</span><span class="p">.</span><span class="nf">configure</span><span class="p">(</span><span class="n">configuration</span><span class="p">)</span>
<span class="nc">JavalinCommonmark</span><span class="p">.</span><span class="nf">configure</span><span class="p">(</span><span class="n">htmlRenderer</span><span class="p">,</span> <span class="n">markdownParser</span><span class="p">)</span>
</code></pre></div></div>
<p>Note that these are global settings, and can’t be configured per instance of Javalin.</p>

<h3 id="timeoutexceptions-and-closedchannelexceptions">TimeoutExceptions and ClosedChannelExceptions</h3>
<p>If you encounter <code class="language-plaintext highlighter-rouge">TimeoutExceptions</code> and <code class="language-plaintext highlighter-rouge">ClosedChannelExceptions</code> in your DEBUG logs,
this is nothing to worry about. Typically, a browser will keep the HTTP connection open until the
server terminates it. When this happens is decided by the server’s <code class="language-plaintext highlighter-rouge">idleTimeout</code> setting,
which is 30 seconds by default in Jetty/Javalin. This is not a bug.</p>

        <script src="/js/anchor.min.js"></script>
        <script>
            anchors.options.placement = 'left';
            anchors.add();
        </script>

    </main>
    <footer>
        Javalin is a Java and Kotlin web framework, open sourced under the
        <a href="https://tldrlegal.com/license/apache-license-2.0-(apache-2.0)">Apache 2</a> license
        | <a href="/download">Download</a>
        | <a href="/about">About</a>
        | <a href="/news">News</a>
        | <a href="/about#contact">Contact</a>
        | <a href="/for-educators">For educators</a>
    </footer>
    <div id="star-begging">
    <style>
        #star-begging {
            transition: transform .25s;
            transform: scale(0);
            border-radius: 8px;
            position: fixed;
            bottom: 32px;
            right: 32px;
            padding: 20px 40px 16px 20px;
            background: #fff;
            box-shadow: 0 1px 20px rgba(0, 0, 0, 0.15);
            z-index: 9999998;
        }
        #star-begging.in {
            transform: scale(1);
        }
        #star-begging.out {
            transform: translateX(400px);
        }
        #star-begging p {
            font-size: 16px;
            margin: 0 0 15px;
        }
        #star-begging .close {
            position: absolute;
            right: 20px;
            top: 20px;
            height: 40px;
            width: 40px;
            line-height: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            font-family: arial, sans-serif;
            cursor: pointer;
            background: rgba(0, 0, 0, 0.05);
            border-radius: 5px;
        }
    </style>
    <p>
        Like Javalin?
        <br>Star us 😊
    </p>
    <span class="close">×</span>
    <iframe id="starFrame" class="githubStar" title="github-stars"
            src="https://ghbtns.com/github-btn.html?user=javalin&amp;repo=javalin&amp;type=star&amp;count=true&size=large"
            frameborder="0" scrolling="0" width="150px" height="30px">
    </iframe>
    <script>
        if (localStorage.getItem("dismissed") !== "true" && document.getElementById("notification-banner") === null) {
            setTimeout(function () {
                document.querySelector("#star-begging").classList.add("in");
            }, 15000);
            document.querySelector("#star-begging .close").addEventListener("click", function () {
                document.querySelector("#star-begging").classList.add("out");
                localStorage.setItem("dismissed", "true");
            });
        }
    </script>
</div>

    <script src="/js/scripts.js"></script>
</body>
</html>
