<!DOCTYPE html>
<html lang="en">
<head>
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-54137818-11"></script>
<script>
    window.dataLayer = window.dataLayer || [];
    function gtag() { dataLayer.push(arguments); }
    gtag('js', new Date());
    gtag('config', 'UA-54137818-11', {'anonymize_ip': true});
</script>
    <meta charset="utf-8">
    <link href="https://fonts.googleapis.com/css?family=Oxygen+Mono|Roboto+Slab:500,700&display=swap" rel="stylesheet">
    <meta property="og:title" content="Javalin 4.0 stable is ready! - Javalin - A lightweight Java and Kotlin web framework. Create REST APIs in Java or Kotlin easily.">
    <meta property="og:site_name" content="Javalin">
    <meta property="og:url" content="https://javalin.io">
    <meta property="og:description" content="ForewordJavalin is a very lightweight Java and Kotlin web framework which focuses on simplicity and Java/Kotlin interoperability.The codebase is about 7000 l...">
    <meta property="og:image" content="https://javalin.io/img/javalin.png">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="google-site-verification" content="liMtSlffOZROWLqoiOZdSx-luH9_Siq5-Ot6xqHZwq8">
    <title>
        Javalin 4.0 stable is ready! - Javalin - A lightweight Java and Kotlin web framework
    </title>
    <meta name="description" content="ForewordJavalin is a very lightweight Java and Kotlin web framework which focuses on simplicity and Java/Kotlin interoperability.The codebase is about 7000 l...">
    <link rel="canonical" href="5//news/javalin-4.0.0-stable.html">
    <link rel="shortcut icon" type="image/png" href="/img/favicon.png">
    <link rel="stylesheet" href="/css/main.css">
    <style>/* Styles that affect the length of the document */
p code,
li code {
    font-size: 90%;
    letter-spacing: -0.5px;
    border: 1px solid #ccd;
    background: #f5f5f7;
    padding: 1px 3px;
}

.multitab-code pre {
    margin-top: 0;
    border-radius: 0 0 5px 5px;
}

.multitab-code div[data-tab] {
    display: none;
}

:target {
    scroll-margin-top: 108px;
}

.anchorjs-link {
    transition: all .25s linear;
  }
  
*:hover > .anchorjs-link {
    margin-left: -1.125em !important;
 }</style>
</head>
<body>
    <a id="fork-me" href="https://github.com/javalin/javalin" target="_blank">
    <img style="position:fixed;top:0;right:0;border:0;z-index:99999" src="data:image/png;base64,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" alt="Fork me on GitHub">
</a>
    <header class="top-nav-header">
        <nav class="width-limit">
            <a id="logo" href="/" aria-label="Javalin">
                <img src="/img/logo.svg" alt="Javalin">
            </a>
            <ul>
                <li><a href="/documentation">Docs</a></li>
                <li><a href="/tutorials">Tutorials</a></li>
                <li><a href="/plugins">Plugins</a></li>
                <li><a href="/community">Community</a></li>
            </ul>
        </nav>
    </header>
    <main class="width-limit">
        <article class="news" itemscope itemtype="http://schema.org/BlogPosting">
    <h1 class="no-margin-top" itemprop="name headline">Javalin 4.0.0 released</h1>
    <div class="subtitle">Javalin 4.0 stable is ready! (<time datetime="2021-09-13T00:00:00+00:00" itemprop="datePublished">Sep 13, 2021</time>)</div>
    
    <div class="post-content" itemprop="articleBody">
        <h2 id="foreword">Foreword</h2>
<p>Javalin is a very lightweight Java and Kotlin web framework which focuses on simplicity and Java/Kotlin interoperability.
The codebase is about <em>7000 lines of mixed Java and Kotlin code</em>, and about <em>10 000 lines of test</em>.<br />
The project would not have been possible without JVM open-source community,
which is one of the things that help make the JVM ecosystem the best in the world.
Javalin has been around for four years now, and at the time of writing has <em>135</em> contributors,
<em>431 forks</em>, and about <em>130 000 monthly downloads</em>. <em>530 pull requests</em> have been merged and <em>828 issues</em> have been closed since 2017.
<strong>Okay, enough fluff, let’s get to it</strong>!</p>

<h2 id="hello-world">Hello World</h2>
<p>Javalin’s main goal is simplicity and developer productivity.
The “Hello World” example reflects that:</p>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
    <span class="n">var</span> <span class="n">app</span> <span class="o">=</span> <span class="n">Javalin</span><span class="o">.</span><span class="na">create</span><span class="o">().</span><span class="na">start</span><span class="o">(</span><span class="mi">7000</span><span class="o">);</span>
    <span class="n">app</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"/"</span><span class="o">,</span> <span class="n">ctx</span> <span class="o">-&gt;</span> <span class="n">ctx</span><span class="o">.</span><span class="na">result</span><span class="o">(</span><span class="s">"Hello World"</span><span class="o">));</span>
<span class="o">}</span>
</code></pre>
    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><pre class="highlight"><code><span class="k">fun</span> <span class="nf">main</span><span class="p">()</span> <span class="p">{</span>
    <span class="kd">val</span> <span class="py">app</span> <span class="p">=</span> <span class="n">Javalin</span><span class="p">.</span><span class="n">create</span><span class="p">().</span><span class="n">start</span><span class="p">(</span><span class="m">7000</span><span class="p">)</span>
    <span class="n">app</span><span class="p">.</span><span class="k">get</span><span class="p">(</span><span class="s">"/"</span><span class="p">)</span> <span class="p">{</span> <span class="n">it</span><span class="p">.</span><span class="n">result</span><span class="p">(</span><span class="s">"Hello World"</span><span class="p">)</span> <span class="p">}</span>
<span class="p">}</span>
</code></pre>
    </div>
  </div>
</div>

<h2 id="setting-different-results">Setting different results</h2>
<p>The simplest way to send content to a client is through <code class="highlighter-rouge">ctx.result("String")</code>,
which just sends a <code class="highlighter-rouge">text/plain</code> result.
Javalin has support for many other result types:</p>
<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">ctx</span><span class="o">.</span><span class="na">json</span><span class="o">(</span><span class="n">myJson</span><span class="o">));</span>                <span class="c1">// serializes object to JSON string and writes to client</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">jsonStream</span><span class="o">(</span><span class="n">myJson</span><span class="o">));</span>          <span class="c1">// serializes JSON directly to client (nothing buffered in memory)</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">seekableStream</span><span class="o">(</span><span class="n">myMediaFile</span><span class="o">));</span> <span class="c1">// stream audio and video to client (supports seeking/skipping)</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">future</span><span class="o">(</span><span class="n">myFuture</span><span class="o">));</span>            <span class="c1">// let's Javalin handle request asynchronously (supports callbacks)</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">render</span><span class="o">(</span><span class="s">"/file.ext"</span><span class="o">,</span> <span class="n">model</span><span class="o">));</span>  <span class="c1">// render template or markdown file</span>
</code></pre>
</div>

<h2 id="handling-client-data">Handling client data</h2>
<p>Javalin makes it easy to extract and validate client data through dedicated methods:</p>
<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="c1">// basic methods</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">body</span><span class="o">();</span>                           <span class="c1">// get the request body as a string (caches the body)</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">formParam</span><span class="o">(</span><span class="s">"name"</span><span class="o">);</span>                <span class="c1">// get a form parameter</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">queryParam</span><span class="o">(</span><span class="s">"name"</span><span class="o">);</span>               <span class="c1">// get a query parameter</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">uploadedFile</span><span class="o">(</span><span class="s">"name"</span><span class="o">);</span>             <span class="c1">// get an uploaded file</span>

<span class="c1">// JSON methods</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">bodyAsClass</span><span class="o">(</span><span class="n">clazz</span><span class="o">);</span>               <span class="c1">// deserialize ctx.body() to class</span>
<span class="n">ctx</span><span class="o">.</span><span class="na">bodyStreamAsClass</span><span class="o">(</span><span class="n">clazz</span><span class="o">);</span>         <span class="c1">// consume inputstream from request and deserialize to class</span>

<span class="c1">// validation</span>
<span class="n">Integer</span> <span class="n">age</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="na">queryParamAsClass</span><span class="o">(</span><span class="s">"age"</span><span class="o">,</span> <span class="n">Integer</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>  <span class="c1">// wraps parameter in Validator</span>
    <span class="o">.</span><span class="na">check</span><span class="o">(</span><span class="n">age</span> <span class="o">-&gt;</span> <span class="n">age</span> <span class="o">&gt;</span> <span class="mi">18</span><span class="o">,</span> <span class="s">"NOT_OLD_ENOUGH"</span><span class="o">)</span> <span class="c1">// adds check with error message</span>
    <span class="o">.</span><span class="na">get</span><span class="o">();</span> <span class="c1">// gets the validated value, or throws ValidationException</span>
<span class="n">BananaBox</span> <span class="n">bananaBox</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="na">bodyValidator</span><span class="o">(</span><span class="n">BananaBox</span><span class="o">.</span><span class="na">class</span><span class="o">)</span>
    <span class="o">.</span><span class="na">check</span><span class="o">(</span><span class="n">box</span> <span class="o">-&gt;</span> <span class="n">box</span><span class="o">.</span><span class="na">weight</span> <span class="o">&lt;</span> <span class="mi">5</span><span class="o">,</span> <span class="n">ValidationError</span><span class="o">(</span><span class="s">"WEIGHT_TOO_HIGH"</span><span class="o">,</span> <span class="n">Map</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"MAX_WEIGHT"</span><span class="o">,</span> <span class="mi">5</span><span class="o">)))</span>
    <span class="o">.</span><span class="na">check</span><span class="o">(</span><span class="n">box</span> <span class="o">-&gt;</span> <span class="n">box</span><span class="o">.</span><span class="na">bananas</span><span class="o">.</span><span class="na">length</span> <span class="o">&gt;</span> <span class="mi">20</span><span class="o">,</span> <span class="n">ValidationError</span><span class="o">(</span><span class="s">"NOT_ENOUGH_BANANAS"</span><span class="o">,</span> <span class="n">Map</span><span class="o">.</span><span class="na">of</span><span class="o">(</span><span class="s">"MIN_BANANAS"</span><span class="o">,</span> <span class="mi">20</span><span class="o">)))</span>
    <span class="o">.</span><span class="na">getOrDefault</span><span class="o">(</span><span class="n">defaultBananaBox</span><span class="o">)</span> <span class="c1">// uses default if body is null, runs validation rules otherwise</span>
</code></pre>
</div>

<h2 id="websockets-and-server-sent-events">WebSockets and Server-Sent Events</h2>
<p>WebSockets and Server-Sent Events are handled with lambdas,
similar to most of Javalin’s other APIs:</p>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">app</span><span class="o">.</span><span class="na">ws</span><span class="o">(</span><span class="s">"/websocket/{path}"</span><span class="o">,</span> <span class="n">ws</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="n">ws</span><span class="o">.</span><span class="na">onConnect</span><span class="o">(</span><span class="n">ctx</span> <span class="o">-&gt;</span> <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Connected"</span><span class="o">));</span>
    <span class="n">ws</span><span class="o">.</span><span class="na">onMessage</span><span class="o">(</span><span class="n">ctx</span> <span class="o">-&gt;</span> <span class="o">{</span>
        <span class="n">User</span> <span class="n">user</span> <span class="o">=</span> <span class="n">ctx</span><span class="o">.</span><span class="na">messageAsClass</span><span class="o">(</span><span class="n">User</span><span class="o">.</span><span class="na">class</span><span class="o">);</span> <span class="c1">// convert from json</span>
        <span class="n">ctx</span><span class="o">.</span><span class="na">send</span><span class="o">(</span><span class="n">user</span><span class="o">);</span> <span class="c1">// convert to json and send back</span>
    <span class="o">});</span>
    <span class="n">ws</span><span class="o">.</span><span class="na">onBinaryMessage</span><span class="o">(</span><span class="n">ctx</span> <span class="o">-&gt;</span> <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Message"</span><span class="o">))</span>
    <span class="n">ws</span><span class="o">.</span><span class="na">onClose</span><span class="o">(</span><span class="n">ctx</span> <span class="o">-&gt;</span> <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Closed"</span><span class="o">));</span>
    <span class="n">ws</span><span class="o">.</span><span class="na">onError</span><span class="o">(</span><span class="n">ctx</span> <span class="o">-&gt;</span> <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Errored"</span><span class="o">));</span>
<span class="o">});</span>

<span class="n">app</span><span class="o">.</span><span class="na">sse</span><span class="o">(</span><span class="s">"/sse"</span><span class="o">,</span> <span class="n">client</span> <span class="o">-&gt;</span>
    <span class="n">client</span><span class="o">.</span><span class="na">sendEvent</span><span class="o">(</span><span class="s">"connected"</span><span class="o">,</span> <span class="s">"Hello, SSE"</span><span class="o">);</span>  <span class="c1">// can also send an object, which will be serialized</span>
    <span class="n">client</span><span class="o">.</span><span class="na">onClose</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">"Client disconnected"</span><span class="o">));</span>
<span class="o">});</span>
</code></pre>
    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><pre class="highlight"><code><span class="n">app</span><span class="p">.</span><span class="n">ws</span><span class="p">(</span><span class="s">"/websocket/{path}"</span><span class="p">)</span> <span class="p">{</span> <span class="n">ws</span> <span class="p">-&gt;</span>
    <span class="n">ws</span><span class="p">.</span><span class="n">onConnect</span> <span class="p">{</span> <span class="n">ctx</span> <span class="p">-&gt;</span> <span class="n">println</span><span class="p">(</span><span class="s">"Connected"</span><span class="p">)</span> <span class="p">}</span>
    <span class="n">ws</span><span class="p">.</span><span class="n">onMessage</span> <span class="p">{</span> <span class="n">ctx</span> <span class="p">-&gt;</span>
        <span class="kd">val</span> <span class="py">user</span> <span class="p">=</span> <span class="n">ctx</span><span class="p">.</span><span class="n">messageAsClass</span><span class="p">&lt;</span><span class="n">User</span><span class="p">&gt;();</span> <span class="c1">// convert from json
</span>        <span class="n">ctx</span><span class="p">.</span><span class="n">send</span><span class="p">(</span><span class="n">user</span><span class="p">);</span> <span class="c1">// convert to json and send back
</span>    <span class="p">}</span>
    <span class="n">ws</span><span class="p">.</span><span class="n">onBinaryMessage</span> <span class="p">{</span> <span class="n">ctx</span> <span class="p">-&gt;</span> <span class="n">println</span><span class="p">(</span><span class="s">"Message"</span><span class="p">)</span> <span class="p">}</span>
    <span class="n">ws</span><span class="p">.</span><span class="n">onClose</span> <span class="p">{</span> <span class="n">ctx</span> <span class="p">-&gt;</span> <span class="n">println</span><span class="p">(</span><span class="s">"Closed"</span><span class="p">)</span> <span class="p">}</span>
    <span class="n">ws</span><span class="p">.</span><span class="n">onError</span> <span class="p">{</span> <span class="n">ctx</span> <span class="p">-&gt;</span> <span class="n">println</span><span class="p">(</span><span class="s">"Errored"</span><span class="p">)</span> <span class="p">}</span>
<span class="p">}</span>

<span class="n">app</span><span class="p">.</span><span class="n">sse</span><span class="p">(</span><span class="s">"/sse"</span><span class="p">)</span> <span class="p">{</span> <span class="n">client</span> <span class="p">-&gt;</span>
    <span class="n">client</span><span class="p">.</span><span class="n">sendEvent</span><span class="p">(</span><span class="s">"connected"</span><span class="p">,</span> <span class="s">"Hello, SSE"</span><span class="p">)</span> <span class="c1">// can also send an object, which will be serialized
</span>    <span class="n">client</span><span class="p">.</span><span class="n">onClose</span> <span class="p">{</span> <span class="n">println</span><span class="p">(</span><span class="s">"Client disconnected"</span><span class="p">)</span> <span class="p">}</span>
<span class="p">}</span>
</code></pre>
    </div>
  </div>
</div>

<h2 id="routing-and-request-lifecycle">Routing and request lifecycle</h2>
<p>Routing in Javalin can either happen directly on the <code class="highlighter-rouge">Javalin</code> instance (usually named <code class="highlighter-rouge">app</code>),
or through a set of util-methods which improves readability. Please note that these util-method
do not hold any global state, but function as normal util-methods (<code class="highlighter-rouge">Util.method(app, ...)</code>) with a fancy syntax.</p>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="kn">import</span> <span class="nn">static</span> <span class="n">io</span><span class="o">.</span><span class="na">javalin</span><span class="o">.</span><span class="na">apibuilder</span><span class="o">.</span><span class="na">ApiBuilder</span><span class="o">.*</span>
<span class="o">...</span>
<span class="n">app</span><span class="o">.</span><span class="na">routes</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="n">before</span><span class="o">(</span><span class="nl">GlobalController:</span><span class="o">:</span><span class="n">globalAction</span><span class="o">)</span>               <span class="c1">// handler that runs for every request to the app</span>
    <span class="n">path</span><span class="o">(</span><span class="s">"users"</span><span class="o">,</span> <span class="o">()</span> <span class="o">-&gt;</span> <span class="o">{</span>                                <span class="c1">// push subpath /users on the router</span>
        <span class="n">get</span><span class="o">(</span><span class="nl">UserController:</span><span class="o">:</span><span class="n">getAll</span><span class="o">);</span>                     <span class="c1">// get controller for /users/</span>
        <span class="n">post</span><span class="o">(</span><span class="nl">UserController:</span><span class="o">:</span><span class="n">create</span><span class="o">);</span>                    <span class="c1">// post controller for /users/</span>
        <span class="n">before</span><span class="o">(</span><span class="s">"{userId}*"</span><span class="o">,</span> <span class="nl">UserController:</span><span class="n">userIdCheck</span><span class="o">);</span> <span class="c1">// handler that runs for every request to /users/{userId} as well as al subpaths</span>
        <span class="n">path</span><span class="o">(</span><span class="s">"{userId}"</span><span class="o">,</span> <span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span>                        <span class="c1">// new subpath /{userId} on the router</span>
            <span class="n">get</span><span class="o">(</span><span class="nl">UserController:</span><span class="o">:</span><span class="n">getOne</span><span class="o">);</span>                 <span class="c1">// get controller for /users/{userId}</span>
            <span class="n">patch</span><span class="o">(</span><span class="nl">UserController:</span><span class="o">:</span><span class="n">update</span><span class="o">);</span>               <span class="c1">// patch controller for /users/{userId}</span>
            <span class="n">path</span><span class="o">(</span><span class="s">"subpath"</span><span class="o">,</span> <span class="o">(()</span> <span class="o">-&gt;</span> <span class="o">{</span> <span class="o">...</span> <span class="o">});</span>             <span class="c1">// push subpath /subpath on the router (and pop it immediately)</span>
        <span class="o">});</span>                                              <span class="c1">// pop subpath /{userId} on the router</span>
        <span class="n">ws</span><span class="o">(</span><span class="s">"events"</span><span class="o">,</span> <span class="nl">UserController:</span><span class="o">:</span><span class="n">webSocketEvents</span><span class="o">);</span>   <span class="c1">// websocket controller for /users/events</span>
    <span class="o">});</span>                                                  <span class="c1">// pop subpath /users on the router</span>
<span class="o">}).</span><span class="na">start</span><span class="o">(</span><span class="n">port</span><span class="o">);</span>
</code></pre>
    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><pre class="highlight"><code><span class="k">import</span> <span class="nn">static</span> <span class="n">io</span><span class="p">.</span><span class="n">javalin</span><span class="p">.</span><span class="n">apibuilder</span><span class="p">.</span><span class="n">ApiBuilder</span><span class="p">.*</span>
<span class="o">..</span><span class="p">.</span>
<span class="n">app</span><span class="p">.</span><span class="n">routes</span> <span class="p">{</span>
    <span class="n">before</span><span class="p">(</span><span class="n">GlobalController</span><span class="o">::</span><span class="n">globalAction</span><span class="p">)</span>               <span class="c1">// handler that runs for every request to the app
</span>    <span class="n">path</span><span class="p">(</span><span class="s">"users"</span><span class="p">)</span> <span class="p">{</span>                                      <span class="c1">// push subpath /users on the router
</span>        <span class="k">get</span><span class="p">(</span><span class="n">UserController</span><span class="o">::</span><span class="n">getAll</span><span class="p">)</span>                      <span class="c1">// get controller for /users/
</span>        <span class="n">post</span><span class="p">(</span><span class="n">UserController</span><span class="o">::</span><span class="n">create</span><span class="p">)</span>                     <span class="c1">// post controller for /users/
</span>        <span class="n">before</span><span class="p">(</span><span class="s">"{userId}*"</span><span class="p">,</span> <span class="n">UserController</span><span class="p">:</span><span class="n">userIdCheck</span><span class="p">)</span>  <span class="c1">// handler that runs for every request to /users/{userId} as well as al subpaths
</span>        <span class="n">path</span><span class="p">(</span><span class="s">"{userId}"</span><span class="p">)</span> <span class="p">{</span>                               <span class="c1">// new subpath /{userId} on the router
</span>            <span class="k">get</span><span class="p">(</span><span class="n">UserController</span><span class="o">::</span><span class="n">getOne</span><span class="p">)</span>                  <span class="c1">// get controller for /users/{userId}
</span>            <span class="n">patch</span><span class="p">(</span><span class="n">UserController</span><span class="o">::</span><span class="n">update</span><span class="p">)</span>                <span class="c1">// patch controller for /users/{userId}
</span>            <span class="n">path</span><span class="p">(</span><span class="s">"subpath"</span><span class="p">)</span> <span class="p">{</span> <span class="o">..</span><span class="p">.</span> <span class="p">}</span>                      <span class="c1">// push subpath /subpath on the router (and pop it immediately)
</span>        <span class="p">}</span>                                                <span class="c1">// pop subpath /{userId} on the router
</span>        <span class="n">ws</span><span class="p">(</span><span class="s">"events"</span><span class="p">,</span> <span class="n">UserController</span><span class="o">::</span><span class="n">webSocketEvents</span><span class="p">)</span>    <span class="c1">// websocket controller for /users/events
</span>    <span class="p">}</span>                                                    <span class="c1">// pop subpath /users on the router
</span><span class="p">}.</span><span class="n">start</span><span class="p">(</span><span class="n">port</span><span class="p">)</span>
</code></pre>
    </div>
  </div>
</div>

<h3 id="request-lifecycle">Request lifecycle</h3>
<p>The Javalin request lifecycle is pretty straightforward.
The following snippet covers every place you can hook into:</p>
<div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">Javalin</span><span class="err">#</span><span class="n">before</span>              <span class="c1">// runs first, can throw exception (which will skip any endpoint handlers)</span>
<span class="n">Javalin</span><span class="err">#</span><span class="n">get</span><span class="o">/</span><span class="n">post</span><span class="o">/</span><span class="n">patch</span><span class="o">/</span><span class="n">etc</span>  <span class="c1">// runs second, can throw exception</span>
<span class="n">Javalin</span><span class="err">#</span><span class="n">after</span>               <span class="c1">// runs third, can throw exception</span>
<span class="n">Javalin</span><span class="err">#</span><span class="n">error</span>               <span class="c1">// runs fourth, can throw exception</span>
<span class="n">Javalin</span><span class="err">#</span><span class="n">exception</span>           <span class="c1">// runs any time a handler throws (cannot throw exception)</span>
<span class="n">JavalinConfig</span><span class="err">#</span><span class="n">requestLogger</span> <span class="c1">// runs after response is written to client</span>
<span class="n">JavalinConfig</span><span class="err">#</span><span class="n">accessManager</span> <span class="c1">// wraps all your endpoint handlers in a lambda of your choice</span>
</code></pre>
</div>

<h2 id="configuring-the-server">Configuring the server</h2>
<p>To configure Javalin, you can adjust the <code class="highlighter-rouge">JavalinConfig</code> using a <code class="highlighter-rouge">Consumer</code> in the <code class="highlighter-rouge">Javalin#create</code> method:</p>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">var</span> <span class="n">app</span> <span class="o">=</span> <span class="n">Javalin</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="n">config</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="n">config</span><span class="o">.</span><span class="na">autogenerateEtags</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
    <span class="n">config</span><span class="o">.</span><span class="na">addStaticFiles</span><span class="o">(</span><span class="s">"/public"</span><span class="o">,</span> <span class="n">Location</span><span class="o">.</span><span class="na">CLASSPATH</span><span class="o">);</span>
    <span class="n">config</span><span class="o">.</span><span class="na">asyncRequestTimeout</span> <span class="o">=</span> <span class="mi">10</span><span class="n">_000L</span><span class="o">;</span>
    <span class="n">config</span><span class="o">.</span><span class="na">enforceSsl</span> <span class="o">=</span> <span class="kc">true</span><span class="o">;</span>
<span class="o">});</span>
</code></pre>
    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><pre class="highlight"><code><span class="kd">val</span> <span class="py">app</span> <span class="p">=</span> <span class="n">Javalin</span><span class="p">.</span><span class="n">create</span> <span class="p">{</span> <span class="n">config</span> <span class="p">-&gt;</span>
    <span class="n">config</span><span class="p">.</span><span class="n">autogenerateEtags</span> <span class="p">=</span> <span class="k">true</span>
    <span class="n">config</span><span class="p">.</span><span class="n">addStaticFiles</span><span class="p">(</span><span class="s">"/public"</span><span class="p">,</span> <span class="n">Location</span><span class="p">.</span><span class="n">CLASSPATH</span><span class="p">);</span>
    <span class="n">config</span><span class="p">.</span><span class="n">asyncRequestTimeout</span> <span class="p">=</span> <span class="m">10</span><span class="n">_000L</span>
    <span class="n">config</span><span class="p">.</span><span class="n">enforceSsl</span> <span class="p">=</span> <span class="k">true</span>
<span class="p">};</span>
</code></pre>
    </div>
  </div>
</div>

<h2 id="configuring-jetty">Configuring Jetty</h2>
<p>Javalin is built on top of Jetty, and unlike many other web frameworks
it doesn’t try to make this a loose coupling. This gives you access to many nice features that
are only available in Jetty:</p>

<div class="multitab-code" data-tab="1">
<ul>
    <li data-tab="1">Java</li>
    <li data-tab="2">Kotlin</li>
</ul>
<div data-tab="1">
    <div class="language-java highlighter-rouge"><pre class="highlight"><code><span class="n">var</span> <span class="n">app</span> <span class="o">=</span> <span class="n">Javalin</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="n">config</span> <span class="o">-&gt;</span> <span class="o">{</span>
    <span class="n">wsFactoryConfig</span><span class="o">((</span><span class="n">factory</span><span class="o">)</span> <span class="o">-&gt;</span> <span class="o">{})</span>                <span class="c1">// configure the Jetty WebSocketServletFactory</span>
    <span class="n">server</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="n">Server</span><span class="o">())</span>                          <span class="c1">// set the Jetty Server</span>
    <span class="n">sessionHandler</span><span class="o">(()</span> <span class="o">-&gt;</span> <span class="n">SessionHandler</span><span class="o">())</span>          <span class="c1">// set the Jetty SessionHandler</span>
    <span class="n">configureServletContextHandler</span><span class="o">(</span><span class="n">handler</span> <span class="o">-&gt;</span> <span class="o">{})</span>   <span class="c1">// configure the Jetty ServletContextHandler</span>
<span class="o">});</span>
</code></pre>
    </div>
  </div>
<div data-tab="2">
    <div class="language-kotlin highlighter-rouge"><pre class="highlight"><code><span class="kd">val</span> <span class="py">app</span> <span class="p">=</span> <span class="n">Javalin</span><span class="p">.</span><span class="n">create</span> <span class="p">{</span> <span class="n">config</span> <span class="p">-&gt;</span>
    <span class="n">wsFactoryConfig</span> <span class="p">{</span> <span class="n">factory</span> <span class="p">-&gt;</span> <span class="p">}</span>                  <span class="c1">// configure the Jetty WebSocketServletFactory
</span>    <span class="n">server</span> <span class="p">{</span> <span class="n">Server</span><span class="p">()</span> <span class="p">}</span>                             <span class="c1">// set the Jetty Server
</span>    <span class="n">sessionHandler</span> <span class="p">{</span> <span class="n">SessionHandler</span><span class="p">()</span> <span class="p">}</span>             <span class="c1">// set the Jetty SessionHandler
</span>    <span class="n">configureServletContextHandler</span> <span class="p">{</span> <span class="n">handler</span> <span class="p">-&gt;</span> <span class="p">}</span>   <span class="c1">// configure the Jetty ServletContextHandler
</span><span class="p">}</span>
</code></pre>
    </div>
  </div>
</div>

<p>Session handling is a particularly useful Jetty feature
<a href="/tutorials/jetty-session-handling">/tutorials/jetty-session-handling</a>.</p>

<h2 id="plugins">Plugins</h2>
<p>There are many third-party open-source plugins available for Javalin, and a few of them have
made it into the core:</p>

<ul>
  <li><strong>OpenAPI</strong> - Create OpenAPI specs for your endpoints and host documentation with
either Swagger or ReDoc (<a href="/plugins/openapi">/plugins/openapi</a>)</li>
  <li><strong>GraphQL</strong> - Create a GraphQL server in a couple of lines (<a href="/plugins/graphql">/plugins/graphql</a>)</li>
  <li><strong>Vue</strong> - Create super simple Vue frontends without the need for WebPack, Vite, etc
(<a href="/plugins/javalinvue">/plugins/javalinvue</a>)</li>
</ul>

<h2 id="whats-changed-since-javalin-3">What’s changed since Javalin 3</h2>
<p>A full overview can be found in the <a href="/migration-guide-javalin-3-to-4">Javalin 3 to 4 migration guide</a>,
but you can see some of the highlights below:</p>
<ul>
  <li>All Javalin modules now work with JDK 16 and Kotlin 1.5</li>
  <li>The default Server uses a Loom based ThreadPool if you are using a JDK with Loom.</li>
  <li>Routing has been extended and now uses <code class="highlighter-rouge"><span class="p">{</span><span class="err">param</span><span class="p">}</span></code> instead of <code class="highlighter-rouge">:param</code> syntax. This allows for much more complex routing.
There is also a <code class="highlighter-rouge">&lt;param&gt;</code> syntax for supporting slashes in path parameters.</li>
  <li>The <code class="highlighter-rouge">Validator</code> class has been completely reworked,
it now has much better support for customization.</li>
  <li>A new module for testing, <code class="highlighter-rouge">javalin-testtools</code>, has been added.</li>
  <li>The reified methods on <code class="highlighter-rouge">Context</code> that were causing issue with
mocking libraries (Mockito and Mockk) have been renamed. This solves
tests behaving in nondeterministic ways.</li>
  <li>Static files have been completely reworked.
All global settings related to static files have been removed,
and more advanced options have been added to each static file handler.</li>
  <li>Future handling has been reworked, you can now attach your own callback</li>
  <li>JSON-mapping is now configured per instance, instead of through a singleton</li>
</ul>

<h3 id="get-involved">Get involved</h3>
<p>If you want to contribute to the project, please head over to
<a href="https://github.com/tipsy/javalin">GitHub</a> or <a href="https://discord.com/invite/sgak4e5NKv">Discord</a>.</p>

<p>If you want to stay up to date, please follow us on <a href="https://twitter.com/javalin_io">Twitter</a>.</p>

    </div>
</article>
<style>
    .social {
        margin: 30px 0;
        display: flex;
    }
    .social-btn {
        text-align: center;
        min-width: 240px;
        padding: 10px 16px 8px;
        font-size: 14px;
        font-family: 'Roboto Slab', sans-serif;
        font-weight: 600;
        color: #fff;
        background: #000;
        border-radius: 50px;
        box-shadow: 2px 2px red, -2px -2px cyan;
    }
    .social-btn + .social-btn {
        margin-left: 24px;
    }
    .social-btn:hover {
        background: #008ab4;
    }
    .social-btn img {
        width: 24px;
        display: inline;
        vertical-align: middle;
        margin-right: 12px;
    }
    @media (max-width: 480px) {
        .social {
            justify-content: space-between;
        }
        .social-btn {
            min-width: 0;
            width: calc(50% - 12px);
            text-align: left;
            display: flex;
            align-items: center;
        }
        .social-btn + .social-btn {
            margin-left: 0;
        }
    }
</style>
<div class="social">
    <a class="social-btn" href="https://twitter.com/intent/tweet?text=Javalin 4.0 stable is ready!&url=/news/javalin-4.0.0-stable.html&via=javalin_io&related=javalin_io"
       rel="nofollow"
       title="Share on Twitter">
        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAMAAACdt4HsAAAAM1BMVEUAAAD///////////////////////////////////////////////////////////////+3leKCAAAAEHRSTlMA8BDQwKCAMOBwYECwUCCQ27fl2AAAAW1JREFUWMPtltuOwyAMRLG5QxL8/1+7G6lKFApMaJ5W2/NIPCPAnlL15R+xRSM7ZPMnci5yYvxrNRt3VMRtpPdBLqR9MWkhPkpI80BPUpFy2dfiUbKK9B02kjbmrCkycNAdfeCqpuOQOnrye2teRS9LrxqEjn4tQSS/io7Fxg1Kn/MWjxX7dgw30NvGNkO9CQP1O8v7oGEDq07i9Uu+YxAvs1J91GmDBtdQLVKjYz6/YINNWujiVgsMet3CqAr7yICKn3XQF4N9gizJDAsIDMSBLkIyyDzkmjqmWb0GoYUUBVKLWFUF6yk9gccDYtU7bKabWBNv9yKoDunmTcSW2Im+uwNi1cBP5+DjUSAGrzgiVcLZSBmlHjnQBv7L4AOMYEdwiAGcFgK/A5BN9/WsMCs90nsjT/SrGd0fI3UJIIIdovtlAUnWftA5KwiKakg2Y7ljfPn9tzWkUw5GsHV059UEOVpDR2wXl1l9+RP8AHA4c7ljId3mAAAAAElFTkSuQmCC">Share on Twitter
    </a>
    <a class="social-btn" href="https://facebook.com/sharer.php?u=/news/javalin-4.0.0-stable.html"
       rel="nofollow"
       title="Share on Facebook">
        <img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABABAMAAABYR2ztAAAAMFBMVEUAAAD///////////////////////////////////////////////////////////87TQQwAAAAD3RSTlMAwIDwEEDgMKBgINBwUJA4su2wAAAAy0lEQVRIx2MYJICr+T9WkOQAVTD/Pw5gDpHn/I8TXAAriMetwAqsQB63gh9gBf/xgAFT8E0QCPJxK/ixACTqj1PB5wCwKD9OBbsY8Cv4XEBAwU8GAgoECCmYABTB5QuEUI2S0n4cCn6DRBzxhORHkMh5Qgr0h7eCjw6I/BiPTcEnBgRgxKbgK5ICPkIKmGij4C+yIwn5gg2bgm9ICuIHa2SNKqCZgs9gBf2YClBTkDNuBSlgBeyYCtDKzGJcCtKhyY+lH7sCIweGwQEAY2jNUu1+zZgAAAAASUVORK5CYII=">Share on Facebook
    </a>
</div>


    </main>
    <footer>
        Javalin is a Java and Kotlin web framework, open sourced under the
        <a href="https://tldrlegal.com/license/apache-license-2.0-(apache-2.0)">Apache 2</a> license
        | <a href="/download">Download</a>
        | <a href="/about">About</a>
        | <a href="/news">News</a>
        | <a href="/about#contact">Contact</a>
        | <a href="/for-educators">For educators</a>
    </footer>
    <div id="star-begging">
    <style>
        #star-begging {
            transition: transform .25s;
            transform: scale(0);
            border-radius: 8px;
            position: fixed;
            bottom: 32px;
            right: 32px;
            padding: 20px 40px 16px 20px;
            background: #fff;
            box-shadow: 0 1px 20px rgba(0, 0, 0, 0.15);
            z-index: 9999998;
        }
        #star-begging.in {
            transform: scale(1);
        }
        #star-begging.out {
            transform: translateX(400px);
        }
        #star-begging p {
            font-size: 16px;
            margin: 0 0 15px;
        }
        #star-begging .close {
            position: absolute;
            right: 20px;
            top: 20px;
            height: 40px;
            width: 40px;
            line-height: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 28px;
            font-family: arial, sans-serif;
            cursor: pointer;
            background: rgba(0, 0, 0, 0.05);
            border-radius: 5px;
        }
    </style>
    <p>
        Like Javalin?
        <br>Star us 😊
    </p>
    <span class="close">×</span>
    <iframe id="starFrame" class="githubStar" title="github-stars"
            src="https://ghbtns.com/github-btn.html?user=javalin&amp;repo=javalin&amp;type=star&amp;count=true&size=large"
            frameborder="0" scrolling="0" width="150px" height="30px">
    </iframe>
    <script>
        if (localStorage.getItem("dismissed") !== "true" && document.getElementById("notification-banner") === null) {
            setTimeout(function () {
                document.querySelector("#star-begging").classList.add("in");
            }, 15000);
            document.querySelector("#star-begging .close").addEventListener("click", function () {
                document.querySelector("#star-begging").classList.add("out");
                localStorage.setItem("dismissed", "true");
            });
        }
    </script>
</div>

    <script src="/js/scripts.js"></script>
</body>
</html>
